{
  super(message,ERROR_MESSAGE,OK_CANCEL_OPTION,null,buttons);
  this.exception=exception;
  this.messageContainer=message;
  this.resources=resources;
  this.traceButton=buttons[0];
  buttons[0].addActionListener(this);
  buttons[1].addActionListener(this);
  final String classname=Classes.getShortClassName(exception);
  final String title=resources.getString(VocabularyKeys.ERROR_$1,classname);
  final JDesktopPane desktop=getDesktopPaneForComponent(owner);
  if (desktop != null) {
    final JInternalFrame dlg=createInternalFrame(desktop,title);
    desktop.setLayer(dlg,JDesktopPane.MODAL_LAYER.intValue());
    dlg.setDefaultCloseOperation(JInternalFrame.DISPOSE_ON_CLOSE);
    dlg.setResizable(false);
    dlg.pack();
    this.dialog=dlg;
  }
 else {
    final JDialog dlg=createDialog(owner,title);
    dlg.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
    dlg.setResizable(false);
    dlg.pack();
    this.dialog=dlg;
  }
  initialSize=dialog.getSize();
}
