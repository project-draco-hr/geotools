{
  Set fids=new HashSet();
  String typeName=getSchema().getTypeName();
  DefaultQuery query=new DefaultQuery(typeName,filter,Integer.MAX_VALUE,Query.ALL_NAMES,"fids");
  FeatureReader<SimpleFeatureType,SimpleFeature> reader=getJDBCDataStore().getFeatureReader(query,getTransaction());
  try {
    while (reader.hasNext()) {
      fids.add(reader.next().getID());
    }
  }
  finally {
    reader.close();
  }
  return fids;
}
