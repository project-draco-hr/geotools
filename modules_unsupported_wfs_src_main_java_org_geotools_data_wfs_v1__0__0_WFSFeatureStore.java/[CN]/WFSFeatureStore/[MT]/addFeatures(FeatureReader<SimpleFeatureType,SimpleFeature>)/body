{
  List<SimpleFeature> features=new ArrayList<SimpleFeature>();
  while (reader.hasNext()) {
    try {
      SimpleFeature next=reader.next();
      features.add(next);
    }
 catch (    Exception e) {
      throw (IOException)new IOException().initCause(e);
    }
  }
  return addFeatures(DataUtilities.collection((SimpleFeature[])features.toArray(new SimpleFeature[0])));
}
