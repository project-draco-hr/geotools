{
  final Expression sourceExpression=attMapping.getSourceExpression();
  Object value=getValue(sourceExpression,source);
  String id=null;
  if (Expression.NIL != attMapping.getIdentifierExpression()) {
    id=extractIdForAttribute(attMapping.getIdentifierExpression(),source);
  }
  final AttributeType targetNodeType=attMapping.getTargetNodeInstance();
  final StepList xpath=attMapping.getTargetXPath();
  Attribute instance=xpathAttributeBuilder.set(target,xpath,value,id,targetNodeType,attMapping.isMultiValued(),null,attMapping.getSourceExpression());
  Map<Name,Expression> clientPropsMappings=attMapping.getClientProperties();
  setClientProperties(instance,source,clientPropsMappings);
}
