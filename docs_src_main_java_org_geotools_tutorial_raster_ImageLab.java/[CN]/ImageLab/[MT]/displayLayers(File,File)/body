{
  AbstractGridFormat format=GridFormatFinder.findFormat(rasterFile);
  reader=format.getReader(rasterFile);
  Style rasterStyle=createGreyscaleStyle(1);
  FileDataStore dataStore=FileDataStoreFinder.getDataStore(shpFile);
  SimpleFeatureSource shapefileSource=dataStore.getFeatureSource();
  Style shpStyle=SLD.createPolygonStyle(Color.YELLOW,null,0.0f);
  final MapContent map=new MapContent();
  map.setTitle("ImageLab");
  Layer rasterLayer=new GridReaderLayer(reader,rasterStyle);
  map.addLayer(rasterLayer);
  Layer shpLayer=new FeatureLayer(shapefileSource,shpStyle);
  map.addLayer(shpLayer);
  frame=new JMapFrame(map);
  frame.setSize(800,600);
  frame.enableStatusBar(true);
  frame.enableToolBar(true);
  JMenuBar menuBar=new JMenuBar();
  frame.setJMenuBar(menuBar);
  JMenu menu=new JMenu("Raster");
  menuBar.add(menu);
  menu.add(new SafeAction("Grayscale display"){
    public void action(    ActionEvent e) throws Throwable {
      Style style=createGreyscaleStyle();
      if (style != null) {
        ((StyleLayer)map.layers().get(0)).setStyle(style);
        frame.repaint();
      }
    }
  }
);
  menu.add(new SafeAction("RGB display"){
    public void action(    ActionEvent e) throws Throwable {
      Style style=createRGBStyle();
      if (style != null) {
        ((StyleLayer)map.layers().get(0)).setStyle(style);
        frame.repaint();
      }
    }
  }
);
  frame.setVisible(true);
}
