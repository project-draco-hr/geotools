{
  if (url == null) {
    throw new NullPointerException("url cannot be null");
  }
  if (requestor == null) {
    throw new NullPointerException("requestor cannot be null");
  }
  Collection<ShpFilesLocker> threadLockers=getCurrentThreadLockers();
  boolean removed=threadLockers.remove(new ShpFilesLocker(url,requestor));
  if (!removed) {
    throw new IllegalArgumentException("Expected requestor " + requestor + " to have locked the url but it does not hold the lock for the URL");
  }
  if (threadLockers.size() == 0) {
    lockers.remove(Thread.currentThread());
  }
 else {
    regainReadLocks(threadLockers);
  }
  readWriteLock.writeLock().unlock();
}
