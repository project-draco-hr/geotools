{
  File shpFile=copyShapefiles(STATE_POP);
  ShpFileType fix=ShpFileType.FIX;
  File fixFile=sibling(shpFile,fix.extension);
  fixFile.delete();
  IndexedShapefileDataStore ds=new IndexedShapefileDataStore(shpFile.toURI().toURL());
  ds.generateFidIndex();
  assertFalse(ds.needsGeneration(fix));
  long fixMod=fixFile.lastModified();
  shpFile.setLastModified(fixMod + 1000);
  assertTrue(ds.needsGeneration(fix));
  fixFile.setLastModified(shpFile.lastModified());
  assertFalse(ds.needsGeneration(fix));
  assertTrue(fixFile.delete());
  assertTrue(ds.needsGeneration(fix));
  ds.dispose();
}
