{
  final Set<Identifier> identifiers=filter.getIdentifiers();
  if (identifiers.size() == 0) {
    Filter.EXCLUDE.accept(this,unused);
    return unused;
  }
  long[] fids=ArcSDEAdapter.getNumericFids(identifiers);
  int nFids=fids.length;
  if (nFids == 0) {
    return unused;
  }
  try {
    String sql=buildFidFilter(fids,layerFidFieldName," IN(",")",",",1000," OR ");
    if (LOGGER.isLoggable(Level.FINER)) {
      LOGGER.finer("added fid filter: " + sql);
    }
    this.out.write(sql);
  }
 catch (  Exception ex) {
    throw new RuntimeException(ex.getMessage(),ex);
  }
  return unused;
}
