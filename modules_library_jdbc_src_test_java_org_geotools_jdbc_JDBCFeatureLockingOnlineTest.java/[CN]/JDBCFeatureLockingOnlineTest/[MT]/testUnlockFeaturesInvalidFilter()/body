{
  FeatureLock lock=FeatureLockFactory.generate(tname("ft1"),60 * 60 * 1000);
  Transaction tx=new DefaultTransaction();
  store.setTransaction(tx);
  store.setFeatureLock(lock);
  tx.addAuthorization(lock.getAuthorization());
  store.lockFeatures();
  FilterFactory ff=dataStore.getFilterFactory();
  PropertyIsEqualTo f=ff.equals(ff.property(aname("invalidProperty")),ff.literal(1));
  try {
    store.unLockFeatures(new DefaultQuery(store.getSchema().getTypeName(),f));
    fail("Should have failed with an exception, the filter is not valid");
  }
 catch (  Exception e) {
  }
  store.unLockFeatures();
  tx.close();
}
