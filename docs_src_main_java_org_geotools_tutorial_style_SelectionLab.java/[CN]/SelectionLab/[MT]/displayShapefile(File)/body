{
  FileDataStore store=FileDataStoreFinder.getDataStore(file);
  featureSource=store.getFeatureSource();
  setGeometry();
  MapContext map=new DefaultMapContext();
  map.setTitle("Feature selection tool example");
  Style style=createDefaultStyle();
  map.addLayer(featureSource,style);
  mapFrame=new JMapFrame(map);
  mapFrame.enableToolBar(true);
  mapFrame.enableStatusBar(true);
  JToolBar toolBar=mapFrame.getToolBar();
  JButton btn=new JButton("Select");
  toolBar.addSeparator();
  toolBar.add(btn);
  btn.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      mapFrame.getMapPane().setCursorTool(new CursorTool(){
        @Override public void onMouseClicked(        MapMouseEvent ev){
          selectFeatures(ev);
        }
      }
);
    }
  }
);
  mapFrame.setSize(600,600);
  mapFrame.setVisible(true);
}
