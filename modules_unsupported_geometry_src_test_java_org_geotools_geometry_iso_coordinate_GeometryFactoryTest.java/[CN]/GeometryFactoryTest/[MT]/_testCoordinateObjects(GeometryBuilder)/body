{
  GeometryFactoryImpl cf=(GeometryFactoryImpl)builder.getGeometryFactory();
  DirectPosition dp1=cf.createDirectPosition();
  assertTrue(Double.compare(dp1.getOrdinate(0),Double.NaN) == 0);
  assertTrue(Double.compare(dp1.getOrdinate(1),Double.NaN) == 0);
  assertTrue(Double.compare(dp1.getOrdinate(2),Double.NaN) == 0);
  double[] da=new double[3];
  da[0]=10.0;
  da[1]=-115000.0;
  da[2]=0.0000000125;
  DirectPosition dp2=cf.createDirectPosition(da);
  assertTrue(dp2.getOrdinate(0) == 10.0);
  assertTrue(dp2.getOrdinate(1) == -115000.0);
  assertTrue(dp2.getOrdinate(2) == 0.0000000125);
  Envelope env1=cf.createEnvelope(dp1,dp2);
  DirectPosition lc=env1.getLowerCorner();
  assertTrue(Double.compare(lc.getOrdinate(0),Double.NaN) == 0);
  assertTrue(Double.compare(lc.getOrdinate(1),Double.NaN) == 0);
  assertTrue(Double.compare(lc.getOrdinate(2),Double.NaN) == 0);
  DirectPosition uc=env1.getUpperCorner();
  assertTrue(uc.getOrdinate(0) == 10.0);
  assertTrue(uc.getOrdinate(1) == -115000.0);
  assertTrue(uc.getOrdinate(2) == 0.0000000125);
  env1=cf.createEnvelope(dp2,dp1);
  lc=env1.getLowerCorner();
  assertTrue(lc.getOrdinate(0) == 10.0);
  assertTrue(lc.getOrdinate(1) == -115000.0);
  assertTrue(lc.getOrdinate(2) == 0.0000000125);
  uc=env1.getUpperCorner();
  assertTrue(Double.compare(uc.getOrdinate(0),Double.NaN) == 0);
  assertTrue(Double.compare(uc.getOrdinate(1),Double.NaN) == 0);
  assertTrue(Double.compare(uc.getOrdinate(2),Double.NaN) == 0);
  Position pos1=cf.createPosition(dp2);
  assertTrue(pos1.getDirectPosition().getOrdinate(0) == 10.0);
  assertTrue(pos1.getDirectPosition().getOrdinate(1) == -115000.0);
  assertTrue(pos1.getDirectPosition().getOrdinate(2) == 0.0000000125);
  Position pos2=cf.createPosition(dp1);
  LineSegment seg1=cf.createLineSegment(pos1,pos2);
  assertTrue(Double.compare(seg1.getEndPoint().getOrdinate(0),Double.NaN) == 0.0);
  assertTrue(Double.compare(seg1.getEndPoint().getOrdinate(1),Double.NaN) == 0.0);
  assertTrue(Double.compare(seg1.getEndPoint().getOrdinate(2),Double.NaN) == 0.0);
  assertTrue(seg1.getStartPoint().getOrdinate(0) == 10.0);
  assertTrue(seg1.getStartPoint().getOrdinate(1) == -115000.0);
  assertTrue(seg1.getStartPoint().getOrdinate(2) == 0.0000000125);
}
