{
  OperationType operationType;
switch (operation) {
case DESCRIBE_FEATURETYPE:
    operationType=capabilities.getDescribeFeatureType();
  break;
case GET_CAPABILITIES:
operationType=capabilities.getGetCapabilities();
break;
case GET_FEATURE:
operationType=capabilities.getGetFeature();
break;
case GET_FEATURE_WITH_LOCK:
operationType=capabilities.getGetFeatureWithLock();
break;
case LOCK_FEATURE:
operationType=capabilities.getLockFeature();
break;
case TRANSACTION:
operationType=capabilities.getTransaction();
break;
default :
throw new IllegalArgumentException("Unknown operation type " + operation);
}
if (operationType == null) {
throw new UnsupportedOperationException(operation + " not supported by the server");
}
URL url;
if (GET == method) {
url=operationType.getGet();
}
 else {
url=operationType.getPost();
}
if (url == null) {
throw new UnsupportedOperationException("Method " + method + " for "+ operation+ " is not supported by the server");
}
return url;
}
