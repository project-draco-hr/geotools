{
  if (this.goodRecs != null) {
    while (!featureAvailable && this.goodRecs.hasNext()) {
      next=(Data)goodRecs.next();
      Long l=(Long)next.getValue(1);
      shp.goTo((int)l.longValue());
      record=shp.nextRecord();
      Envelope envelope=record.envelope();
      if (targetBBox != null && !targetBBox.isNull() && !targetBBox.intersects(envelope)) {
        geometry=null;
        continue;
      }
 else       if (simplificationDistance > 0 && envelope.getWidth() < simplificationDistance && envelope.getHeight() < simplificationDistance) {
        try {
          if (screenMap != null && screenMap.checkAndSet(envelope)) {
            geometry=null;
            continue;
          }
 else {
            geometry=record.getSimplifiedShape(screenMap);
          }
        }
 catch (        Exception e) {
          geometry=record.getSimplifiedShape();
        }
      }
 else {
        geometry=record.shape();
      }
      if (dbf != null) {
        ((IndexedDbaseFileReader)dbf).goTo(record.number);
        row=dbf.readRow();
      }
 else {
        row=null;
      }
      featureAvailable=true;
    }
    return featureAvailable;
  }
 else {
    return super.hasNext();
  }
}
