{
  if (writeBuffer == null)   return;
  writeBuffer.flip();
  int written=0;
  while (writeBuffer.remaining() > 0) {
    written+=currentChannel.write(writeBuffer,position);
  }
  position+=written;
  writeBuffer.flip().limit(writeBuffer.capacity());
}
