{
  StyleFactory sf=CommonFactoryFinder.getStyleFactory();
  FilterFactory ff=CommonFactoryFinder.getFilterFactory();
  StyledLayerDescriptor sld=sf.createStyledLayerDescriptor();
  UserLayer layer=sf.createUserLayer();
  sld.layers().add(layer);
  Style style=sf.createStyle();
  layer.userStyles().add(style);
  FeatureTypeStyle featureStyle=sf.createFeatureTypeStyle();
  style.featureTypeStyles().add(featureStyle);
  Rule rule=sf.createRule();
  featureStyle.rules().add(rule);
  LabelPlacement place=sf.createPointPlacement(sf.createAnchorPoint(ff.literal(0.75),ff.literal(0.25)),sf.createDisplacement(ff.literal(10),ff.literal(15)),ff.literal(90));
  TextSymbolizer2 text=(TextSymbolizer2)sf.textSymbolizer(null,ff.property("geom"),null,null,ff.property("name"),null,place,null,null);
  rule.symbolizers().add(text);
  StringWriter out=new StringWriter();
  Ysld.encode(sld,out);
  System.out.println(out.toString());
  YamlMap yaml=new YamlMap(new Yaml().load(out.toString()));
  assertThat(yaml.lookupY("feature-styles/0/rules/0/symbolizers/0/text"),yHasEntry("placement",equalTo("point")));
  assertThat(yaml.lookupY("feature-styles/0/rules/0/symbolizers/0/text"),yHasEntry("displacement",yTuple(numEqualTo(10),numEqualTo(15))));
  assertThat(yaml.lookupY("feature-styles/0/rules/0/symbolizers/0/text"),yHasEntry("anchor",yTuple(numEqualTo(0.75,EPSILON),numEqualTo(0.25,EPSILON))));
  assertThat(yaml.lookupY("feature-styles/0/rules/0/symbolizers/0/text"),yHasEntry("rotation",equalTo(90)));
  assertThat(kvpLine(out.toString(),"displacement"),equalTo("[10, 15]"));
}
