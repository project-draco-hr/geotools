{
  StyleFactory styleFactory=CommonFactoryFinder.getStyleFactory();
  FilterFactory filterFactory=CommonFactoryFinder.getFilterFactory();
  StyledLayerDescriptor sld=styleFactory.createStyledLayerDescriptor();
  UserLayer layer=styleFactory.createUserLayer();
  sld.layers().add(layer);
  Style style=styleFactory.createStyle();
  layer.userStyles().add(style);
  Rule rule=styleFactory.createRule();
  style.featureTypeStyles().add(styleFactory.createFeatureTypeStyle());
  style.featureTypeStyles().get(0).rules().add(rule);
  Function func=filterFactory.function("strEndsWith",filterFactory.property("foo"),filterFactory.literal("bar"));
  rule.setFilter(filterFactory.equal(func,filterFactory.literal(true),false));
  StringWriter out=new StringWriter();
  Ysld.encode(sld,out);
  YamlMap obj=new YamlMap(new Yaml().load(out.toString()));
  String filter=obj.seq("feature-styles").map(0).seq("rules").map(0).str("filter");
  assertEquals("${strEndsWith(foo,'bar') = 'true'}",filter);
}
