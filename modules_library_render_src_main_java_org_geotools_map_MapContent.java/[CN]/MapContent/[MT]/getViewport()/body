{
  if (viewport == null) {
    ReferencedEnvelope maxBounds=getMaxBounds();
    if (maxBounds == null || maxBounds.isEmpty()) {
      viewport=new MapViewport();
    }
 else {
      viewport=new MapViewport(maxBounds);
    }
  }
  return viewport;
}
