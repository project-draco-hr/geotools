{
  if (mapListeners == null || mapListeners.isEmpty()) {
    return;
  }
  if (layerListener == null) {
    layerListener=new MapLayerListener(){
      public void layerShown(      MapLayerEvent event){
        Layer layer=(Layer)event.getSource();
        int index=layers().indexOf(layer);
        fireLayerEvent(layer,index,event);
      }
      public void layerSelected(      MapLayerEvent event){
        Layer layer=(Layer)event.getSource();
        int index=layers().indexOf(layer);
        fireLayerEvent(layer,index,event);
      }
      public void layerHidden(      MapLayerEvent event){
        Layer layer=(Layer)event.getSource();
        int index=layers().indexOf(layer);
        fireLayerEvent(layer,index,event);
      }
      public void layerDeselected(      MapLayerEvent event){
        Layer layer=(Layer)event.getSource();
        int index=layers().indexOf(layer);
        fireLayerEvent(layer,index,event);
      }
      public void layerChanged(      MapLayerEvent event){
        Layer layer=(Layer)event.getSource();
        int index=layers().indexOf(layer);
        fireLayerEvent(layer,index,event);
      }
    }
;
  }
  if (listen) {
    for (    Layer layer : layers()) {
      layer.addMapLayerListener(layerListener);
    }
  }
 else {
    for (    Layer layer : layers()) {
      layer.removeMapLayerListener(layerListener);
    }
  }
}
