{
  if (viewport != null && viewport.isEditable() && !viewport.isExplicitCoordinateReferenceSystem()) {
    for (    Layer layer : layerList) {
      ReferencedEnvelope bounds=layer.getBounds();
      if (bounds != null) {
        CoordinateReferenceSystem crs=bounds.getCoordinateReferenceSystem();
        if (crs != null) {
          viewport.setCoordinateReferenceSystem(crs);
          return;
        }
      }
    }
  }
}
