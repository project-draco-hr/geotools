{
  Normalize normalize=new Normalize();
  normalize.setAlgorithm(filterFactory.literal("ClipToMinimumMaximum"));
  Map<String,Expression> params=normalize.getParameters();
  assertNotNull("Null parameters returned by Normalize",params);
  normalize.addParameter("min",filterFactory.literal(45.9));
  params=normalize.getParameters();
  assertEquals("Wrong number of parameters returned",1,params.size());
  normalize.addParameter("max",filterFactory.function("env",filterFactory.literal("arg1"),filterFactory.literal("arg2")));
  params=normalize.getParameters();
  Expression max=params.get("max");
  assertEquals("mangled the function in normalize","env([arg1], [arg2])",max.toString());
}
