{
  SimpleFeatureTypeBuilder tb=new SimpleFeatureTypeBuilder();
  tb.setName("test");
  tb.setCRS(null);
  tb.add("g1",Point.class);
  tb.add("g2",Point.class);
  tb.setDefaultGeometry("g1");
  SimpleFeatureType type=tb.buildFeatureType();
  SimpleFeatureBuilder b=new SimpleFeatureBuilder(type);
  b.set("g1",null);
  Point p=new GeometryFactory().createPoint(new Coordinate(0,0));
  b.set("g2",p);
  SimpleFeature feature=b.buildFeature(null);
  assertNull(feature.getDefaultGeometry());
  assertEquals(p,SimpleFeaturePropertyAccessorFactory.DEFAULT_GEOMETRY_ACCESS.get(feature,"",Geometry.class));
}
