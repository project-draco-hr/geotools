{
  Iterator itr=m_edge.getInRelated();
  OptDirectedEdge de=(OptDirectedEdge)itr.next();
  assertTrue(de == m_inEdge);
  assertTrue(!itr.hasNext());
  addSame();
  itr=m_edge.getInRelated();
  de=(OptDirectedEdge)itr.next();
  assertTrue(de == m_inEdge);
  assertTrue(!itr.hasNext());
  addSame2();
  itr=m_edge.getInRelated();
  de=(OptDirectedEdge)itr.next();
  assertTrue(de == m_inEdge);
  assertTrue(!itr.hasNext());
  addOpp();
  itr=m_edge.getInRelated();
  de=(OptDirectedEdge)itr.next();
  assertTrue(de == m_inEdge || de == m_opp);
  de=(OptDirectedEdge)itr.next();
  assertTrue(de == m_inEdge || de == m_opp);
  assertTrue(!itr.hasNext());
  addOpp2();
  itr=m_edge.getInRelated();
  de=(OptDirectedEdge)itr.next();
  assertTrue(de == m_inEdge || de == m_opp || de == m_opp2);
  de=(OptDirectedEdge)itr.next();
  assertTrue(de == m_inEdge || de == m_opp || de == m_opp2);
  de=(OptDirectedEdge)itr.next();
  assertTrue(de == m_inEdge || de == m_opp || de == m_opp2);
  assertTrue(!itr.hasNext());
  addLoops();
  m_edge.getInNode().addIn(m_inloop);
  m_edge.getInNode().addOut(m_inloop);
  itr=m_edge.getInRelated();
  de=(OptDirectedEdge)itr.next();
  assertTrue(de == m_inEdge || de == m_inloop);
  de=(OptDirectedEdge)itr.next();
  assertTrue(de == m_inEdge || de == m_inloop);
  assertTrue(!itr.hasNext());
}
