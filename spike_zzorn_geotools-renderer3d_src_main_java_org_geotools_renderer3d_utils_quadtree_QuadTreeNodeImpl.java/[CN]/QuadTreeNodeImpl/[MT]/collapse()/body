{
  checkNodeIsAttached();
  if (myExpanded) {
    myExpanded=false;
    if (myChildren != null) {
      for (int i=0; i < NUMBER_OF_SUBNODES; i++) {
        final QuadTreeNode<N> child=myChildren[i];
        if (child != null) {
          child.setExpanded(false);
          myQuadTree.releaseQuadTreeNode(child);
        }
        myChildren[i]=null;
      }
    }
    myChildren=null;
    for (    NodeListener<N> nodeListener : myNodeListeners) {
      nodeListener.onCollapsed(this);
    }
  }
}
