{
  DirectPosition2D pos=ev.getWorldPos();
  createReporter();
  report(pos);
  MapContent content=getMapPane().getMapContent();
  final int nlayers=content.layers().size();
  int n=0;
  for (  Layer layer : content.layers()) {
    if (layer.isSelected()) {
      InfoToolHelper helper=null;
      String layerName=layer.getTitle();
      if (layerName == null || layerName.length() == 0) {
        layerName=layer.getFeatureSource().getName().getLocalPart();
      }
      if (layerName == null || layerName.length() == 0) {
        layerName=layer.getFeatureSource().getSchema().getName().getLocalPart();
      }
      helper=helperTable.get(layer);
      if (helper == null) {
        helper=InfoToolHelperLookup.getHelper(layer);
        if (helper == null) {
          LOGGER.log(Level.WARNING,"InfoTool cannot query {0}",layer.getClass().getName());
          return;
        }
        helper.setMapContent(content);
        helper.setLayer(layer);
      }
      try {
        InfoToolResult result=helper.getInfo(pos);
        reporter.append(layerName + "\n");
        reporter.append(result.toString(),4);
        if (++n < nlayers) {
          reporter.append("\n");
        }
      }
 catch (      Exception ex) {
        LOGGER.log(Level.WARNING,"Unable to query layer {0}",layerName);
      }
    }
  }
  reporter.separator('-');
  reporter.append("\n");
}
