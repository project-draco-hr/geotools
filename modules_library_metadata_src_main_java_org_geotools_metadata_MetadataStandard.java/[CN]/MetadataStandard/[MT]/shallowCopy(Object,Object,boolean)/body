{
  ensureNonNull("target",target);
  final PropertyAccessor accessor=getAccessor(target.getClass());
  if (!accessor.type.isInstance(source)) {
    ensureNonNull("source",source);
    throw new ClassCastException(Errors.format(ErrorKeys.ILLEGAL_CLASS_$2,source.getClass(),accessor.type));
  }
  if (!accessor.shallowCopy(source,target,skipNulls)) {
    throw new UnmodifiableMetadataException(Errors.format(ErrorKeys.UNMODIFIABLE_METADATA));
  }
}
