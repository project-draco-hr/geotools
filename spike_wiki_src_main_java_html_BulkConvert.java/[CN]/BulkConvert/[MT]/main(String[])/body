{
  if (args.length == 1 && "?".equals(args[0])) {
    System.out.println(" Usage: java html.BulkConvert [index.html] [wiki directory]");
    System.out.println();
    System.out.println("Where:");
    System.out.println("  index.html Where you have unzipped the confluence html export");
    System.out.println("  wiki directory location where you would like the convertred files saved");
    System.out.println();
    System.out.println("If not provided the appication will prompt you for the above information");
    System.exit(0);
  }
  File indexFile=args.length > 0 ? new File(args[0]) : null;
  File wikiDir=args.length > 1 ? new File(args[1]) : null;
  if (indexFile != null && indexFile.isDirectory()) {
    indexFile=new File(indexFile,"index.html");
  }
  if (indexFile == null || !indexFile.exists()) {
    File cd=new File(".");
    JFileChooser dialog=new JFileChooser(cd);
    dialog.setFileFilter(new IndexFileFilter());
    dialog.setDialogTitle("Locate Confluence wiki html export");
    int open=dialog.showDialog(null,"Convert");
    if (open == JFileChooser.CANCEL_OPTION) {
      System.out.println("Conversion canceled");
      System.exit(-1);
    }
    indexFile=dialog.getSelectedFile();
  }
  if (indexFile == null || !indexFile.exists() || indexFile.isDirectory()) {
    System.out.println("File index.html to use for conversion not provided: '" + indexFile + "'");
    System.exit(-1);
  }
  File htmlDirectory=null;
  try {
    htmlDirectory=indexFile.getParentFile().getCanonicalFile();
  }
 catch (  IOException eek) {
    System.out.println("Coudl not sort parent of " + indexFile + ":"+ eek);
    System.exit(-1);
  }
  if (wikiDir == null) {
    JFileChooser dialog=new JFileChooser(htmlDirectory.getParentFile());
    dialog.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    dialog.setDialogTitle("Target Directory for textile files");
    int open=dialog.showDialog(null,"Export");
    if (open == JFileChooser.CANCEL_OPTION) {
      System.out.println("Canceled canceled");
      System.exit(-1);
    }
    wikiDir=dialog.getSelectedFile();
  }
  if (wikiDir == null || !wikiDir.isDirectory() || !wikiDir.exists()) {
    System.out.println("Taget directory for textile files not provided: '" + wikiDir + "'");
    System.exit(-1);
  }
  BulkConvert bulk=new BulkConvert(htmlDirectory,wikiDir);
  bulk.convert();
}
