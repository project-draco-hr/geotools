{
  GeometryFactory gf=new GeometryFactory();
  Geometry[] g=new Geometry[4];
  g[0]=gf.createPoint(new Coordinate(0,0));
  g[1]=gf.createPoint(new Coordinate(0,10));
  g[2]=gf.createPoint(new Coordinate(10,0));
  g[3]=gf.createPoint(new Coordinate(10,10));
  GeometryCollection gc=gf.createGeometryCollection(g);
  SimpleFeatureTypeBuilder tb=new SimpleFeatureTypeBuilder();
  tb.setName("bounds");
  tb.setCRS(null);
  tb.add("p1",Point.class);
  tb.add("p2",Point.class);
  tb.add("p3",Point.class);
  tb.add("p4",Point.class);
  SimpleFeatureType t=tb.buildFeatureType();
  SimpleFeature f=SimpleFeatureBuilder.build(t,g,null);
  assertEquals(gc.getEnvelopeInternal(),f.getBounds());
  g[1].getCoordinate().y=20;
  g[2].getCoordinate().x=20;
  f.setAttribute(1,g[1]);
  f.setAttribute(2,g[2]);
  gc=gf.createGeometryCollection(g);
  assertEquals(gc.getEnvelopeInternal(),f.getBounds());
}
