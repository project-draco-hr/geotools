{
  Map<String,SimpleFeature> result=new HashMap<String,SimpleFeature>();
  SimpleFeatureCollection fc=store.getFeatureSource(query.getTypeName()).getFeatures(query);
  SimpleFeatureIterator fi=null;
  try {
    fi=fc.features();
    while (fi.hasNext()) {
      SimpleFeature f=fi.next();
      result.put(f.getID(),f);
    }
  }
  finally {
    if (fi != null) {
      fi.close();
    }
  }
  return result;
}
