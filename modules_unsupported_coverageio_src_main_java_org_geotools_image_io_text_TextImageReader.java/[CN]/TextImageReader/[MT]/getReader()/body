{
  if (reader == null) {
    final Object input=getInput();
    if (input instanceof BufferedReader) {
      reader=(BufferedReader)input;
      closeOnReset=null;
    }
 else     if (input instanceof Reader) {
      reader=new LineReader((Reader)input);
      closeOnReset=null;
    }
 else {
      final InputStream stream=getInputStream();
      reader=new LineReader(getInputStreamReader(stream));
      if (closeOnReset == stream) {
        closeOnReset=reader;
      }
    }
  }
  return reader;
}
