{
  SimpleFeatureCollection collection=features;
  Envelope bounds=new Envelope();
  SimpleFeatureIterator features=collection.features();
  try {
    while (features.hasNext()) {
      SimpleFeature feature=features.next();
      bounds.expandToInclude(new ReferencedEnvelope(feature.getBounds()));
    }
  }
  finally {
    features.close();
  }
  assertFalse(bounds.isNull());
}
