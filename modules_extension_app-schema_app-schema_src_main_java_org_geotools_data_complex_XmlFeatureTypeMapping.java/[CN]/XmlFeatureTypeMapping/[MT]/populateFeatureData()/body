{
  List<AttributeMapping> attMap=getAttributeMappings();
  if (attOrderedTypeList == null) {
    initialiseAttributeLists(attMap);
  }
  String xpath=rootAttribute.getInstanceXpath() == null ? itemXpath : itemXpath + XPATH_SEPARATOR + rootAttribute.getInstanceXpath();
  elements.put(rootAttribute.getLabel(),xpath,null);
  Expression idExpression=rootAttribute.getIdentifierExpression();
  if (!idExpression.equals(Expression.NIL)) {
    Expression id;
    if (!(idExpression instanceof Function) && rootAttribute.getInstanceXpath() != null) {
      id=ff.property(rootAttribute.getInstanceXpath() + XPATH_SEPARATOR + idExpression);
    }
 else {
      id=idExpression;
    }
    mapping.put("@gml:id",id);
  }
  Iterator<AttributeMapping> it=attOrderedTypeList.iterator();
  addComplexAttributes(elements,it);
  addSetterAttributes(elements);
  index++;
  removeAllRelativePaths();
}
