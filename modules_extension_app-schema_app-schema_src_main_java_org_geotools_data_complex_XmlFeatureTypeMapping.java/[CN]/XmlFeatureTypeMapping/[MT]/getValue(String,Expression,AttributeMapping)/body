{
  Expression value=null;
  if (node instanceof Function) {
    Function func=(Function)node;
    Expression exp=getAsXpathExpression(func,mapping);
    if (exp != null) {
      value=exp;
    }
 else {
      value=func;
    }
  }
 else   if (node instanceof LiteralExpressionImpl) {
    value=node;
  }
 else {
    String expressionValue=node.toString();
    if (xpathPrefix.length() > 0) {
      value=ff.property(xpathPrefix + XPATH_SEPARATOR + expressionValue);
    }
 else {
      value=node;
    }
  }
  return value;
}
