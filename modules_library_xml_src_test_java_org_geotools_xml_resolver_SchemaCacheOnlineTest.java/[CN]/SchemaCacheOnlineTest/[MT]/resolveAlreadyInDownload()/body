{
  File cacheDirectory=DataUtilities.urlToFile(SchemaCacheTest.class.getResource("/test-data/cache"));
  SchemaCache cache=new SchemaCache(cacheDirectory,true);
  String resolvedLocation=cache.resolveLocation("http://www.geosciml.org/geosciml/2.0/xsd/geosciml.xsd");
  Assert.assertTrue(resolvedLocation.startsWith("file:"));
  Assert.assertTrue(resolvedLocation.endsWith("geosciml.xsd"));
  Assert.assertTrue(resolvedLocation.startsWith(cacheDirectory.getCanonicalFile().toURI().toString()));
  Assert.assertTrue(DataUtilities.urlToFile((new URI(resolvedLocation)).toURL()).exists());
  SchemaCache.locationsInDownload.add("http://www.geosciml.org/geosciml/2.0/xsd/geosciml.xsd");
  resolvedLocation=cache.resolveLocation("http://www.geosciml.org/geosciml/2.0/xsd/geosciml.xsd");
  Assert.assertTrue(resolvedLocation.startsWith("file:"));
  Assert.assertTrue(resolvedLocation.endsWith("geosciml.xsd"));
  Assert.assertFalse(resolvedLocation.startsWith(cacheDirectory.getCanonicalFile().toURI().toString()));
  Assert.assertTrue(DataUtilities.urlToFile((new URI(resolvedLocation)).toURL()).exists());
}
