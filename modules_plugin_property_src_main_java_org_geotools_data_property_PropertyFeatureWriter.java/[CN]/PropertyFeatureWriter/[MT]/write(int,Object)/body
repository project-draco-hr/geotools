{
  if (writer == null) {
    throw new IOException("Writer has been closed");
  }
  writer.write(position == 0 ? "=" : "|");
  if (attribute == null) {
    writer.write("<null>");
  }
 else   if (attribute instanceof String) {
    String txt=(String)attribute;
    txt=txt.replace("\n","\\n");
    txt=txt.replace("\r","\\r");
    writer.write(txt);
  }
 else   if (attribute instanceof Geometry) {
    Geometry geometry=(Geometry)attribute;
    wktWriter.write(geometry,writer);
  }
 else {
    String txt=Converters.convert(attribute,String.class);
    if (txt == null) {
      txt=attribute.toString();
    }
    writer.write(txt);
  }
}
