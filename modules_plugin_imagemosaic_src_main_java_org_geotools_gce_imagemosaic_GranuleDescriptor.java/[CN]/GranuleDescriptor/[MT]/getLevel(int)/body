{
  ImageInputStream inStream=null;
  ImageReader reader=null;
  try {
    inStream=Utils.getInputStream(granuleUrl);
    if (inStream == null)     throw new IllegalArgumentException("Unable to create an inputstream for the granuleurl:" + (granuleUrl != null ? granuleUrl : "null"));
    if (cachedReaderSPI == null) {
      reader=ImageIOExt.getImageioReader(inStream);
      if (reader != null)       cachedReaderSPI=reader.getOriginatingProvider();
    }
 else     reader=cachedReaderSPI.createReaderInstance();
    if (reader == null)     throw new IllegalArgumentException("Unable to get an ImageReader for the provided file " + granuleUrl.toString());
    return getLevel(index,reader,inStream);
  }
 catch (  IllegalStateException e) {
    try {
      if (inStream != null)       inStream.close();
    }
 catch (    Throwable ee) {
    }
 finally {
      if (reader != null)       reader.dispose();
    }
    throw new IllegalArgumentException(e);
  }
catch (  IOException e) {
    try {
      if (inStream != null)       inStream.close();
    }
 catch (    Throwable ee) {
    }
 finally {
      if (reader != null)       reader.dispose();
    }
    throw new IllegalArgumentException(e);
  }
}
