{
  if (reader == null)   throw new NullPointerException("Null reader passed to the internal GranuleOverviewLevelDescriptor method");
  if (inStream == null)   throw new NullPointerException("Null stream passed to the internal GranuleOverviewLevelDescriptor method");
synchronized (granuleLevels) {
    if (granuleLevels.containsKey(Integer.valueOf(index)))     return granuleLevels.get(Integer.valueOf(index));
 else {
      try {
        final Rectangle levelDimension=Utils.getDimension(index,inStream,reader);
        final GranuleOverviewLevelDescriptor baseLevel=granuleLevels.get(0);
        final double scaleX=baseLevel.width / (1.0 * levelDimension.width);
        final double scaleY=baseLevel.height / (1.0 * levelDimension.height);
        final GranuleOverviewLevelDescriptor newLevel=new GranuleOverviewLevelDescriptor(scaleX,scaleY,levelDimension.width,levelDimension.height);
        this.granuleLevels.put(Integer.valueOf(index),newLevel);
        return newLevel;
      }
 catch (      IllegalStateException e) {
        throw new IllegalArgumentException(e);
      }
catch (      IOException e) {
        throw new IllegalArgumentException(e);
      }
    }
  }
}
