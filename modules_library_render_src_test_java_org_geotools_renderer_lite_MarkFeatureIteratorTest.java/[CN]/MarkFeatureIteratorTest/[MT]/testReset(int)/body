{
  DefaultProgressListener listener=new DefaultProgressListener();
  try (MarkFeatureIterator iterator=MarkFeatureIterator.create(zroads.getFeatures(),limit,listener)){
    if (limit >= zroads.getCount(Query.ALL)) {
      assertTrue(iterator instanceof MemoryMarkFeatureIterator);
    }
 else {
      assertTrue(iterator instanceof DiskMarkFeatureIterator);
    }
    iterator.mark();
    assertThreeFeatures(iterator);
    iterator.reset();
    assertThreeFeatures(iterator);
  }
 }
