{
  DefaultProgressListener listener=new DefaultProgressListener();
  try (MarkFeatureIterator iterator=MarkFeatureIterator.create(zroads.getFeatures(),limit,listener)){
    if (limit >= zroads.getCount(Query.ALL)) {
      assertThat(iterator,instanceOf(MemoryMarkFeatureIterator.class));
    }
 else {
      assertThat(iterator,instanceOf(DiskMarkFeatureIterator.class));
    }
    iterator.mark();
    assertThreeFeatures(iterator);
    iterator.reset();
    assertThreeFeatures(iterator);
  }
 }
