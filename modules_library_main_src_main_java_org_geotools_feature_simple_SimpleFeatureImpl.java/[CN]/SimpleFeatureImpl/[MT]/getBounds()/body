{
  Envelope bounds;
  if (featureType.getCoordinateReferenceSystem() != null && featureType.getCoordinateReferenceSystem().getCoordinateSystem().getDimension() == 3) {
    bounds=new ReferencedEnvelope3D(featureType.getCoordinateReferenceSystem());
  }
 else {
    bounds=new ReferencedEnvelope(featureType.getCoordinateReferenceSystem());
  }
  for (  Object o : values) {
    if (o instanceof Geometry) {
      Geometry g=(Geometry)o;
      if (bounds.isNull()) {
        bounds.init(g.getEnvelopeInternal());
      }
 else {
        bounds.expandToInclude(g.getEnvelopeInternal());
      }
    }
  }
  return (BoundingBox)bounds;
}
