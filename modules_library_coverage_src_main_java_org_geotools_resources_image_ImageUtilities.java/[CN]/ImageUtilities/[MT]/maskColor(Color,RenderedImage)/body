{
  Utilities.ensureNonNull("image",image);
  if (transparentColor == null) {
    return image;
  }
  final ImageWorker w=new ImageWorker(image);
  if (image.getSampleModel() instanceof MultiPixelPackedSampleModel) {
    w.forceComponentColorModel();
  }
  return w.makeColorTransparent(transparentColor).getRenderedImage();
}
