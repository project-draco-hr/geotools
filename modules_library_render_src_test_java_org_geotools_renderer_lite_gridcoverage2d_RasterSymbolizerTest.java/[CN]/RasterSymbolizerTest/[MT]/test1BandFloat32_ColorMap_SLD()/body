{
  GridCoverage2D gc=CoverageFactoryFinder.getGridCoverageFactory(null).create("name",JAI.create("ImageRead",new File(TestData.url(this,"small_1band_Float32.tif").toURI())),new GeneralEnvelope(new double[]{-90,-180},new double[]{90,180}),new GridSampleDimension[]{new GridSampleDimension("test1BandByte_SLD")},null,null);
  java.net.URL surl=TestData.url(this,"1band_Float32_test2.sld");
  SLDParser stylereader=new SLDParser(sf,surl);
  StyledLayerDescriptor sld=stylereader.parseSLD();
  SubchainStyleVisitorCoverageProcessingAdapter rsh=new RasterSymbolizerHelper(gc,null);
  final UserLayer nl=(UserLayer)sld.getStyledLayers()[0];
  final Style style=nl.getUserStyles()[0];
  final FeatureTypeStyle fts=style.getFeatureTypeStyles()[0];
  final Rule rule=fts.getRules()[0];
  final RasterSymbolizer rs_1=(RasterSymbolizer)rule.getSymbolizers()[0];
  rsh.visit(rs_1);
  testRasterSymbolizerHelper(rsh);
  gc=CoverageFactoryFinder.getGridCoverageFactory(null).create("name",JAI.create("ImageRead",new File(TestData.url(this,"small_1band_Float32.tif").toURI())),new GeneralEnvelope(new double[]{-90,-180},new double[]{90,180}));
  rsh=new RasterSymbolizerHelper(gc,null);
  StyleBuilder sldBuilder=new StyleBuilder();
  rsh=new RasterSymbolizerHelper(gc,null);
  final RasterSymbolizer rsb_1=sldBuilder.createRasterSymbolizer();
  final ChannelSelection chSel=new ChannelSelectionImpl();
  final SelectedChannelType chTypeGray=new SelectedChannelTypeImpl();
  final ContrastEnhancement cntEnh=new ContrastEnhancementImpl();
  cntEnh.setMethod(ContrastMethod.HISTOGRAM);
  ;
  chTypeGray.setChannelName("1");
  chTypeGray.setContrastEnhancement(cntEnh);
  chSel.setGrayChannel(chTypeGray);
  rsb_1.setChannelSelection(chSel);
  rsb_1.setOpacity(sldBuilder.literalExpression(1.0));
  rsb_1.setOverlap(sldBuilder.literalExpression("AVERAGE"));
  final ColorMap cm=sldBuilder.createColorMap(new String[]{"category","category","category"},new double[]{0.1,50.0,200.0},new Color[]{new Color(255,0,0,255),new Color(0,255,0,40),new Color(0,0,255,125)},ColorMap.TYPE_RAMP);
  rsb_1.setColorMap(cm);
  rsh.visit(rsb_1);
  testRasterSymbolizerHelper(rsh);
}
