{
  FilterFactory2 ff=CommonFactoryFinder.getFilterFactory2(null);
  HashSet<FeatureId> set=new HashSet<FeatureId>();
  set.add(ff.featureId("FID.1"));
  set.add(ff.featureId("FID.2"));
  Filter filter=ff.id(set);
  StringWriter output=new StringWriter();
  XMLHandlerHints hints=new XMLHandlerHints();
  hints.put(XMLHandlerHints.FILTER_COMPLIANCE_STRICTNESS,XMLHandlerHints.VALUE_FILTER_COMPLIANCE_MEDIUM);
  DocumentWriter.writeFragment(filter,FilterSchema.getInstance(),output,hints);
  String string=output.toString().replaceAll("\\s","");
  if (TestData.isBaseJavaPlatform()) {
    assertEquals("<Filterxmlns=\"http://www.opengis.net/ogc\"xmlns:gml=\"http://www.opengis.net/gml\"><FeatureIdfid=\"FID.1\"/><FeatureIdfid=\"FID.2\"/></Filter>",string);
  }
  ByteArrayInputStream byteStream=new ByteArrayInputStream(output.toString().getBytes());
  Filter roundTrip=(Filter)DocumentFactory.getInstance(byteStream,null,Level.OFF);
  assertEquals(filter,roundTrip);
}
