{
  if (image.getMinX() == x && image.getMinY() == y && image.getWidth() == width && image.getHeight() == height) {
    return this;
  }
  RenderedImage source=image;
  if (image instanceof RenderedOp) {
    RenderedOp op=(RenderedOp)image;
    if ("Crop".equals(op.getOperationName()) || "GTCrop".equals(op.getOperationName())) {
      ParameterBlock paramBlock=op.getParameterBlock();
      source=paramBlock.getRenderedSource(0);
      float sx=paramBlock.getFloatParameter(0);
      float sy=paramBlock.getFloatParameter(1);
      float sWidth=paramBlock.getFloatParameter(2);
      float sHeight=paramBlock.getFloatParameter(3);
      if (sx > 0) {
        x=sx + x;
      }
      if (sy > 0) {
        y=sy + y;
      }
    }
  }
  image=GTCropDescriptor.create(source,x,y,width,height,commonHints);
  return this;
}
