{
  File file=temporaryFolder.newFile("feature.pbf");
  SimpleFeatureType featureType=DataUtilities.createType("test2","geom:Point,name:String,id:int");
  SimpleFeatureBuilder featureBuilder=new SimpleFeatureBuilder(featureType);
  WKTReader wkt=new WKTReader();
  featureBuilder.set("geom",wkt.read("POINT (1 2)"));
  featureBuilder.set("name","Name");
  featureBuilder.set("id",5);
  SimpleFeature feature=featureBuilder.buildFeature("point.1");
  GeobufFeature geobufFeature=new GeobufFeature(new GeobufGeometry());
  OutputStream out=new FileOutputStream(file);
  geobufFeature.encode(feature,out);
  out.close();
  InputStream inputStream=new FileInputStream(file);
  SimpleFeature decodedFeature=geobufFeature.decode(inputStream);
  inputStream.close();
  assertEquals(feature.getDefaultGeometry().toString(),decodedFeature.getDefaultGeometry().toString());
  assertEquals(feature.getAttribute("name"),decodedFeature.getAttribute("name"));
  assertEquals(feature.getAttribute("id"),decodedFeature.getAttribute("id"));
}
