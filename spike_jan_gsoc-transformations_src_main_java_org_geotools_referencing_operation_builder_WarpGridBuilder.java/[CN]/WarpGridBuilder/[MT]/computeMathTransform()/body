{
  gridParameters.setWarpPositions(getWarpPositions());
  WarpGridTransform2D wt=(WarpGridTransform2D)(new WarpGridTransform2D.Provider()).createMathTransform(gridParameters.getWarpGridParameters());
  wt.setWorldtoGridTransform(this.worldToGrid);
  MathTransform trans=null;
  try {
    trans=ConcatenatedTransform.create(ConcatenatedTransform.create(this.worldToGrid,wt),this.worldToGrid.inverse());
  }
 catch (  TransformException e) {
    throw new FactoryException(Errors.format(ErrorKeys.NONINVERTIBLE_TRANSFORM),e);
  }
  return wt;
}
