{
  final TerrainBlock terrainBlock=node.getNodeData();
  if (terrainBlock != null) {
    final double size=node.getBounds().getSizeAveraged();
    final double squaredSize=size * size;
    final double squaredDistance=terrainBlock.getCenter().distanceSquared(currentCameraPosition);
    final double comparsionFactor=squaredSize / squaredDistance;
    if (comparsionFactor > EXPANSION_THRESHOLD && size > MINIMUM_NODE_SIZE_M) {
      node.setExpanded(true);
    }
    if (comparsionFactor < COLLAPSING_THRESHOLD) {
      node.setExpanded(false);
    }
    final int num=node.getNumberOfChildren();
    for (int i=0; i < num; i++) {
      final QuadTreeNode<TerrainBlock> child=node.getChild(i);
      if (child != null) {
        checkNode(child,currentCameraPosition);
      }
    }
  }
}
