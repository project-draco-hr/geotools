{
  URI locationUri;
  try {
    locationUri=new URI(location);
  }
 catch (  URISyntaxException e) {
    throw new RuntimeException(e);
  }
  if (!locationUri.isAbsolute()) {
    if (context == null) {
      throw new RuntimeException("Could not determine absolute schema location for " + location + " because context schema location is unknown");
    }
    String originalContext=resolvedLocationToOriginalLocationMap.get(context);
    if (originalContext == null) {
      originalContext=context;
    }
    URI contextUri;
    try {
      contextUri=new URI(originalContext);
    }
 catch (    URISyntaxException e) {
      throw new RuntimeException(e);
    }
    locationUri=contextUri.resolve(locationUri);
  }
  return resolve(locationUri.toString());
}
