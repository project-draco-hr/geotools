{
  if (text == null) {
    return;
  }
  AttributesImpl atts=new AttributesImpl();
  Unit<Length> uom=text.getUnitOfMeasure();
  if (uom != null)   atts.addAttribute("","uom","uom","",UomOgcMapping.get(uom).getSEString());
  start("TextSymbolizer",atts);
  encodeGeometryExpression(text.getGeometry());
  if (text.getLabel() != null) {
    start("Label");
    labelContent(text.getLabel());
    end("Label");
  }
  if ((text.fonts() != null) && (!text.fonts().isEmpty())) {
    List<Font> fonts=text.fonts();
    if (areFontsUniform(fonts)) {
      start("Font");
      Font initialFont=fonts.get(0);
      for (      Font font : fonts) {
        encodeCssParam("font-family",font.getFamily().get(0));
      }
      encodeCssParam("font-size",initialFont.getSize());
      encodeCssParam("font-style",initialFont.getStyle());
      encodeCssParam("font-weight",initialFont.getWeight());
      end("Font");
    }
 else {
      for (      Font font : fonts) {
        start("Font");
        encodeCssParam("font-family",font.getFamily().get(0));
        encodeCssParam("font-size",font.getSize());
        encodeCssParam("font-style",font.getStyle());
        encodeCssParam("font-weight",font.getWeight());
        end("Font");
      }
    }
  }
  if (text.getLabelPlacement() != null) {
    text.getLabelPlacement().accept(this);
  }
  if (text.getHalo() != null) {
    text.getHalo().accept(this);
  }
  if (text.getFill() != null) {
    text.getFill().accept(this);
  }
  if (text instanceof TextSymbolizer2) {
    TextSymbolizer2 text2=(TextSymbolizer2)text;
    if (text2.getGraphic() != null)     visit(text2.getGraphic());
    if (text2.getSnippet() != null)     element("Snippet",text2.getSnippet());
    if (text2.getFeatureDescription() != null)     element("FeatureDescription",text2.getFeatureDescription());
    OtherText otherText=text2.getOtherText();
    if (otherText != null) {
      AttributesImpl otherTextAtts=new AttributesImpl();
      otherTextAtts.addAttribute("","target","target","",otherText.getTarget());
      element("OtherText",otherText.getText(),null,otherTextAtts);
    }
  }
  if (text.getPriority() != null) {
    element("Priority",text.getPriority());
  }
  if (text.getOptions() != null) {
    encodeVendorOptions(text.getOptions());
  }
  end("TextSymbolizer");
}
