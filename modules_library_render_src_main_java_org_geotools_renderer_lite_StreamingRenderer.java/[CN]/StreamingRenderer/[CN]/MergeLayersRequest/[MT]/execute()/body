{
  if (graphics instanceof DelayedBackbufferGraphic) {
    ((DelayedBackbufferGraphic)graphics).init();
  }
  for (int t=0; t < fts_array.length; t++) {
    LiteFeatureTypeStyle currentLayer=fts_array[t];
    final Graphics2D ftsGraphics=currentLayer.graphics;
    if (ftsGraphics instanceof DelayedBackbufferGraphic && !(ftsGraphics == graphics)) {
      final BufferedImage image=((DelayedBackbufferGraphic)ftsGraphics).image;
      if (image != null) {
        if (currentLayer.composite == null) {
          graphics.setComposite(AlphaComposite.SrcOver);
        }
 else {
          graphics.setComposite(currentLayer.composite);
        }
        graphics.drawImage(image,0,0,null);
        ftsGraphics.dispose();
      }
    }
  }
}
