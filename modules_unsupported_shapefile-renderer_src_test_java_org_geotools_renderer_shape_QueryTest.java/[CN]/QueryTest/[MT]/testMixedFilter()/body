{
  FilterFactory2 ff=CommonFactoryFinder.getFilterFactory2(null);
  Intersects bbox=ff.intersects(ff.property("the_geom"),ff.literal(new ReferencedEnvelope(-4,-2,0,-3,null)));
  PropertyIsEqualTo idEqual=ff.equals(ff.property("ID"),ff.literal(1.0));
  PropertyIsEqualTo nameEqual=ff.equals(ff.property("NAME"),ff.literal("dave street"));
  And filter=ff.and(Arrays.asList(new org.opengis.filter.Filter[]{bbox,idEqual,nameEqual}));
  Query q=new DefaultQuery("theme1",filter);
  map.getLayer(0).setQuery(q);
  ShapefileRenderer renderer=new ShapefileRenderer(map);
  renderer.addRenderListener(new RenderListener(){
    public void featureRenderer(    SimpleFeature feature){
      assertEquals("theme1.1",feature.getID());
    }
    public void errorOccurred(    Exception e){
      throw new RuntimeException(e);
    }
  }
);
  TestUtilites.showRender("testFidFilter",renderer,1000,bounds,1);
}
