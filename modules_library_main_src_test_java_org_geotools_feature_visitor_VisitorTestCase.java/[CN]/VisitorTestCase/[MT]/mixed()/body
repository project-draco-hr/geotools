{
  int idx=1;
  for (  T value : values) {
    dataStore.addFeature(featureBuilder.buildFeature("f" + idx,new Object[]{value,idx}));
    ++idx;
    dataStore.addFeature(featureBuilder.buildFeature("f" + idx,new Object[]{null,idx}));
    ++idx;
  }
  FeatureCalc calc=createVisitor(0,featureType);
  getFeatureCollection().accepts(calc,null);
  Object value=calc.getResult().getValue();
  assertEquals(expectedValue,value);
  assertSame(expectedValue.getClass(),value.getClass());
}
