{
  if ((live != null)) {
    diff.modify(live.getID(),current);
    ReferencedEnvelope bounds=new ReferencedEnvelope((CoordinateReferenceSystem)null);
    bounds.include(live.getBounds());
    bounds.include(current.getBounds());
    fireNotification(FeatureEvent.FEATURES_CHANGED,bounds);
    live=null;
    current=null;
  }
 else   if ((live == null) && (current != null)) {
    diff.add(current.getID(),current);
    fireNotification(FeatureEvent.FEATURES_ADDED,ReferencedEnvelope.reference(current.getBounds()));
    current=null;
  }
 else {
    throw new IOException("No feature available to write");
  }
}
