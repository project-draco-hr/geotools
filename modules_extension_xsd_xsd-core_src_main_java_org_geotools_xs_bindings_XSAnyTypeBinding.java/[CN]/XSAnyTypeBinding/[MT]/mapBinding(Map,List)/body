{
  for (Iterator i=attributes.iterator(); i.hasNext(); ) {
    Node attribute=(Node)i.next();
    String name=attribute.getComponent().getName();
    Object value=attribute.getValue();
    if (map.containsKey(name)) {
      List values;
      Object obj=map.get(name);
      if (obj instanceof List) {
        values=(List)obj;
      }
 else {
        values=new ArrayList();
        values.add(obj);
        map.put(name,values);
      }
      values.add(value);
    }
 else {
      map.put(name,value);
    }
  }
}
