{
  AggregateFactoryImpl af=(AggregateFactoryImpl)c.getComponentInstanceOfType(AggregateFactory.class);
  PositionFactory pf=(PositionFactory)c.getComponentInstanceOfType(PositionFactory.class);
  DirectPosition dp1=pf.createDirectPosition(new double[]{10,30});
  DirectPosition dp2=pf.createDirectPosition(new double[]{70,15});
  DirectPosition dp3=pf.createDirectPosition(new double[]{45,5});
  DirectPosition dp4=pf.createDirectPosition(new double[]{10,35});
  Set<Point> points=new HashSet<Point>();
  points.add(new PointImpl(dp1));
  points.add(new PointImpl(dp2));
  points.add(new PointImpl(dp3));
  points.add(new PointImpl(dp4));
  MultiPoint mp=af.createMultiPoint(points);
  assertNotNull(mp);
  assertNotNull(mp.getEnvelope());
  assertEquals(mp.getCoordinateDimension(),2);
  assertEquals(mp.getElements().size(),4);
  assertEquals(mp.getElements(),points);
  assertEquals(mp.getEnvelope().getLowerCorner().getOrdinate(0),10.0);
  assertEquals(mp.getEnvelope().getLowerCorner().getOrdinate(1),5.0);
  assertEquals(mp.getEnvelope().getUpperCorner().getOrdinate(0),70.0);
  assertEquals(mp.getEnvelope().getUpperCorner().getOrdinate(1),35.0);
  assertTrue(mp.equals(new MultiPointImpl(mp.getCoordinateReferenceSystem(),points)));
}
