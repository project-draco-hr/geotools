{
  DefaultExpression left=(DefaultExpression)filter.getLeftValue();
  DefaultExpression right=(DefaultExpression)filter.getRightValue();
  String type=(String)comparisions.get(new Integer(filter.getFilterType()));
  if (!filter.isMatchingCase()) {
    if (filter.getFilterType() == Filter.COMPARE_EQUALS || filter.getFilterType() == Filter.COMPARE_NOT_EQUALS) {
      if (left.getType() == Expression.LITERAL_STRING || right.getType() == Expression.LITERAL_STRING) {
        try {
          out.write("lower(");
          left.accept(this);
          out.write(")");
          out.write(" " + type + " ");
          out.write("lower(");
          right.accept(this);
          out.write(")");
          return;
        }
 catch (        IOException e) {
          throw new RuntimeException("Error occurred writing filter",e);
        }
      }
    }
  }
  super.visit(filter);
}
