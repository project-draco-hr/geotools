{
  String mask=(String)SDO_RELATE_MASK_MAP.get(new Short(geomFilter.getFilterType()));
  AttributeExpression attExpr;
  LiteralExpression geomExpr;
  Expression left=geomFilter.getLeftGeometry();
  Expression right=geomFilter.getRightGeometry();
  if (left instanceof AttributeExpression && right instanceof LiteralExpression) {
    attExpr=(AttributeExpression)left;
    geomExpr=(LiteralExpression)right;
  }
 else   if (right instanceof AttributeExpression && left instanceof LiteralExpression) {
    attExpr=(AttributeExpression)right;
    geomExpr=(LiteralExpression)left;
  }
 else {
    String err="Oracle currently supports one geometry and one " + "attribute expr.  You gave: " + left + ", "+ right;
    throw new DataSourceException(err);
  }
  if (((attExpr != null) || (currentGeomColumnName != null)) && (geomExpr != null) && (mask != null)) {
    inGeomFilter=true;
    out.write("SDO_RELATE(");
    if (attExpr != null) {
      attExpr.accept(this);
    }
 else {
      out.write("\"" + currentGeomColumnName + "\"");
    }
    out.write(",");
    geomExpr.accept(this);
    if (geomFilter.getFilterType() == AbstractFilter.GEOMETRY_DISJOINT) {
      out.write(",'mask=" + mask + " querytype=WINDOW') <> 'TRUE' ");
    }
 else {
      out.write(",'mask=" + mask + " querytype=WINDOW') = 'TRUE' ");
    }
    inGeomFilter=false;
  }
 else {
    LOGGER.warning("Invalid filter. Cannot have a Geometry filter " + "with only one expression.");
  }
}
