{
  query=joinQuery(query);
  query=resolvePropertyNames(query);
  int count=getCountInternal(query);
  return count;
}
