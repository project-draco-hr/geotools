{
  int removed=catalog.removeGranules(new Query(typeName,filter));
  try {
    Query q=new Query(manager.getTypeName());
    q.setMaxFeatures(1);
    if (DataUtilities.count(catalog.getGranules(q)) > 0) {
      manager.initialize(true);
    }
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
  return removed;
}
