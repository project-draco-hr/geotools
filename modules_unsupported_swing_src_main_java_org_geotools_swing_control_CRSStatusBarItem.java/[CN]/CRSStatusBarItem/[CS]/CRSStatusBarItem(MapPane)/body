{
  super("CRS");
  if (mapPane == null) {
    throw new IllegalArgumentException("mapPane must not be null");
  }
  btn=new JButton(NO_CRS);
  btn.setBorder(BorderFactory.createEmptyBorder());
  btn.setFont(JMapStatusBar.getDefaultFont());
  btn.setToolTipText(TOOL_TIP);
  add(btn);
  displayCRS(mapPane.getMapContent().getCoordinateReferenceSystem());
  mapPane.addMapPaneListener(new MapPaneAdapter(){
    @Override public void onDisplayAreaChanged(    MapPaneEvent ev){
      ReferencedEnvelope env=(ReferencedEnvelope)ev.getData();
      displayCRS(env.getCoordinateReferenceSystem());
    }
  }
);
  final JPopupMenu menu=new CRSPopupMenu(mapPane);
  btn.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      menu.show(btn,0,0);
    }
  }
);
}
