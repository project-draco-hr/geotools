{
  long lastTime=lastTypeNameRequestTime;
  long now=System.currentTimeMillis();
  lastTypeNameRequestTime=now;
  if ((lastTime < (now - cacheTimeOut)) || (featureTypeMap.size() == 0)) {
    String[] newTypeNames=loadTypeNamesFromDatabase();
    HashMap newFeatureTypeMap=new HashMap();
    for (int i=0; i < newTypeNames.length; i++) {
      String typeName=newTypeNames[i];
      FeatureTypeInfo info=(FeatureTypeInfo)featureTypeMap.get(typeName);
      newFeatureTypeMap.put(typeName,info);
    }
    featureTypeMap=newFeatureTypeMap;
    return newTypeNames;
  }
 else {
    Set keys=featureTypeMap.keySet();
    return (String[])keys.toArray(new String[keys.size()]);
  }
}
