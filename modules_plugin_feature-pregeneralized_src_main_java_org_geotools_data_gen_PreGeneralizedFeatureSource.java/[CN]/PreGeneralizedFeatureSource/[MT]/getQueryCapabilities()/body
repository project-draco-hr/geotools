{
  if (queryCapabilities != null)   return queryCapabilities;
  queryCapabilities=new QueryCapabilities(){
    @Override public boolean isOffsetSupported(){
      try {
        if (!getBaseFeatureSource().getQueryCapabilities().isOffsetSupported())         return false;
        for (        Generalization di : info.getGeneralizations()) {
          SimpleFeatureSource fs=getFeatureSourceFor(di);
          if (!fs.getQueryCapabilities().isOffsetSupported())           return false;
        }
        return true;
      }
 catch (      IOException ex) {
        throw new RuntimeException(ex);
      }
    }
    @Override public boolean isReliableFIDSupported(){
      try {
        if (!getBaseFeatureSource().getQueryCapabilities().isReliableFIDSupported())         return false;
        for (        Generalization di : info.getGeneralizations()) {
          SimpleFeatureSource fs=getFeatureSourceFor(di);
          if (!fs.getQueryCapabilities().isReliableFIDSupported())           return false;
        }
        return true;
      }
 catch (      IOException ex) {
        throw new RuntimeException(ex);
      }
    }
    @Override public boolean supportsSorting(    SortBy[] arg0){
      try {
        if (!getBaseFeatureSource().getQueryCapabilities().supportsSorting(arg0))         return false;
        for (        Generalization di : info.getGeneralizations()) {
          SimpleFeatureSource fs=getFeatureSourceFor(di);
          if (!fs.getQueryCapabilities().supportsSorting(arg0))           return false;
        }
        return true;
      }
 catch (      IOException ex) {
        throw new RuntimeException(ex);
      }
    }
  }
;
  return queryCapabilities;
}
