{
  BasicSQLDialect dialect=(BasicSQLDialect)ds.getSQLDialect();
  List<Object> keyValues=getNextValues(cx,feature);
  for (int i=0; i < key.getColumns().size(); i++) {
    PrimaryKeyColumn col=key.getColumns().get(i);
    Object value=keyValues.get(i);
    if (value != NOT_SET_BEFORE_INSERT) {
      try {
        dialect.encodeValue(value,col.getType(),sql);
        sql.append(",");
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
  if (!isPostInsert()) {
    String fid=featureType.getTypeName() + "." + JDBCDataStore.encodeFID(keyValues);
    feature.getUserData().put("fid",fid);
  }
}
