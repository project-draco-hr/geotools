{
  final FeatureTypeMapping mapping=getMappingByElement(getName(targetQuery));
  final FeatureSource<FeatureType,Feature> mappedSource=mapping.getSource();
  Query unmappedQuery=unrollQuery(targetQuery,mapping);
  ((DefaultQuery)unmappedQuery).setMaxFeatures(targetQuery.getMaxFeatures());
  return mappedSource.getCount(unmappedQuery);
}
