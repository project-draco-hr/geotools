{
  JFileChooser dialog;
  Object format=this.parameter.metadata == null ? null : this.parameter.metadata.get(Parameter.EXT);
  if (format instanceof FileDataStoreFactorySpi) {
    dialog=new JFileDataStoreChooser((FileDataStoreFactorySpi)format);
  }
 else   if (format instanceof String) {
    dialog=new JFileDataStoreChooser((String)format);
  }
 else   if (format instanceof String[]) {
    dialog=new JFileDataStoreChooser((String[])format);
  }
 else   if (format instanceof List) {
    dialog=new JFileDataStoreChooser((List<String>)format);
  }
 else {
    dialog=new JFileChooser();
  }
  dialog.setSelectedFile(getValue());
  int returnVal=dialog.showOpenDialog(browse);
  if (returnVal == JFileChooser.APPROVE_OPTION) {
    File file=dialog.getSelectedFile();
    setValue(file);
  }
}
