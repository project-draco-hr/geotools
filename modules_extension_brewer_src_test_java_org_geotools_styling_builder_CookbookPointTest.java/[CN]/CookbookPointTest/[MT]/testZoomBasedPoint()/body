{
  Mark mark=(Mark)new MarkBuilder().name("circle").fill().color(Color.RED).buildRoot();
  FeatureTypeStyleBuilder fts=new FeatureTypeStyleBuilder();
  fts.rule().name("Large").max(160000000).point().graphic().size(12).mark().reset(mark);
  fts.rule().name("Medium").min(160000000).max(320000000).point().graphic().size(8).mark().reset(mark);
  fts.rule().name("Small").min(320000000).point().graphic().size(4).mark().reset(mark);
  Style style=fts.buildStyle();
  StyleCollector collector=new StyleCollector();
  style.accept(collector);
  assertEquals(1,collector.featureTypeStyles.size());
  assertEquals(3,collector.rules.size());
  assertEquals(3,collector.symbolizers.size());
  checkScaleBasedRule(collector.rules.get(0),"Large",0,160000000,12);
  checkScaleBasedRule(collector.rules.get(1),"Medium",160000000,320000000,8);
  checkScaleBasedRule(collector.rules.get(2),"Small",320000000,Double.POSITIVE_INFINITY,4);
}
