{
  getShell().setText("JFace File Explorer");
  SashForm sash_form=new SashForm(parent,SWT.HORIZONTAL | SWT.NULL);
  tv=new TreeViewer(sash_form);
  tv.setContentProvider(new FileTreeContentProvider());
  tv.setLabelProvider(new FileTreeLabelProvider());
  tv.setInput(new File("C:\\"));
  tv.addFilter(new AllowOnlyFoldersFilter());
  tbv=new TableViewer(sash_form,SWT.BORDER | SWT.FULL_SELECTION | SWT.MULTI);
  tbv.setContentProvider(new FileTableContentProvider());
  tbv.setLabelProvider(new FileTableLabelProvider());
  tbv.setSorter(new FileSorter());
  TableColumn column=new TableColumn(tbv.getTable(),SWT.LEFT);
  column.setText("Name");
  column.setWidth(200);
  column=new TableColumn(tbv.getTable(),SWT.RIGHT);
  column.setText("Size");
  column.setWidth(100);
  tbv.getTable().setHeaderVisible(true);
  tv.addSelectionChangedListener(new ISelectionChangedListener(){
    public void selectionChanged(    SelectionChangedEvent event){
      IStructuredSelection selection=(IStructuredSelection)event.getSelection();
      Object selected_file=selection.getFirstElement();
      tbv.setInput(selected_file);
    }
  }
);
  tbv.addSelectionChangedListener(new ISelectionChangedListener(){
    public void selectionChanged(    SelectionChangedEvent event){
      IStructuredSelection selection=(IStructuredSelection)event.getSelection();
      setStatus("Number of items selected is " + selection.size());
    }
  }
);
  tbv.addSelectionChangedListener(open_action);
  MenuManager menu_manager=new MenuManager();
  tbv.getTable().setMenu(menu_manager.createContextMenu(tbv.getTable()));
  menu_manager.add(exit_action);
  menu_manager.add(copy_action);
  menu_manager.add(open_action);
  return sash_form;
}
