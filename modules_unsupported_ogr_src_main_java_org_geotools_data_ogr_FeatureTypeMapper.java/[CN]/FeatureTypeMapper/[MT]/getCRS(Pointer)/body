{
  Pointer spatialReference=null;
  CoordinateReferenceSystem crs=null;
  try {
    spatialReference=OGR_L_GetSpatialRef(layer);
    if (spatialReference == null) {
      return null;
    }
    try {
      Pointer<Byte> code=OSRGetAuthorityCode(spatialReference,pointerToCString("EPSG"));
      if (code != null) {
        String fullCode="EPSG:" + code;
        crs=CRS.decode(fullCode);
      }
    }
 catch (    Exception e) {
    }
    if (crs == null) {
      try {
        Pointer<Pointer<Byte>> wktPtr=allocatePointer(Byte.class);
        OSRExportToWkt(spatialReference,wktPtr);
        String wkt=wktPtr.getPointer(Byte.class).getCString();
        crs=CRS.parseWKT(wkt);
      }
 catch (      Exception e) {
      }
    }
    return crs;
  }
  finally {
    OGRUtils.releaseSpatialReference(spatialReference);
  }
}
