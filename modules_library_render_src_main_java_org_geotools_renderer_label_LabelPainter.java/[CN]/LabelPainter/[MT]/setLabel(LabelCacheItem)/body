{
  this.labelItem=labelItem;
  TextStyle2D textStyle=labelItem.getTextStyle();
  textStyle.setLabel(labelItem.getLabel());
  labelBounds=null;
  lines=null;
  lines=splitter.layout(labelItem,graphics);
  double maxWidth=0;
  for (  LineInfo line : lines) {
    maxWidth=Math.max(line.getWidth(),maxWidth);
  }
  double boundsY=0;
  double labelY=0;
  for (  LineInfo info : lines) {
    Rectangle2D currBounds=info.getBounds();
    double minX=(maxWidth - currBounds.getWidth()) * textStyle.getAnchorX() - currBounds.getMinX();
    info.setMinX(minX);
    double lineOffset=info.getLineOffset();
    if (labelBounds == null) {
      labelBounds=currBounds;
      boundsY=currBounds.getMinY() + lineOffset;
    }
 else {
      Rectangle2D translated=new Rectangle2D.Double(minX,boundsY,currBounds.getWidth(),currBounds.getHeight());
      boundsY+=lineOffset;
      labelY+=lineOffset;
      labelBounds=labelBounds.createUnion(translated);
    }
    info.setY(labelY);
  }
  normalizeBounds(labelBounds);
}
