{
  if (!labelItem.isTextUnderlined() || (Math.abs(maxX - minX) < 0.0000001)) {
    return;
  }
  float underlineThickness=metrics.getUnderlineThickness();
  float underlineOffset=metrics.getUnderlineOffset();
  if (drawingHalo) {
    graphics.draw(new Line2D.Double(minX,underlineOffset * 2,maxX,underlineOffset * 2));
  }
 else {
    Stroke currentStroke=graphics.getStroke();
    graphics.setStroke(new BasicStroke(underlineThickness));
    graphics.draw(new Line2D.Double(minX,underlineOffset * 2,maxX,underlineOffset * 2));
    graphics.setStroke(currentStroke);
  }
}
