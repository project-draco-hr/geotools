{
  if (mapContent != newMapContent) {
    if (mapContent != null) {
      mapContent.removeMapLayerListListener(this);
      for (      Layer layer : mapContent.layers()) {
        if (layer instanceof ComponentListener) {
          removeComponentListener((ComponentListener)layer);
        }
      }
    }
    mapContent=newMapContent;
    if (mapContent != null) {
      mapContent.getViewport().setMatchingAspectRatio(true);
      mapContent.addMapLayerListListener(this);
      mapContent.addMapBoundsListener(this);
      if (!mapContent.layers().isEmpty()) {
        for (        Layer layer : mapContent.layers()) {
          layer.setSelected(true);
          if (layer instanceof ComponentListener) {
            addComponentListener((ComponentListener)layer);
          }
        }
        setFullExtent();
        doSetDisplayArea(fullExtent);
      }
    }
    MapPaneEvent event=new MapPaneEvent(this,MapPaneEvent.Type.NEW_MAPCONTENT,mapContent);
    publishEvent(event);
    drawLayers(false);
  }
}
