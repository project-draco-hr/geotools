{
  if (component == 0) {
    return 0;
  }
 else {
    int shiftedMax=255 >> shift;
    if (component == shiftedMax) {
      return 255;
    }
 else {
      return (component * 255 + shiftedMax / 2) / shiftedMax;
    }
  }
}
