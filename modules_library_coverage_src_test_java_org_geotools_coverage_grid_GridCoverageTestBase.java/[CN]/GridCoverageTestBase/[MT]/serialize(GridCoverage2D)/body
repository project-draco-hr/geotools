{
  coverage.tileEncoding=null;
  final ByteArrayOutputStream buffer=new ByteArrayOutputStream();
  final ObjectOutputStream out=new ObjectOutputStream(buffer);
  try {
    out.writeObject(coverage.view(ViewType.PACKED));
    out.writeObject(coverage.view(ViewType.GEOPHYSICS));
  }
  finally {
    out.close();
  }
  final ObjectInputStream in=new ObjectInputStream(new ByteArrayInputStream(buffer.toByteArray()));
  GridCoverage2D read;
  try {
    read=(GridCoverage2D)in.readObject();
    assertSame(read,read.view(ViewType.PACKED));
    read=(GridCoverage2D)in.readObject();
    assertSame(read,read.view(ViewType.GEOPHYSICS));
  }
  finally {
    in.close();
  }
  coverage=read.view(ViewType.PACKED);
  assertNotSame(read,coverage);
  return coverage;
}
