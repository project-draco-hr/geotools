{
  if (requested == null || requested.equals(actual)) {
    return true;
  }
  if (requested.getClass().isArray()) {
    final int length=Array.getLength(requested);
    for (int i=0; i < length; i++) {
      if (!isAcceptable(actual,Array.get(requested,i))) {
        return false;
      }
    }
    return true;
  }
  if (actual != null && requested instanceof Class) {
    return ((Class)requested).isAssignableFrom(actual.getClass());
  }
  return false;
}
