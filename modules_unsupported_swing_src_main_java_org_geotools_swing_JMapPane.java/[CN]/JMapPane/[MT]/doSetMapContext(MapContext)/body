{
  if (this.context != context) {
    if (this.context != null) {
      this.context.removeMapLayerListListener(this);
      for (      MapLayer layer : this.context.getLayers()) {
        if (layer instanceof ComponentListener) {
          removeComponentListener((ComponentListener)layer);
        }
      }
    }
    this.context=context;
    if (context != null) {
      this.context.addMapLayerListListener(this);
      this.context.addMapBoundsListener(this);
      resetMapLayerTable();
      if (context.getLayerCount() > 0) {
        for (        MapLayer layer : context.getLayers()) {
          layer.setSelected(true);
          if (layer instanceof ComponentListener) {
            addComponentListener((ComponentListener)layer);
          }
        }
        setFullExtent();
        doSetDisplayArea(fullExtent);
      }
    }
    if (renderer != null) {
      renderer.setContext(this.context);
    }
    MapPaneEvent ev=new MapPaneEvent(this,MapPaneEvent.Type.NEW_CONTEXT);
    publishEvent(ev);
    drawBaseImage(false);
  }
}
