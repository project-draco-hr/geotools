{
  ReferencedEnvelope aoi=null;
  if (curPaintArea != null && screenToWorld != null) {
    Point2D p0=new Point2D.Double(curPaintArea.getMinX(),curPaintArea.getMinY());
    Point2D p1=new Point2D.Double(curPaintArea.getMaxX(),curPaintArea.getMaxY());
    screenToWorld.transform(p0,p0);
    screenToWorld.transform(p1,p1);
    aoi=new ReferencedEnvelope(Math.min(p0.getX(),p1.getX()),Math.max(p0.getX(),p1.getX()),Math.min(p0.getY(),p1.getY()),Math.max(p0.getY(),p1.getY()),context.getCoordinateReferenceSystem());
  }
  return aoi;
}
