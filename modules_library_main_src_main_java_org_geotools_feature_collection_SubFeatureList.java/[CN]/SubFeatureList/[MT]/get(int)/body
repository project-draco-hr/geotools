{
  FeatureId fid=index.get(position);
  if (collection instanceof RandomFeatureAccess) {
    RandomFeatureAccess random=(RandomFeatureAccess)collection;
    return random.getFeatureMember(fid.getID());
  }
  SimpleFeatureIterator it=collection.features();
  try {
    while (it.hasNext()) {
      SimpleFeature feature=(SimpleFeature)it.next();
      if (id.equals(feature.getID())) {
        return feature;
      }
    }
    throw new IndexOutOfBoundsException();
  }
  finally {
    it.close();
  }
}
