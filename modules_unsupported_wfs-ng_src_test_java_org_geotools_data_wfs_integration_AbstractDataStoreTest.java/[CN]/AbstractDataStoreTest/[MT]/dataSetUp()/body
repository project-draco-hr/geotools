{
  super.dataSetUp();
  roadType=DataUtilities.createSubType(roadType,new String[]{"id","geom","name"});
  newRoad=SimpleFeatureBuilder.retype(newRoad,roadType);
  boolean longitudeFirst=true;
  CoordinateReferenceSystem wgs84LonLat=CRS.decode("EPSG:4326",longitudeFirst);
  roadType=DataUtilities.createSubType(roadType,null,wgs84LonLat);
  riverType=DataUtilities.createSubType(riverType,null,wgs84LonLat);
  try {
    data=createDataStore();
  }
 catch (  Exception e) {
    LOGGER.log(Level.INFO,"exception while making schema",e);
    throw e;
  }
  SimpleFeatureSource rivers=data.getFeatureSource(getRiverTypeName());
  SimpleFeatureSource roads=data.getFeatureSource(getRoadTypeName());
  roadFeatures=grabArray(roads.getFeatures(),roadFeatures.length);
  riverFeatures=grabArray(rivers.getFeatures(),riverFeatures.length);
  rd1Filter=ff.id(ff.featureId(roadFeatures[0].getID()));
  rd2Filter=ff.id(ff.featureId(roadFeatures[1].getID()));
  rd12Filter=ff.id(ff.featureId(roadFeatures[0].getID()),ff.featureId(roadFeatures[1].getID()));
  CoordinateReferenceSystem crs=CRS.decode("EPSG:4326",true);
  riverBounds=new ReferencedEnvelope(riverBounds,crs);
  roadBounds=new ReferencedEnvelope(roadBounds,crs);
}
