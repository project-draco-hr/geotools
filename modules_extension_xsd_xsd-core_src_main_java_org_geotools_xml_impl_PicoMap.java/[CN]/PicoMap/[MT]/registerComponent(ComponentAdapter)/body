{
  if (componentAdapter instanceof DecoratingComponentAdapter) {
    componentAdapter=((DecoratingComponentAdapter)componentAdapter).getDelegate();
  }
  Object key=componentAdapter.getComponentKey();
  if (componentAdapter instanceof InstanceComponentAdapter) {
    Object instance=((InstanceComponentAdapter)componentAdapter).getComponentInstance(null);
    put(key,instance);
  }
 else {
    Class implementation=componentAdapter.getComponentImplementation();
    put(key,implementation);
  }
  return componentAdapter;
}
