{
  DefaultQuery q=new DefaultQuery(POINT3D);
  q.setHints(new Hints(Hints.FEATURE_2D,true));
  SimpleFeatureCollection fc=data.getFeatureSource(POINT3D).getFeatures(q);
  SimpleFeatureIterator fr=fc.features();
  assertTrue(fr.hasNext());
  SimpleFeature feature=fr.next();
  assertEquals(2,feature.getType().getGeometryDescriptor().getUserData().get(Hints.COORDINATE_DIMENSION));
  Point p=(Point)feature.getDefaultGeometry();
  assertTrue(new Coordinate(1,1,Double.NaN).equals3D(p.getCoordinate()));
  fr.close();
}
