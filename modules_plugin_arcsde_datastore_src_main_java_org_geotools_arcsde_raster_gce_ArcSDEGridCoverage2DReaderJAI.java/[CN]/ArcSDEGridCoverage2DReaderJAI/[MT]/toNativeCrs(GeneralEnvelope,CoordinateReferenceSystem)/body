{
  ReferencedEnvelope reqEnv=toReferencedEnvelope(requestedEnvelope);
  if (!CRS.equalsIgnoreMetadata(nativeCRS,reqEnv.getCoordinateReferenceSystem())) {
    try {
      reqEnv=reqEnv.transform(nativeCRS,true);
    }
 catch (    FactoryException fe) {
      throw new IllegalArgumentException("Unable to find a reprojection from requested " + "coordsys to native coordsys for this request",fe);
    }
catch (    TransformException te) {
      throw new IllegalArgumentException("Unable to perform reprojection from requested " + "coordsys to native coordsys for this request",te);
    }
  }
  return reqEnv;
}
