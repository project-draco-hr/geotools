{
  if (params == null) {
    throw new IllegalArgumentException("No GeneralParameterValue given to read operation");
  }
  GeneralEnvelope reqEnvelope=null;
  Rectangle dim=null;
  OverviewPolicy overviewPolicy=null;
  for (int i=0; i < params.length; i++) {
    final ParameterValue<?> param=(ParameterValue<?>)params[i];
    final String name=param.getDescriptor().getName().getCode();
    if (name.equals(AbstractGridFormat.READ_GRIDGEOMETRY2D.getName().toString())) {
      final GridGeometry2D gg=(GridGeometry2D)param.getValue();
      reqEnvelope=new GeneralEnvelope((Envelope)gg.getEnvelope2D());
      CoordinateReferenceSystem nativeCrs=coverageEnvelope.getCoordinateReferenceSystem();
      CoordinateReferenceSystem requestCrs=reqEnvelope.getCoordinateReferenceSystem();
      if (!CRS.equalsIgnoreMetadata(nativeCrs,requestCrs)) {
        LOGGER.fine("Request CRS and native CRS differ, " + "reprojecting request envelope to native CRS");
        ReferencedEnvelope nativeCrsEnv;
        nativeCrsEnv=toNativeCrs(reqEnvelope,nativeCrs);
        reqEnvelope=new GeneralEnvelope(nativeCrsEnv);
      }
      dim=gg.getGridRange2D().getBounds();
      continue;
    }
    if (name.equals(AbstractGridFormat.OVERVIEW_POLICY.getName().toString())) {
      overviewPolicy=(OverviewPolicy)param.getValue();
      continue;
    }
  }
  if (dim == null && reqEnvelope == null) {
    throw new ParameterNotFoundException("Parameter is mandatory and shall provide " + "the extent and dimension to request",AbstractGridFormat.READ_GRIDGEOMETRY2D.getName().toString());
  }
  if (!reqEnvelope.intersects(coverageEnvelope,true)) {
    throw new IllegalArgumentException("The requested extend does not overlap the coverage extent: " + coverageEnvelope);
  }
  if (dim.width <= 0 || dim.height <= 0) {
    throw new IllegalArgumentException("The requested coverage dimension can't be null: " + dim);
  }
  if (overviewPolicy == null) {
    overviewPolicy=OverviewPolicy.NEAREST;
    LOGGER.finer("No overview policy requested, defaulting to " + overviewPolicy);
  }
  LOGGER.fine("Overview policy is " + overviewPolicy);
  LOGGER.fine("Reading raster for " + dim.getWidth() + "x"+ dim.getHeight()+ " requested dim and "+ reqEnvelope.getMinimum(0)+ ","+ reqEnvelope.getMaximum(0)+ " - "+ reqEnvelope.getMinimum(1)+ reqEnvelope.getMaximum(1)+ " requested extent");
  ArcSDEGridCoverage2DReaderJAI.ReadParameters parsedParams=new ArcSDEGridCoverage2DReaderJAI.ReadParameters();
  parsedParams.requestedEnvelope=reqEnvelope;
  parsedParams.dim=dim;
  parsedParams.overviewPolicy=overviewPolicy;
  return parsedParams;
}
