{
  SimpleFeatureType schema=getSchema();
  String typeName=schema.getTypeName();
  if (query.getTypeName() == null) {
    DefaultQuery defaultQuery=new DefaultQuery(query);
    defaultQuery.setTypeName(typeName);
    query=defaultQuery;
  }
  if (!typeName.equals(query.getTypeName())) {
    return new EmptyFeatureCollection(schema);
  }
 else {
    return new DefaultFeatureResults(this,query);
  }
}
