{
  for (  AttributeMapping attMapping : ((XmlFeatureTypeMapping)mapping).setterAttributes) {
    String parentLabel=attMapping.getParentLabel();
    List<Pair> ls=elements.get(parentLabel);
    if (ls != null) {
      final Expression sourceExpression=attMapping.getSourceExpression();
      final Expression idExpression=attMapping.getIdentifierExpression();
      for (int i=0; i < ls.size(); i++) {
        Pair parentPair=ls.get(i);
        Attribute setterTarget=parentPair.getAttribute();
        StepList xpath=attMapping.getTargetXPath().clone();
        Object value=getValue(parentPair.getXpath(),sourceExpression,target);
        xpath.get(0).setIndex(i + 1);
        if (value != null) {
          if (value instanceof Collection) {
            Collection<Object> values=(Collection)value;
            for (            Object val : values) {
              setValues(val,setterTarget,parentPair,attMapping,target,xpath,idExpression);
            }
          }
 else {
            setValues(value,setterTarget,parentPair,attMapping,target,xpath,idExpression);
          }
        }
      }
    }
  }
}
