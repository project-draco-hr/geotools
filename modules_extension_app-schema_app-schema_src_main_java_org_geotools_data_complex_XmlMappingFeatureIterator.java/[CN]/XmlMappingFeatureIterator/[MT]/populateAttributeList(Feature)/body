{
  PathAttributeList elements=new PathAttributeList();
  String rootPrefix=createIndexedItemXpathString((XmlFeatureTypeMapping)mapping,xmlResponse,indexCounter);
  elements.put(((XmlFeatureTypeMapping)mapping).rootAttribute.getLabel(),rootPrefix,target);
  setClientProperties(target,rootPrefix,((XmlFeatureTypeMapping)mapping).rootAttribute.getClientProperties());
  Iterator<AttributeMapping> it=attOrderedTypeList.iterator();
  while (it.hasNext()) {
    AttributeMapping attMapping=it.next();
    final Expression idExpression=attMapping.getIdentifierExpression();
    List<Pair> ls=elements.get(attMapping.getParentLabel());
    if (ls != null) {
      for (int i=0; i < ls.size(); i++) {
        Pair parentAttribute=ls.get(i);
        String countXpath=parentAttribute.getXpath();
        if (attMapping.getInstanceXpath() != null) {
          countXpath+=XPATH_SEPARATOR + attMapping.getInstanceXpath();
        }
        int count=XmlXpathUtilites.countXPathNodes(mapping.getNamespaces(),countXpath,xmlResponse.getDoc());
        createSubFeaturesAndAddToAttributeList(elements,attMapping,idExpression,parentAttribute,count,countXpath,target);
      }
    }
  }
  return elements;
}
