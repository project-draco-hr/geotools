{
  for (int j=1; j <= count; j++) {
    final String bracketIndex=bracketedIndex(j);
    final String idPath=setFeatureXpath(attMapping,sourceExpression,parentAttribute,bracketIndex);
    List<String> featureIdList=getValue(idPath);
    String featureId=null;
    if (!featureIdList.isEmpty()) {
      featureId=featureIdList.get(0);
    }
    StepList sl=attMapping.getTargetXPath().clone();
    setPathIndex(j,sl);
    Attribute subFeature=xpathAttributeBuilder.set(parentAttribute.getAttribute(),sl,null,featureId,attMapping.getTargetNodeInstance(),false,attMapping.getSourceExpression());
    String xpath=countXpath + bracketIndex;
    setClientProperties(subFeature,xpath,attMapping.getClientProperties());
    elements.put(attMapping.getLabel(),xpath,subFeature);
  }
}
