{
  System.out.println("copyContent start\n");
  Map<String,Serializable> params=new HashMap<String,Serializable>();
  params.put("directory",directory);
  DataStore store=DataStoreFinder.getDataStore(params);
  FeatureReader<SimpleFeatureType,SimpleFeature> reader;
  FeatureWriter<SimpleFeatureType,SimpleFeature> writer;
  SimpleFeature feature, newFeature;
  SimpleFeatureType type=store.getSchema("example");
  SimpleFeatureType type2=DataUtilities.createType("duplicate","id:Integer,geom:Geometry,name:String");
  Query query=new Query(type.getTypeName(),Filter.INCLUDE);
  reader=store.getFeatureReader(query,Transaction.AUTO_COMMIT);
  store.createSchema(type2);
  writer=store.getFeatureWriterAppend("duplicate",Transaction.AUTO_COMMIT);
  try {
    while (reader.hasNext()) {
      feature=reader.next();
      newFeature=writer.next();
      newFeature.setAttribute("id",feature.getAttribute("id"));
      newFeature.setAttribute("geom",feature.getAttribute("geom"));
      newFeature.setAttribute("name",feature.getAttribute("name"));
      writer.write();
    }
  }
  finally {
    reader.close();
    writer.close();
  }
  System.out.println("\ncopyContent end\n");
}
