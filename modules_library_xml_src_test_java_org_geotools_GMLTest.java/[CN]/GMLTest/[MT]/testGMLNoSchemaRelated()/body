{
  URL url=TestData.getResource(this,"states_noschema_linked_atts.xml");
  InputStream in=url.openStream();
  GML gml=new GML(Version.GML3);
  SimpleFeatureCollection fc=gml.decodeFeatureCollection(in,true);
  assertEquals(2,fc.size());
  SimpleFeatureType schema=fc.getSchema();
  assertNotNull(schema.getGeometryDescriptor());
  Map<String,Integer> attributePositions=getAttributePositionsMap(schema);
  assertTrue(attributePositions.keySet().containsAll(Arrays.asList("the_geom","P_MALE","STATE_NAME","P_FEMALE")));
  assertTrue(attributePositions.get("STATE_NAME") < attributePositions.get("STATE_FIPS"));
  assertTrue(attributePositions.get("STATE_FIPS") < attributePositions.get("SUB_REGION"));
  assertTrue(attributePositions.get("STATE_NAME") < attributePositions.get("P_MALE"));
  assertTrue(attributePositions.get("P_MALE") < attributePositions.get("P_FEMALE"));
}
