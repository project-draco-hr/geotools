{
  final int minimum=-2000;
  final int maximum=4000;
  final int padValue=-9999;
  final SampleConverter[] converters=new SampleConverter[1];
  final GeographicImageReader reader=new NullImageReader(DataBuffer.TYPE_SHORT,minimum,maximum,padValue);
  final GeographicImageReadParam param=(GeographicImageReadParam)reader.getDefaultReadParam();
  param.setPaletteName("grayscale");
  final ImageTypeSpecifier specifier=reader.getRawImageType(0,param,converters);
  final SampleConverter converter=converters[0];
  assertNotNull(converter);
  assertEquals(0.0,converter.getOffset(),0.0);
  assertEquals(minimum,converter.convert(minimum));
  assertEquals(maximum,converter.convert(maximum));
  assertEquals(padValue,converter.convert(padValue));
  final SampleModel sm=specifier.getSampleModel();
  assertNotNull(sm);
  assertEquals(DataBuffer.TYPE_USHORT,sm.getDataType());
  final ColorModel cm=specifier.getColorModel();
  assertTrue(cm instanceof IndexColorModel);
  final IndexColorModel indexed=(IndexColorModel)cm;
  assertEquals(65536,indexed.getMapSize());
  assertEquals(0xFF000000,indexed.getRGB(minimum & 0xFFFF));
  assertEquals(0xFFFFFFFF,indexed.getRGB(maximum & 0xFFFF));
  assertEquals(0x00000000,indexed.getRGB(padValue & 0xFFFF));
  if (false) {
    assertEquals(padValue & 0xFFFF,indexed.getTransparentPixel());
  }
}
