{
  if (args.length == 1 && "?".equals(args[0])) {
    System.out.println(" Usage: java html.ImageRename [file.rst] [rename.properties]");
    System.out.println();
    System.out.println("Where:");
    System.out.println("  file.rst Used to locate your odt2sphinx files");
    System.out.println("  rename.properties used to rename files in your images folder");
    System.out.println();
    System.out.println("If not provided the appication will prompt you for the above information");
    System.exit(0);
  }
  File rstFile=args.length > 0 ? new File(args[0]) : null;
  File renameFile=args.length > 1 ? new File(args[1]) : null;
  if (rstFile != null && rstFile.isDirectory()) {
    rstFile=new File(rstFile,"*.rst");
  }
  if (rstFile == null || !rstFile.exists()) {
    File cd=new File("user");
    JFileChooser dialog=new JFileChooser(cd);
    dialog.setFileFilter(new TargetFileFilter("index.rst"));
    dialog.setDialogTitle("Step 1: odt2sphinx RST file");
    int open=dialog.showDialog(null,"Rename Images");
    if (open == JFileChooser.CANCEL_OPTION) {
      System.out.println("Rename Canceled");
      System.exit(-1);
    }
    rstFile=dialog.getSelectedFile();
  }
  if (rstFile == null || !rstFile.exists() || rstFile.isDirectory()) {
    System.out.println("Locate *.RST file generated from odt2sphinx: '" + rstFile + "'");
    System.exit(-1);
  }
  File rstDirectory=null;
  try {
    rstDirectory=rstFile.getParentFile().getCanonicalFile();
  }
 catch (  IOException eek) {
    System.out.println("Could determine parent of " + rstFile + ":"+ eek);
    System.exit(-1);
  }
  if (renameFile == null) {
    JFileChooser dialog=new JFileChooser(rstDirectory.getParentFile());
    dialog.setFileFilter(new TargetFileFilter("rename.properties"));
    dialog.setDialogTitle("Step 2: rename.properties");
    int open=dialog.showDialog(null,"Rename Images");
    if (open == JFileChooser.CANCEL_OPTION) {
      System.out.println("Rename images canceled");
      System.exit(-1);
    }
    renameFile=dialog.getSelectedFile();
  }
  Properties rename=properties(renameFile);
  if (rename == null) {
    System.out.println("No rename image information provided  " + renameFile);
    System.exit(-1);
  }
  ImageRename imageRename=new ImageRename(rstDirectory,rename);
  imageRename.process();
}
