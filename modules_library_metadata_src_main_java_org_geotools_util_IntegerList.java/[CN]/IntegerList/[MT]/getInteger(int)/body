{
  if (index < 0 || index >= size) {
    throw new IndexOutOfBoundsException(Errors.format(ErrorKeys.INDEX_OUT_OF_BOUNDS_$1,index));
  }
  index*=bitCount;
  int base=index >>> BASE_SHIFT;
  int offset=index & OFFSET_MASK;
  int value=(int)(values[base] >>> offset);
  offset=VALUE_SIZE - offset;
  if (offset < bitCount) {
    final int high=(int)values[++base];
    value|=(high << offset);
  }
  value&=mask;
  return value;
}
