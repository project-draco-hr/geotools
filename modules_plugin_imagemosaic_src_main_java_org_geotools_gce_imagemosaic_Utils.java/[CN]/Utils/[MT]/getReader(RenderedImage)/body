{
  if (rOp != null) {
    if (rOp instanceof RenderedOp) {
      RenderedOp renderedOp=(RenderedOp)rOp;
      final int nSources=renderedOp.getNumSources();
      if (nSources > 0) {
        for (int k=0; k < nSources; k++) {
          Object source=null;
          try {
            source=renderedOp.getSourceObject(k);
          }
 catch (          ArrayIndexOutOfBoundsException e) {
          }
          if (source != null) {
            if (source instanceof RenderedOp) {
              getReader((RenderedOp)source);
            }
          }
        }
      }
 else {
        Object imageReader=rOp.getProperty(ImageReadDescriptor.PROPERTY_NAME_IMAGE_READER);
        if (imageReader != null && imageReader instanceof ImageReader) {
          final ImageReader reader=(ImageReader)imageReader;
          return reader;
        }
      }
    }
  }
  return null;
}
