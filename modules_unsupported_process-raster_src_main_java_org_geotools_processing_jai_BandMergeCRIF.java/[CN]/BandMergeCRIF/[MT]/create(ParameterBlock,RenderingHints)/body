{
  ImageLayout layout=RIFUtil.getImageLayoutHint(renderHints);
  int numSources=paramBlock.getNumSources();
  List sources=new ArrayList(numSources);
  for (int i=0; i < numSources; i++) {
    sources.add(paramBlock.getSource(i));
  }
  Range[] nodata=(Range[])paramBlock.getObjectParameter(0);
  double destinationNoData=paramBlock.getDoubleParameter(1);
  List<AffineTransform> transform=(List<AffineTransform>)paramBlock.getObjectParameter(2);
  ROI roi=(ROI)paramBlock.getObjectParameter(3);
  if (transform != null && !transform.isEmpty()) {
    return new ExtendedBandMergeOpImage(sources,transform,renderHints,nodata,roi,destinationNoData,layout);
  }
 else {
    return new BandMergeOpImage(sources,renderHints,nodata,roi,destinationNoData,layout);
  }
}
