{
  if (provider == null) {
    provider=getImageReaderSpi(input);
  }
  ensureNonNull("provider",provider);
  ensureNonNull("input",input);
  ensureNonNull("region",region);
  if (region.isEmpty()) {
    throw new IllegalArgumentException(Errors.format(ErrorKeys.BAD_RECTANGLE_$1,region));
  }
  this.provider=provider;
  this.input=input;
  this.imageIndex=ensurePositive(imageIndex);
  this.x=region.x;
  this.y=region.y;
  setSize(region.width,region.height);
  if (subsampling != null) {
    xSubsampling=ensureStrictlyPositive(subsampling.width);
    ySubsampling=ensureStrictlyPositive(subsampling.height);
  }
 else {
    xSubsampling=ySubsampling=1;
  }
}
