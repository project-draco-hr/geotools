{
  if (subsampling != null) {
    final int dx, dy;
    try {
      dx=subsampling.width % (xSubsampling & MASK);
      dy=subsampling.height % (ySubsampling & MASK);
    }
 catch (    ArithmeticException e) {
      throw new IllegalStateException("Tile must be processed by TileManagerFactory.",e);
    }
    if (dx != 0 || dy != 0) {
      final int sourceXSubsampling=subsampling.width - dx;
      final int sourceYSubsampling=subsampling.height - dy;
      if (sourceXSubsampling != 0 && sourceYSubsampling != 0) {
        return new Dimension(sourceXSubsampling,sourceYSubsampling);
      }
 else {
        return null;
      }
    }
  }
  return subsampling;
}
