{
  GeoGIT ggit=new GeoGIT(repository);
  VersionQuery versionQuery=new VersionQuery(ggit,featureType.getName());
  Iterator<Ref> featureRefs;
  try {
    featureRefs=versionQuery.getByQuery(query);
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  Iterator<Feature> features=Iterators.transform(featureRefs,new RefToFeature(repository,featureType));
  return features;
}
