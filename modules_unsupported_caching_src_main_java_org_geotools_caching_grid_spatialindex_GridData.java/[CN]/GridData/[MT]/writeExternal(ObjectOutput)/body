{
  out.writeObject(shape);
  if (data instanceof SimpleFeature) {
    out.writeBoolean(true);
    try {
      getFeatureMarshaller().marshall((SimpleFeature)data,out);
    }
 catch (    Exception ex) {
      throw (IOException)new IOException().initCause(ex);
    }
  }
 else {
    out.writeBoolean(false);
    out.writeObject(data);
  }
}
