{
  if (object instanceof SimpleFeature) {
    SimpleFeature f=(SimpleFeature)object;
    Object defaultGeometry=f.getDefaultGeometry();
    if (defaultGeometry == null) {
      for (      Object o : f.getAttributes()) {
        if (o instanceof Geometry) {
          defaultGeometry=o;
          break;
        }
      }
    }
    return defaultGeometry;
  }
  if (object instanceof SimpleFeatureType) {
    SimpleFeatureType ft=(SimpleFeatureType)object;
    GeometryDescriptor gd=ft.getGeometryDescriptor();
    if (gd == null) {
      for (      AttributeDescriptor ad : ft.getAttributeDescriptors()) {
        if (Geometry.class.isAssignableFrom(ad.getType().getBinding())) {
          return ad;
        }
      }
    }
    return gd;
  }
  return null;
}
