{
  JFileDataStoreChooser dialog=new JFileDataStoreChooser(parent,SWT.OPEN,format);
  FileDialog fileDialogInternal=dialog.getFileDialog();
  if (initialDir != null) {
    if (initialDir.isDirectory()) {
      fileDialogInternal.setFilterPath(initialDir.getAbsolutePath());
    }
 else {
      fileDialogInternal.setFilterPath(initialDir.getParentFile().getAbsolutePath());
    }
  }
  fileDialogInternal.open();
  String filePath=fileDialogInternal.getFileName();
  File file=new File(filePath);
  return file;
}
