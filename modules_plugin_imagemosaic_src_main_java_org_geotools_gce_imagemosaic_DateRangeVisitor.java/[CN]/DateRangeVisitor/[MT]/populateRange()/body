{
  Iterator<? extends Range> iterator=set.iterator();
  DateRange second=null;
  DateRange first;
  while (iterator.hasNext()) {
    first=second;
    second=(DateRange)iterator.next();
    if (first != null) {
      if (second.intersects(first)) {
        second=merge(first,second);
        if (!iterator.hasNext()) {
          minimalRanges.add(formatRange(second));
          second=null;
        }
      }
 else {
        minimalRanges.add(formatRange(first));
        first=null;
      }
    }
  }
  if (second != null) {
    minimalRanges.add(formatRange(second));
  }
}
