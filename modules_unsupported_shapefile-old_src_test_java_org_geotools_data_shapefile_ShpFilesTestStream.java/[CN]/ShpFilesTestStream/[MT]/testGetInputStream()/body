{
  writeDataToFiles();
  ShpFileType[] types=ShpFileType.values();
  for (  ShpFileType shpFileType : types) {
    String read="";
    InputStream in=files.getInputStream(shpFileType,this);
    InputStreamReader reader=new InputStreamReader(in);
    assertEquals(1,files.numberOfLocks());
    try {
      int current=reader.read();
      while (current != -1) {
        read+=(char)current;
        current=reader.read();
      }
    }
  finally {
      reader.close();
      in.close();
      assertEquals(0,files.numberOfLocks());
    }
    assertEquals(shpFileType.name(),read);
  }
}
