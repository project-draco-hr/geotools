{
  JPopupMenu menu=new JPopupMenu();
  for (  Entry<Integer,ItemInfo> entry : itemInfo.entrySet()) {
    final ItemInfo el=entry.getValue();
    if (el.configurable) {
      JMenuItem menuItem=new JCheckBoxMenuItem(el.item.getName(),el.showing);
      menuItem.addActionListener(new ActionListener(){
        @Override public void actionPerformed(        ActionEvent e){
          el.showing=!el.showing;
          Rectangle r=el.item.getBounds();
          if (el.showing) {
            add(el.item,el.componentIndex);
          }
 else {
            remove(el.item);
          }
          revalidate();
          repaint(r);
        }
      }
);
      menu.add(menuItem);
    }
  }
  menu.addSeparator();
  JMenuItem menuItem=new JMenuItem("Set number decimal digits...");
  menuItem.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      setNumDecimals();
    }
  }
);
  menu.add(menuItem);
  return menu;
}
