{
  FilterFactory factory=FilterFactoryFinder.createFilterFactory();
  GeometryFilter gf=factory.createGeometryFilter(AbstractFilter.GEOMETRY_BBOX);
  LiteralExpressionImpl right=new BBoxExpressionImpl(new Envelope(0,300,0,300));
  gf.addRightGeometry(right);
  AttributeExpressionImpl left=new AttributeExpressionImpl(testSchema,"testGeometry");
  gf.addLeftGeometry(left);
  SQLEncoderPostgisGeos encoder=new SQLEncoderPostgisGeos();
  encoder.setLooseBbox(true);
  encoder.setSRID(2356);
  String out=encoder.encode(gf);
  LOGGER.fine("Resulting SQL filter is \n" + out);
  assertEquals("WHERE \"testGeometry\" && GeometryFromText('POLYGON" + " ((0 0, 0 300, 300 300, 300 0, 0 0))'" + ", 2356)",out);
}
