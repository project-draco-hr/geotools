{
  ImageInputStream inputStream=null;
  ImageReader reader=null;
  try {
    inputStream=createImageInputStream();
    reader=readerSPI.createReaderInstance();
    reader.setInput(inputStream);
    final RasterManagerBuilder rasterManagerBuilder=getRasterManagerBuilder();
    if (rasterManagerBuilder == null) {
      throw new IOException("Unable to obtain a RasterManagerBuilder");
    }
    this.numImages=reader.getNumImages(true);
    this.minIndex=reader.getMinIndex();
    if (rasterManagerBuilder.isParseStreamMetadata()) {
      rasterManagerBuilder.parseStreamMetadata(reader.getStreamMetadata());
    }
    for (int i=0; i < this.numImages; i++) {
      rasterManagerBuilder.parseImage(minIndex + i,reader);
    }
    this.elements=rasterManagerBuilder.create();
  }
  finally {
    if (inputStream != null) {
      try {
        inputStream.close();
      }
 catch (      Exception e) {
      }
    }
    if (reader != null) {
      try {
        reader.dispose();
      }
 catch (      Exception e) {
      }
    }
  }
}
