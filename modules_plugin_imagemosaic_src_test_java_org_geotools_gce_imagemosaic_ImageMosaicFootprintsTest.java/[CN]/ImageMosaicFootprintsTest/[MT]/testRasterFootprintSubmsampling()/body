{
  File testMosaicRaster=new File(TestData.file(this,"."),"footprintRasterSubsampling");
  if (testMosaicRaster.exists()) {
    FileUtils.deleteDirectory(testMosaicRaster);
  }
  GridCoverage2D coverage=readRasterFootprint("masked2",testMosaicRaster,true);
  RenderedImageBrowser.showChain(coverage.getRenderedImage());
  ROI roi=CoverageUtilities.getROIProperty(coverage);
  Raster roiImage=roi.getAsImage().getData();
  Raster image=coverage.getRenderedImage().getData();
  int[] px=new int[3];
  int[] rpx=new int[1];
  for (int i=0; i < image.getHeight(); i++) {
    for (int j=0; j < image.getWidth(); j++) {
      image.getPixel(j,i,px);
      roiImage.getPixel(j,i,rpx);
      if (px[0] == 0 && px[1] == 0 && px[2] == 0) {
        assertEquals("Difference at " + i + ","+ j,0,rpx[0]);
      }
 else {
        assertEquals("Difference at " + i + ","+ j,1,rpx[0]);
      }
    }
  }
}
