{
synchronized (lock) {
    flushBuffer();
    super.flush();
  }
}
