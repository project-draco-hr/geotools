{
  if (sorted != null) {
    return;
  }
  final Map.Entry<E,Integer>[] entries=count.entrySet().toArray(new Map.Entry[count.size()]);
  Arrays.sort(entries,COMPARATOR);
  final int length=entries.length;
  sorted=(E[])new Object[length];
  if (frequencies == null || frequencies.length != length) {
    frequencies=new int[length];
  }
  for (int i=0; i < length; i++) {
    final Map.Entry<E,Integer> entry=entries[i];
    sorted[i]=entry.getKey();
    frequencies[i]=Math.abs(entry.getValue());
  }
}
