{
  String name=method.name().toUpperCase();
  AbstractContrastEnhancementMethod ceMethod=null;
  if ("NORMALIZE".equals(name)) {
    Expression algorithm=options.get(AbstractContrastEnhancementMethod.ALGORITHM);
    ceMethod=new Normalize();
    if (algorithm != null) {
      ceMethod.setAlgorithm(algorithm);
    }
  }
 else   if ("LOGARITHMIC".equalsIgnoreCase(name)) {
    ceMethod=new Logarithmic();
  }
 else   if ("EXPONENTIAL".equalsIgnoreCase(name)) {
    ceMethod=new Exponential();
  }
 else   if ("HISTOGRAM".equalsIgnoreCase(name)) {
    ceMethod=new Histogram();
  }
 else {
    throw new IllegalArgumentException(Errors.format(ErrorKeys.UNSUPPORTED_METHOD_$1,method));
  }
  ceMethod.setOptions(options);
  return ceMethod;
}
