{
  MultiPoint mp=(MultiPoint)geometry;
  int length;
  if (shapeType == ShapeType.MULTIPOINT) {
    length=(mp.getNumGeometries() * 16) + 40;
  }
 else   if (shapeType == ShapeType.MULTIPOINTM) {
    length=(mp.getNumGeometries() * 16) + 40 + 16+ (8 * mp.getNumGeometries());
  }
 else   if (shapeType == ShapeType.MULTIPOINTZ) {
    length=(mp.getNumGeometries() * 16) + 40 + 16+ (8 * mp.getNumGeometries())+ 16+ (8 * mp.getNumGeometries());
  }
 else {
    throw new IllegalStateException("Expected ShapeType of Arc, got " + shapeType);
  }
  return length;
}
