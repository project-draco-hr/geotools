{
  if (typeName == null) {
    URL sourceURL=parentReader.sourceURL;
    if (sourceURL.getPath().endsWith("shp")) {
      typeName=FilenameUtils.getBaseName(DataUtilities.urlToFile(sourceURL).getCanonicalPath());
    }
 else {
      typeName=configuration.getName();
    }
  }
  if (typeName == null && granuleCatalog != null) {
    String[] typeNames=granuleCatalog.getTypeNames();
    typeName=(typeNames != null && typeNames.length > 0) ? typeNames[0] : null;
  }
}
