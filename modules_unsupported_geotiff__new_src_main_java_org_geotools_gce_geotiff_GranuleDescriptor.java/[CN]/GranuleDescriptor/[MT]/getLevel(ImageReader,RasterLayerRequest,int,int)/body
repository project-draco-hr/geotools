{
synchronized (granuleLevels) {
    if (granuleLevels.containsKey(Integer.valueOf(overviewIndex))) {
      return granuleLevels.get(Integer.valueOf(overviewIndex));
    }
 else {
      try {
        final Rectangle levelDimension=new Rectangle(0,0,reader.getWidth(imageChoice),reader.getHeight(imageChoice));
        final GranuleOverviewLevelDescriptor baseLevel=granuleLevels.get(0);
        final double scaleX=baseLevel.width / (1.0 * levelDimension.width);
        final double scaleY=baseLevel.height / (1.0 * levelDimension.height);
        final GranuleOverviewLevelDescriptor newLevel=new GranuleOverviewLevelDescriptor(scaleX,scaleY,levelDimension.width,levelDimension.height);
        this.granuleLevels.put(Integer.valueOf(overviewIndex),newLevel);
        return newLevel;
      }
 catch (      IllegalStateException e) {
        throw new IllegalArgumentException(e);
      }
catch (      IOException e) {
        throw new IllegalArgumentException(e);
      }
    }
  }
}
