{
  mappedSource=mapping.getSource();
  this.reprojection=query.getCoordinateSystemReproject();
  query.setMaxFeatures(Query.DEFAULT_MAX);
  sourceFeatures=mappedSource.getFeatures(query);
  if (reprojection != null) {
    xpathAttributeBuilder.setCRS(reprojection);
    if (sourceFeatures.getSchema().getGeometryDescriptor() == null) {
      query.setCoordinateSystemReproject(null);
    }
  }
  try {
    this.sourceFeatureIterator=sourceFeatures.iterator();
  }
 catch (  Exception e) {
    throw new IOException(e.getMessage());
  }
}
