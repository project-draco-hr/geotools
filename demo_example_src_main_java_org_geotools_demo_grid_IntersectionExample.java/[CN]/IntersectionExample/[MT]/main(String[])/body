{
  URL url=IntersectionExample.class.getResource("/data/shapefiles/oz.shp");
  FileDataStore dataStore=FileDataStoreFinder.getDataStore(url);
  SimpleFeatureSource ozMapSource=dataStore.getFeatureSource();
  double sideLen=1.0;
  ReferencedEnvelope gridBounds=Envelopes.expandToInclude(ozMapSource.getBounds(),sideLen);
  SimpleFeatureTypeBuilder tb=new SimpleFeatureTypeBuilder();
  tb.setName("grid");
  tb.add(GridFeatureBuilder.DEFAULT_GEOMETRY_ATTRIBUTE_NAME,Polygon.class,gridBounds.getCoordinateReferenceSystem());
  tb.add("id",Integer.class);
  SimpleFeatureType TYPE=tb.buildFeatureType();
  GridFeatureBuilder builder=new IntersectionBuilder(TYPE,ozMapSource);
  SimpleFeatureSource grid=Grids.createHexagonalGrid(gridBounds,sideLen,-1,builder);
  MapContext map=new DefaultMapContext();
  map.addLayer(ozMapSource,SLD.createPolygonStyle(Color.BLUE,Color.CYAN,1.0f));
  map.addLayer(grid,null);
  JMapFrame.showMap(map);
}
