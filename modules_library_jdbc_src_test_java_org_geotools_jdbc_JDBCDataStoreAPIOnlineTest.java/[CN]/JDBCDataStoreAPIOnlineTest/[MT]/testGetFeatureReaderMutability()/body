{
  FeatureReader<SimpleFeatureType,SimpleFeature> reader=reader(tname("road"));
  SimpleFeature feature;
  while (reader.hasNext()) {
    feature=(SimpleFeature)reader.next();
    feature.setAttribute(aname("name"),null);
  }
  reader.close();
  reader=reader(tname("road"));
  while (reader.hasNext()) {
    feature=(SimpleFeature)reader.next();
    assertNotNull(feature.getAttribute(aname("name")));
  }
  reader.close();
  try {
    reader.next();
    fail("next should fail with an IOException");
  }
 catch (  IOException expected) {
  }
}
