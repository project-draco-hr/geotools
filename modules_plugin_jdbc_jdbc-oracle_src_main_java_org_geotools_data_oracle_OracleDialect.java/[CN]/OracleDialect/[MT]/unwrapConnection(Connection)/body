{
  if (cx == null) {
    return null;
  }
  if (cx instanceof OracleConnection) {
    return (OracleConnection)cx;
  }
  try {
    if (uw == null) {
      UnWrapper unwrapper=DataSourceFinder.getUnWrapper(cx);
      if (unwrapper == null) {
        uw=UNWRAPPER_NOT_FOUND;
      }
 else {
        uw=unwrapper;
      }
    }
    if (uw != null && uw != UNWRAPPER_NOT_FOUND) {
      Connection uwcx=uw.unwrap(cx);
      if (uwcx != null && uwcx instanceof OracleConnection) {
        return (OracleConnection)uwcx;
      }
    }
 else     if (cx instanceof Wrapper) {
      try {
        Wrapper w=cx;
        if (w.isWrapperFor(OracleConnection.class)) {
          return w.unwrap(OracleConnection.class);
        }
      }
 catch (      Throwable t) {
        LOGGER.log(Level.FINER,"Failed to unwrap connection using java 6 facilities",t);
      }
    }
  }
 catch (  IOException e) {
    throw (SQLException)new SQLException("Could not obtain native oracle connection.").initCause(e);
  }
  throw new SQLException("Could not obtain native oracle connection for " + cx.getClass());
}
