{
  URL capabilitiesURL=WMSChooser.showChooseWMS();
  if (capabilitiesURL == null) {
    System.exit(0);
  }
  WebMapServer wms=new WebMapServer(capabilitiesURL);
  List<Layer> wmsLayers=WMSLayerChooser.showSelectLayer(wms);
  if (wmsLayers == null) {
    JOptionPane.showMessageDialog(null,"Could not connect - check url");
    System.exit(0);
  }
  MapContext mapcontext=new DefaultMapContext();
  mapcontext.setTitle(wms.getCapabilities().getService().getTitle());
  for (  Layer wmsLayer : wmsLayers) {
    WMSMapLayer displayLayer=new WMSMapLayer(wms,wmsLayer);
    mapcontext.addLayer(displayLayer);
  }
  JMapFrame.showMap(mapcontext);
}
