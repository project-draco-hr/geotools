{
  ImageMosaicReader reader=new ImageMosaicReader(testMosaicUrl,hints);
  GridGeometry2D readGeometry=new GridGeometry2D(new GridEnvelope2D(0,0,300,300),new ReferencedEnvelope(-0.667,-0.640,0.386,0.412,DefaultGeographicCRS.WGS84));
  GeneralParameterValue[] readParams=getFootprintReadParams(reader,new SimpleEntry<>(ImageMosaicFormat.READ_GRIDGEOMETRY2D,readGeometry),new SimpleEntry<>(ImageMosaicFormat.SORT_BY,"z D"));
  testOutputCoverage(reader,readParams,expectedOutput);
  readParams=getFootprintReadParams(reader,new SimpleEntry<>(ImageMosaicFormat.READ_GRIDGEOMETRY2D,readGeometry),new SimpleEntry<>(ImageMosaicFormat.SORT_BY,"z D"),new SimpleEntry<>(ImageMosaicFormat.EXCESS_GRANULE_REMOVAL,ExcessGranulePolicy.ROI));
  testOutputCoverage(reader,readParams,expectedOutput,"0_large.tiff");
  readParams=getFootprintReadParams(reader,new SimpleEntry<>(ImageMosaicFormat.READ_GRIDGEOMETRY2D,readGeometry),new SimpleEntry<>(ImageMosaicFormat.SORT_BY,"z D"),new SimpleEntry<>(ImageMosaicFormat.EXCESS_GRANULE_REMOVAL,ExcessGranulePolicy.ROI),new SimpleEntry<>(ImageMosaicFormat.ALLOW_MULTITHREADING,true));
  testOutputCoverage(reader,readParams,expectedOutput,"0_large.tiff");
}
