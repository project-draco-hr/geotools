{
  final GridCoverage2D coverage=new GridCoverageFactory().create("test",new float[200][100],new ReferencedEnvelope(-180,180,-90,90,DefaultGeographicCRS.WGS84));
  GridCoverage2DReader reader=new AbstractGridCoverage2DReader(){
{
      this.crs=DefaultGeographicCRS.WGS84;
      this.originalEnvelope=new GeneralEnvelope((BoundingBox)coverage.getEnvelope2D());
      this.originalGridRange=coverage.getGridGeometry().getGridRange();
    }
    @Override public Format getFormat(){
      return null;
    }
    @Override public GridCoverage2D read(    GeneralParameterValue[] parameters) throws IllegalArgumentException, IOException {
      return coverage;
    }
  }
;
  CoordinateReferenceSystem crs=CRS.decode("EPSG:3031",true);
  ReferencedEnvelope mapExtent=new ReferencedEnvelope(-20000000,20000000,-20000000,20000000,crs);
  GridCoverageReaderHelper helper=new GridCoverageReaderHelper(reader,new Rectangle(400,200),mapExtent,Interpolation.getInstance(Interpolation.INTERP_NEAREST));
  ProjectionHandler handler=ProjectionHandlerFinder.getHandler(mapExtent,reader.getCoordinateReferenceSystem(),true);
  List<GridCoverage2D> coverages=helper.readCoverages(null,handler);
  assertEquals(1,coverages.size());
}
