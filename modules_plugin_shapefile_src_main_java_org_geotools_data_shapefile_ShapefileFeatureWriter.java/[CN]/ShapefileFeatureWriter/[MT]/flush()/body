{
  if ((records <= 0) && (shapeType == null)) {
    GeometryDescriptor geometryDescriptor=featureType.getGeometryDescriptor();
    shapeType=JTSUtilities.getShapeType(geometryDescriptor);
  }
  shpWriter.writeHeaders(bounds,shapeType,records,shapefileLength);
  dbfHeader.setNumRecords(records);
  dbfChannel.position(0);
  dbfHeader.writeHeader(dbfChannel);
}
