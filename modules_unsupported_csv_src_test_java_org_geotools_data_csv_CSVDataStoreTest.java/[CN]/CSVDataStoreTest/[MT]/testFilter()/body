{
  DataStore csv=this.getDataStore();
  SimpleFeatureSource rows=csv.getFeatureSource(TYPE_NAME);
  SimpleFeatureCollection matches=rows.getFeatures(this.newTestFilter());
  List<String> filteredCities=this.filteredCities();
  int count=0;
  SimpleFeatureIterator iter=matches.features();
  while (iter.hasNext()) {
    SimpleFeature f=iter.next();
    filteredCities.contains(f.getAttribute(CITY_COL));
    count++;
  }
  iter.close();
  assertEquals(3,count);
  assertEquals(3,matches.size());
}
