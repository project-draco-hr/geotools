{
  System.out.println("example3 start\n");
  URL url=CSVWriteTest.class.getResource("locations.csv");
  File file=new File(url.toURI());
  Map<String,Serializable> params=new HashMap<String,Serializable>();
  params.put("file",file);
  DataStore datastore=DataStoreFinder.getDataStore(params);
  Query query=new Query("locations");
  System.out.println("open feature reader");
  FeatureReader<SimpleFeatureType,SimpleFeature> reader=datastore.getFeatureReader(query,Transaction.AUTO_COMMIT);
  try {
    int count=0;
    while (reader.hasNext()) {
      SimpleFeature feature=reader.next();
      System.out.println("  " + feature.getID() + " "+ feature.getAttribute("CITY"));
      count++;
    }
    System.out.println("close feature reader");
    System.out.println("read in " + count + " features");
  }
  finally {
    reader.close();
  }
  System.out.println("\nexample3 end\n");
}
