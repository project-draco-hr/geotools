{
  insertAndAdd(lines1,lines2,lines3,points1,points2,points3);
  new GeoGIT(repo).commit().call();
  Id filter=ff.id(Collections.singleton(ff.featureId(idP1)));
  Transaction tx=new DefaultTransaction();
  points.setTransaction(tx);
  try {
    assertEquals("StringProp1_1",sample(points,filter).getAttribute("sp"));
    points.modifyFeatures("sp","modified",filter);
    assertEquals("modified",sample(points,filter).getAttribute("sp"));
    assertEquals("StringProp1_1",sample(dataStore.getFeatureSource(pointsTypeName),filter).getAttribute("sp"));
    tx.commit();
    assertEquals("modified",sample(dataStore.getFeatureSource(pointsTypeName),filter).getAttribute("sp"));
  }
 catch (  Exception e) {
    tx.rollback();
    throw e;
  }
 finally {
    tx.close();
  }
  SimpleFeature modified=sample(points,filter);
  assertEquals("modified",modified.getAttribute("sp"));
}
