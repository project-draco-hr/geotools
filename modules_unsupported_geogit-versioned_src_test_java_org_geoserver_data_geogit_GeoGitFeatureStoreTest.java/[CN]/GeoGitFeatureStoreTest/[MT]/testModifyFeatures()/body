{
  insertAndAdd(lines1,lines2,lines3,points1,points2,points3);
  new GeoGIT(repo).commit().call();
  Id filter=ff.id(Collections.singleton(ff.featureId(idP1)));
  Transaction tx=new DefaultTransaction();
  points.setTransaction(tx);
  try {
    assertEquals("StringProp1_1",points.getFeatures(filter).iterator().next().getAttribute("sp"));
    points.modifyFeatures("sp","modified",filter);
    assertEquals("modified",points.getFeatures(filter).iterator().next().getAttribute("sp"));
    assertEquals("StringProp1_1",dataStore.getFeatureSource(pointsTypeName).getFeatures(filter).iterator().next().getAttribute("sp"));
    tx.commit();
    assertEquals("modified",dataStore.getFeatureSource(pointsTypeName).getFeatures(filter).iterator().next().getAttribute("sp"));
  }
 catch (  Exception e) {
    tx.rollback();
    throw e;
  }
 finally {
    tx.close();
  }
  SimpleFeature modified=points.getFeatures(filter).iterator().next();
  assertEquals("modified",modified.getAttribute("sp"));
}
