{
  if (filter == null)   filter=Filter.INCLUDE;
  RevisionInfo r1=new RevisionInfo(fromVersion);
  RevisionInfo r2=new RevisionInfo(toVersion);
  ModifiedFeatureIds mfids=store.getModifiedFeatureFIDs(schema.getTypeName(),fromVersion,toVersion,filter,userIds,getTransaction());
  FilterFactory ff=CommonFactoryFinder.getFilterFactory(null);
  VersionedFIDMapper mapper=(VersionedFIDMapper)store.getFIDMapper(schema.getTypeName());
  return new FeatureDiffReaderImpl(store,getTransaction(),schema,r1,r2,mapper,mfids);
}
