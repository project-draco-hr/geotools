{
  if (jarPath.startsWith("file:")) {
    jarPath=jarPath.substring(5);
  }
  int pos=jarPath.indexOf(".jar!");
  if (pos <= 0) {
    throw new IllegalArgumentException("Not a valid jar path");
  }
  jarPath=jarPath.substring(0,pos + 4);
  File file=new File(jarPath);
  if (!file.exists()) {
    throw new IllegalArgumentException("File not found: " + file);
  }
  return new JarInputStream(new FileInputStream(file));
}
