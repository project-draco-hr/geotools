{
  Style style=STYLE_FACTORY.createStyle();
  style.featureTypeStyles().addAll(featureTypeStyles);
  featureTypeStyles.clear();
  FeatureLayer singleGroupLayer=buildNewFeatureLayer(layer,style);
  if (groupId == null) {
    splitLayers.add(singleGroupLayer);
  }
 else   if (previousGroup != null && groupId.equals(previousGroup.getGroupId())) {
    previousGroup.addLayer(singleGroupLayer);
  }
 else   if (groupId != null) {
    ZGroupLayer newZGroup=new ZGroupLayer(groupId,singleGroupLayer);
    splitLayers.add(newZGroup);
  }
}
