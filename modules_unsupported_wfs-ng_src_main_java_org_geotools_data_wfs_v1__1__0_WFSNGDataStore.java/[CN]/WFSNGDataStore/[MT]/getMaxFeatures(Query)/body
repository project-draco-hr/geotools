{
  int maxFeaturesDataStoreLimit=getMaxFeatures().intValue();
  int queryMaxFeatures=query.getMaxFeatures();
  int maxFeatures=Query.DEFAULT_MAX;
  if (Query.DEFAULT_MAX != queryMaxFeatures) {
    maxFeatures=queryMaxFeatures;
  }
  if (maxFeaturesDataStoreLimit > 0) {
    maxFeatures=Math.min(maxFeaturesDataStoreLimit,maxFeatures);
  }
  return maxFeatures;
}
