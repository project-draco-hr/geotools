{
  int type=DataBuffer.TYPE_FLOAT;
  final NumberRange<?> range=getRange();
  final Class<?> rt=range.getElementClass();
  if (Byte.class.equals(rt) || Short.class.equals(rt) || Integer.class.equals(rt)) {
    final int min=((Number)range.getMinValue()).intValue();
    final int max=((Number)range.getMaxValue()).intValue();
    if (min >= 0) {
      if (max < 0x100) {
        type=DataBuffer.TYPE_BYTE;
      }
 else       if (max < 0x10000) {
        type=DataBuffer.TYPE_USHORT;
      }
 else {
        type=DataBuffer.TYPE_INT;
      }
    }
 else     if (min >= Short.MIN_VALUE && max <= Short.MAX_VALUE) {
      type=DataBuffer.TYPE_SHORT;
    }
 else {
      type=DataBuffer.TYPE_INT;
    }
  }
  return getColorModel(visibleBand,numBands,type);
}
