{
  Category category=last;
  if (!(value >= category.minimum && value <= category.maximum) && Double.doubleToRawLongBits(value) != Double.doubleToRawLongBits(category.minimum)) {
    category=getCategory(value);
    if (category == null) {
      throw new TransformException(Errors.format(ErrorKeys.NO_CATEGORY_FOR_VALUE_$1,value));
    }
    last=category;
  }
  return category.transform.derivative(value);
}
