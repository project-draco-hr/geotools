{
  final String localName=typeInfo.getFeatureTypeName();
  final String typeName=query.getTypeName();
  if (typeName != null && !localName.equals(typeName)) {
    throw new IllegalArgumentException("Wrong type name: " + typeName + " (this is "+ localName+ ")");
  }
  Query namedQuery=new Query(query);
  namedQuery.setTypeName(localName);
  return namedQuery;
}
