{
  if (getTransaction() == null || Transaction.AUTO_COMMIT.equals(getTransaction())) {
    return super.getCurrentVersion();
  }
  try {
    final Name typeName=this.type.getName();
    Repository repository=dataStore.getRepository();
    WorkingTree workingTree=repository.getWorkingTree();
    RevTree typeTree=workingTree.getStagedVersion(typeName);
    return typeTree;
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
