{
  final Id versionFilter=VersionFilters.getVersioningFilter(filter);
  if (versionFilter == null) {
    return;
  }
  final Repository repository=dataStore.getRepository();
  GeoGIT ggit=new GeoGIT(repository);
  VersionQuery query=new VersionQuery(ggit,getSchema().getName());
  for (  Identifier id : versionFilter.getIdentifiers()) {
    ResourceId rid=(ResourceId)id;
    List<Ref> requested;
    List<Ref> current;
    try {
      requested=Lists.newArrayList(query.get(rid));
      current=Lists.newArrayList(query.get(new ResourceIdImpl(rid.getID(),null)));
    }
 catch (    Exception e) {
      throw new RuntimeException(e);
    }
    if (!current.equals(requested)) {
      throw new IllegalArgumentException("Requested resource id filter doesn't match curent version for feature " + rid.getID());
    }
  }
}
