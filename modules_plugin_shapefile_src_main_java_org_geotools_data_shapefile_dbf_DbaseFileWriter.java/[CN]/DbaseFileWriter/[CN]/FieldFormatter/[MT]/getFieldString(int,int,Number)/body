{
  buffer.delete(0,buffer.length());
  if (n != null) {
    int expRoom=size - decimalPlaces;
    int exponent=Math.getExponent(n.doubleValue());
    if (exponent > expRoom) {
      buffer.append(n.doubleValue());
    }
 else {
      numFormat.setMaximumFractionDigits(decimalPlaces);
      numFormat.setMinimumFractionDigits(decimalPlaces);
      numFormat.format(n,buffer,new FieldPosition(NumberFormat.INTEGER_FIELD));
    }
  }
  int diff=size - buffer.length();
  if (diff > 0) {
    buffer.insert(0,emptyString.substring(0,diff));
  }
 else {
    buffer.setLength(size);
  }
  return buffer.toString();
}
