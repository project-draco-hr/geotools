{
  URI uri;
  try {
    uri=url.toURI();
  }
 catch (  URISyntaxException e) {
    try {
      uri=new URI(url.getProtocol(),url.getUserInfo(),url.getHost(),url.getPort(),url.getPath(),url.getQuery(),url.getRef());
    }
 catch (    URISyntaxException e1) {
      throw new IllegalArgumentException("broken URL: " + url);
    }
  }
  return new File(uri);
}
