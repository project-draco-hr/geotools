{
  if (!g1.equals(g2)) {
    return false;
  }
  int dim1=coordinateDimension(g1);
  int dim2=coordinateDimension(g2);
  if (dim1 != dim2) {
    return false;
  }
  if (dim1 == 2) {
    return true;
  }
  List<CoordinateSequence> sequences1=CoordinateSequenceCollector.find(g1);
  List<CoordinateSequence> sequences2=CoordinateSequenceCollector.find(g2);
  if (sequences1.size() != sequences2.size()) {
    return false;
  }
  CoordinateSequenceComparator comparator=new CoordinateSequenceComparator();
  for (int i=0; i < sequences1.size(); i++) {
    CoordinateSequence cs1=sequences1.get(i);
    CoordinateSequence cs2=sequences2.get(i);
    if (comparator.compare(cs1,cs2) != 0) {
      return false;
    }
  }
  return true;
}
