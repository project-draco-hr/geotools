{
  BufferedImage scaledImage=null;
  int imageType=image.getType();
  if ((imageType == BufferedImage.TYPE_BYTE_BINARY || imageType == BufferedImage.TYPE_BYTE_INDEXED) && (image.getColorModel() instanceof IndexColorModel))   scaledImage=new BufferedImage((int)Math.floor(image.getWidth() * rescaleX),(int)Math.floor(image.getHeight() * rescaleY),image.getType(),(IndexColorModel)image.getColorModel());
 else   scaledImage=new BufferedImage((int)Math.floor(image.getWidth() * rescaleX),(int)Math.floor(image.getHeight() * rescaleY),image.getType());
  final Graphics2D g2D=(Graphics2D)scaledImage.getGraphics();
  g2D.addRenderingHints(getRenderingHints());
  g2D.drawImage(image,AffineTransform.getScaleInstance(rescaleX,rescaleY),null);
  return scaledImage;
}
