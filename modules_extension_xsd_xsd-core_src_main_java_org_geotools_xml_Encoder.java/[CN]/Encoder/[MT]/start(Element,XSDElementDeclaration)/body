{
  String uri, local, qName;
  if (element.getLocalName() != null) {
    uri=element.getNamespaceURI();
    local=element.getLocalName();
  }
 else {
    local=element.getNodeName();
    if (local.contains(":")) {
      String[] split=local.split(":");
      local=split[1];
      uri=namespaces.getURI(split[0]);
    }
 else {
      uri=null;
    }
  }
  qName=local;
  NamespaceSupport namespaces=this.namespaces;
  if (namespaceAware && (declaration == null || declaration.isGlobal() || declaration.getSchema() == null || declaration.getSchema().getElementFormDefault() == XSDForm.QUALIFIED_LITERAL)) {
    uri=(uri != null) ? uri : namespaces.getURI("");
    qName=namespaces.getPrefix(uri) + ":" + qName;
  }
 else {
    uri="";
  }
  DOMAttributes atts=new DOMAttributes(element.getAttributes(),namespaces);
  serializer.startElement(uri,local,qName,atts);
  for (int i=0; i < element.getChildNodes().getLength(); i++) {
    Node node=(Node)element.getChildNodes().item(i);
    if (node instanceof Text) {
      char[] ch=((Text)node).getData().toCharArray();
      serializer.characters(ch,0,ch.length);
    }
  }
  for (int i=0; i < element.getChildNodes().getLength(); i++) {
    Node node=(Node)element.getChildNodes().item(i);
    if (node instanceof Element) {
      Element child=(Element)node;
      start(child,declaration != null ? Schemas.getChildElementDeclaration(declaration,new QName(child.getNamespaceURI(),child.getNodeName())) : null);
      end(child);
    }
  }
  this.namespaces.pushContext();
  if (uri != null) {
    this.namespaces.declarePrefix("",uri);
  }
}
