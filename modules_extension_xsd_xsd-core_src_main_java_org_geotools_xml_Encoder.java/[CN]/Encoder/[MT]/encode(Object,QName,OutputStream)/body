{
  if (inline) {
    String msg="Must use 'encode(Object,QName,ContentHandler)' when inline flag is set";
    throw new IllegalStateException(msg);
  }
  SAXTransformerFactory txFactory=(SAXTransformerFactory)SAXTransformerFactory.newInstance();
  TransformerHandler xmls;
  try {
    xmls=txFactory.newTransformerHandler();
  }
 catch (  TransformerConfigurationException e) {
    throw new IOException(e);
  }
  xmls.getTransformer().setOutputProperties(outputProps);
  xmls.getTransformer().setOutputProperty(OutputKeys.METHOD,"xml");
  xmls.setResult(new StreamResult(out));
  try {
    encode(object,name,xmls);
  }
 catch (  SAXException e) {
    if (e.getException() != null && e.getCause() == null) {
      e.initCause(e.getException());
    }
    throw (IOException)new IOException().initCause(e);
  }
}
