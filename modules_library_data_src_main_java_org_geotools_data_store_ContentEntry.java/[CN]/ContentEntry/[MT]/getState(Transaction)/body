{
  if (state.containsKey(transaction)) {
    return state.get(transaction);
  }
 else {
    ContentState auto=state.get(Transaction.AUTO_COMMIT);
    ContentState copy=(ContentState)auto.copy();
    copy.setTransaction(transaction != null ? transaction : Transaction.AUTO_COMMIT);
    state.put(transaction,copy);
    return copy;
  }
}
