{
  String yaml="feature-styles: \n" + "- name: name\n" + "  rules:\n"+ "  - zoom: (0,0)\n"+ "  - zoom: (1,1)\n"+ "  - zoom: (2,2)\n"+ "  - zoom: (3,3)\n"+ "  - zoom: (4,4)\n"+ "  - zoom: (5,5)\n"+ "  - zoom: (6,6)\n"+ "  - zoom: (7,7)\n"+ "  - zoom: (8,8)\n"+ "  - zoom: (9,9)\n"+ "  - zoom: (10,10)\n"+ "  - zoom: (11,11)\n"+ "  - zoom: (12,12)\n"+ "  - zoom: (13,13)\n"+ "  - zoom: (14,14)\n"+ "  - zoom: (15,15)\n"+ "  - zoom: (16,16)\n"+ "  - zoom: (17,17)\n"+ "  - zoom: (18,18)\n"+ "  - zoom: (19,19)\n";
  double[] googlePixelSizes={156543.0339280410,78271.51696402048,39135.75848201023,19567.87924100512,9783.939620502561,4891.969810251280,2445.984905125640,1222.992452562820,611.4962262814100,305.7481131407048,152.8740565703525,76.43702828517624,38.21851414258813,19.10925707129406,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,0.5971642834779395,0.29858214173896974,0.14929107086948487};
  double INCHES_PER_METRE=39.3701;
  double OGC_DPI=90;
  double scaleDenominators[]=new double[googlePixelSizes.length];
  for (int i=0; i < googlePixelSizes.length; i++) {
    scaleDenominators[i]=OGC_DPI * INCHES_PER_METRE * googlePixelSizes[i];
  }
  StyledLayerDescriptor sld=Ysld.parse(yaml);
  FeatureTypeStyle fs=SLD.defaultStyle(sld).featureTypeStyles().get(0);
  for (int i=0; i < googlePixelSizes.length; i++) {
    scaleDenominators[i]=OGC_DPI * INCHES_PER_METRE * googlePixelSizes[i];
  }
  assertThat(fs.rules().size(),is(20));
  assertThat(fs.rules().get(0),allOf(appliesToScale(scaleDenominators[0]),not(appliesToScale(scaleDenominators[1]))));
  assertThat(fs.rules().get(19),allOf(appliesToScale(scaleDenominators[19]),not(appliesToScale(scaleDenominators[18]))));
  for (int i=1; i < 19; i++) {
    assertThat(fs.rules().get(i),describedAs("rule applies only to level %0 (%1)",allOf(appliesToScale(scaleDenominators[i]),not(appliesToScale(scaleDenominators[i + 1])),not(appliesToScale(scaleDenominators[i + -1]))),i,scaleDenominators[i]));
  }
}
