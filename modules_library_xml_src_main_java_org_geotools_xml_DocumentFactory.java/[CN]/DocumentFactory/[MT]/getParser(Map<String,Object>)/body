{
  SAXParserFactory spf=SAXParserFactory.newInstance();
  spf.setNamespaceAware(true);
  spf.setValidating(false);
  try {
    if (hints != null && hints.containsKey(DISABLE_EXTERNAL_ENTITIES) && Boolean.TRUE.equals(hints.get(DISABLE_EXTERNAL_ENTITIES))) {
      spf.setFeature("http://apache.org/xml/features/disallow-doctype-decl",true);
      spf.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd",false);
      spf.setFeature("http://xml.org/sax/features/external-general-entities",false);
      spf.setFeature("http://xml.org/sax/features/external-parameter-entities",false);
    }
    SAXParser sp=spf.newSAXParser();
    return sp;
  }
 catch (  ParserConfigurationException e) {
    throw new SAXException(e);
  }
}
