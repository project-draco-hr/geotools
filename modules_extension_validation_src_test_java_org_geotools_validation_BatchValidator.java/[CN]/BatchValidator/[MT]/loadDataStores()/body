{
  String dsIds=dataStoreProp.getProperty("DataStoreIds");
  String[] ids=dsIds.split(",");
  Map result=new HashMap();
  for (int i=0; i < ids.length; i++) {
    ids[i]=ids[i].trim();
    Map m=new HashMap();
    String tmp=dataStoreProp.getProperty(ids[i] + ".Params");
    String[] params=tmp.split(",");
    for (int j=0; j < params.length; j++) {
      String[] vals=params[j].split("=");
      if (vals.length == 2) {
        m.put(vals[0].trim(),vals[1].trim());
      }
 else {
        System.err.println("DataStore " + ids[i] + " incured an error loading a parameter.");
        System.err.println("This DataStore may not be loaded correctly.");
        System.err.println("Parameters should be specified in a comma delimited list key=value");
        System.err.println("You specified:" + tmp);
      }
    }
    DataStore dataStore=null;
    try {
      dataStore=DataStoreFinder.getDataStore(m);
    }
 catch (    Throwable ex) {
      ex.printStackTrace();
      System.err.println("DataStore " + ids[i] + " incured an error and will not be used.");
    }
    if (dataStore != null) {
      result.put(ids[i],dataStore);
    }
 else {
      System.err.println("DataStore " + ids[i] + " incured an error and will not be used.");
    }
  }
  return result;
}
