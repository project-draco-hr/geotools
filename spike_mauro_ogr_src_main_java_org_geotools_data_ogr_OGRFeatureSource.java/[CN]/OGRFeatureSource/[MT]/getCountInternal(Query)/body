{
  OGRFilterTranslator filterTx=new OGRFilterTranslator(getSchema(),query.getFilter());
  if (Filter.EXCLUDE.equals(filterTx.getFilter())) {
    return 0;
  }
 else   if (!filterTx.isFilterFullySupported()) {
    return -1;
  }
 else {
    Pointer dataSource=null;
    Pointer layer=null;
    try {
      String typeName=getEntry().getTypeName();
      dataSource=getDataStore().openOGRDataSource(false);
      layer=getDataStore().openOGRLayer(dataSource,typeName);
      setLayerFilters(layer,filterTx);
      return OGR_L_GetFeatureCount(layer,0);
    }
  finally {
      OGRUtils.releaseLayer(layer);
      OGRUtils.releaseDataSource(dataSource);
    }
  }
}
