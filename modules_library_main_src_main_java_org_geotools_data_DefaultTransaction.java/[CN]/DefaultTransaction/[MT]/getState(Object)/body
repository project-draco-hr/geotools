{
  if (stateLookup == null) {
    throw new IllegalStateException("Transaction has been closed");
  }
  return (State)stateLookup.get(key);
}
