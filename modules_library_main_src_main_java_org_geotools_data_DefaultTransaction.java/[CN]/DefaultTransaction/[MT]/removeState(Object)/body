{
  if (stateLookup == null) {
    throw new IllegalStateException("Transaction has been closed");
  }
  if (stateLookup.containsKey(key)) {
    State state=(State)stateLookup.remove(key);
    state.setTransaction(null);
  }
 else {
    throw new IllegalArgumentException("Transaction does not no anything about key:" + key + ". Has this key already been removed?");
  }
}
