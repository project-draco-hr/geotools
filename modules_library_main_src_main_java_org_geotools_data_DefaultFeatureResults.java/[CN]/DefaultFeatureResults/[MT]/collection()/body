{
  try {
    DefaultFeatureCollection collection=new DefaultFeatureCollection(null,null);
    FeatureReader<SimpleFeatureType,SimpleFeature> reader=reader();
    try {
      while (reader.hasNext()) {
        collection.add(reader.next());
      }
    }
  finally {
      reader.close();
    }
    return collection;
  }
 catch (  org.opengis.feature.IllegalAttributeException e) {
    throw new DataSourceException("Could not read feature ",e);
  }
}
