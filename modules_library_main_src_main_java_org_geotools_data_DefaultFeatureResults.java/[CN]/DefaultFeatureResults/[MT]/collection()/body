{
  try {
    SimpleFeatureCollection collection=FeatureCollections.newCollection();
    FeatureReader<SimpleFeatureType,SimpleFeature> reader=reader();
    try {
      while (reader.hasNext()) {
        collection.add(reader.next());
      }
    }
  finally {
      reader.close();
    }
    return collection;
  }
 catch (  IllegalAttributeException e) {
    throw new DataSourceException("Could not read feature ",e);
  }
}
