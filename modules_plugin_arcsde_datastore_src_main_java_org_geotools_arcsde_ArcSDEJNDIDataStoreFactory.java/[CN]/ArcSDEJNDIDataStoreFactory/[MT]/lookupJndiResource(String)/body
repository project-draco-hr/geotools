{
  if (jndiName == null) {
    throw new IOException("Missing " + JNDI_REFNAME.description);
  }
  final Context ctx;
  try {
    ctx=GeoTools.getInitialContext(GeoTools.getDefaultHints());
  }
 catch (  NamingException e) {
    throw new RuntimeException(e);
  }
  Object lookup=null;
  try {
    lookup=ctx.lookup(jndiName);
  }
 catch (  NamingException e1) {
    try {
      if (jndiName.startsWith(J2EE_ROOT_CONTEXT) == false) {
        lookup=ctx.lookup(J2EE_ROOT_CONTEXT + jndiName);
        LOGGER.warning("Using " + J2EE_ROOT_CONTEXT + jndiName+ " instead of "+ jndiName+ " would avoid an unnecessary JNDI lookup");
      }
    }
 catch (    NamingException e2) {
    }
  }
  if (lookup == null) {
    throw new IOException("Cannot find JNDI data source: " + jndiName);
  }
  return lookup;
}
