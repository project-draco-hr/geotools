{
  AttributeType at=new AttributeTypeImpl(new NameImpl("String"),String.class,false,false,Collections.EMPTY_LIST,null,null);
  AttributeDescriptor descr1=new AttributeDescriptorImpl(at,new NameImpl("att1"),0,1,false,null);
  AttributeDescriptor descr2=new AttributeDescriptorImpl(at,new NameImpl("att2"),0,1,false,null);
  AttributeDescriptor descr3=new AttributeDescriptorImpl(at,new NameImpl("att3"),1,1,false,null);
  AttributeDescriptor descr4=new AttributeDescriptorImpl(at,new NameImpl("att4"),1,1,false,null);
  SimpleFeatureTypeBuilder tb=new SimpleFeatureTypeBuilder();
  tb.setName("type");
  tb.add(descr1);
  tb.add(descr2);
  tb.add(descr3);
  tb.add(descr4);
  SimpleFeatureType type=tb.buildFeatureType();
  PropertyName propName1=ff.property("att1");
  PropertyName propName2=ff.property("att2");
  PropertyName propName3=ff.property("att3");
  PropertyName propName4=ff.property("att4");
  List<PropertyName> list=new ArrayList<PropertyName>();
  list.add(propName1);
  list.add(propName4);
  List<PropertyName> list2=DataUtilities.addMandatoryProperties(type,list);
  assertTrue(list2.contains(propName1));
  assertTrue(!list2.contains(propName2));
  assertTrue(list2.contains(propName3));
  assertTrue(list2.contains(propName4));
  assertEquals(3,list2.size());
}
