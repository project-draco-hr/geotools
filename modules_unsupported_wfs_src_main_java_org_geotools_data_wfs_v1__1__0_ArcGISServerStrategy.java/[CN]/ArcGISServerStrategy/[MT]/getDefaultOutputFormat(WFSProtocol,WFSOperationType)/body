{
  try {
    return super.getDefaultOutputFormat(wfs,op);
  }
 catch (  IllegalArgumentException e) {
    Set<String> supportedOutputFormats=wfs.getSupportedGetFeatureOutputFormats();
    Iterator<String> it=supportedOutputFormats.iterator();
    while (it.hasNext()) {
      String outputFormat=it.next();
      if (outputFormat != null && outputFormat.toLowerCase().startsWith(DEFAULT_OUTPUT_FORMAT.toLowerCase())) {
        return outputFormat;
      }
    }
    throw new IllegalArgumentException("Server does not support '" + DEFAULT_OUTPUT_FORMAT + "' output format: "+ supportedOutputFormats);
  }
}
