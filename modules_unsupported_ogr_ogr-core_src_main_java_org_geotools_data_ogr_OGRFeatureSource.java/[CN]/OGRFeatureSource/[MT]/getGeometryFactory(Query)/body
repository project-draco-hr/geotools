{
  Hints hints=query.getHints();
  GeometryFactory gf=null;
  if (hints != null) {
    gf=(GeometryFactory)hints.get(Hints.JTS_GEOMETRY_FACTORY);
    if (gf == null) {
      CoordinateSequenceFactory csFactory=(CoordinateSequenceFactory)hints.get(Hints.JTS_COORDINATE_SEQUENCE_FACTORY);
      if (csFactory != null) {
        gf=new GeometryFactory(csFactory);
      }
    }
  }
  if (gf == null) {
    gf=new GeometryFactory();
  }
  return gf;
}
