{
  if (filter.getIDs().size() == 0) {
    return Filter.EXCLUDE;
  }
  Set<Identifier> validFids=new HashSet<Identifier>();
  for (  Identifier id : filter.getIdentifiers()) {
    if (id instanceof FeatureId || id instanceof GmlObjectId) {
      if (fidValidator.isValid((String)id.getID())) {
        validFids.add(id);
      }
    }
  }
  Filter validIdFilter;
  if (validFids.size() == 0) {
    validIdFilter=Filter.EXCLUDE;
  }
 else {
    validIdFilter=getFactory(extraData).id(validFids);
  }
  return validIdFilter;
}
