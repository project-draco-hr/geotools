{
  final byte bb[]=new byte[entries];
  for (int i=0; i < entries; i++)   bb[i]=(byte)i;
  final IndexColorModel icm=new IndexColorModel(8,entries,bb,bb,bb,bb);
  final WritableRaster raster=RasterFactory.createWritableRaster(icm.createCompatibleSampleModel(512,512),null);
  for (int i=raster.getMinX(); i < raster.getMinX() + raster.getWidth(); i++)   for (int j=raster.getMinY(); j < raster.getMinY() + raster.getHeight(); j++)   raster.setSample(i,j,0,(i + j) / 32);
  return new BufferedImage(icm,raster,false,null);
}
