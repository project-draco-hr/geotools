{
  assertTrue("Assertions should be enabled.",ImageWorker.class.desiredAssertionStatus());
  if (ImageWorker.CS_PYCC == null) {
    System.out.println("testYCbCr disabled since we are unable to locate the YCbCr color profile");
    return;
  }
  ImageWorker worker=new ImageWorker(getSyntheticRGB(false));
  RenderedImage image=worker.getRenderedImage();
  assertNoData(image,null);
  assertTrue(image.getColorModel() instanceof ComponentColorModel);
  assertTrue(!image.getColorModel().hasAlpha());
  int sample=image.getTile(0,0).getSample(0,0,2);
  assertEquals(0,sample);
  assertFalse(worker.isColorSpaceYCbCr());
  worker.forceColorSpaceYCbCr();
  assertTrue(worker.isColorSpaceYCbCr());
  worker.forceColorSpaceRGB();
  assertFalse(worker.isColorSpaceYCbCr());
  assertTrue(worker.isColorSpaceRGB());
  worker.forceBitmaskIndexColorModel();
  image=worker.getRenderedImage();
  assertNoData(image,null);
  assertTrue(image.getColorModel() instanceof IndexColorModel);
  assertTrue(!image.getColorModel().hasAlpha());
  assertFalse(worker.isColorSpaceYCbCr());
  worker.forceColorSpaceYCbCr();
  assertTrue(worker.isColorSpaceYCbCr());
  worker.forceColorSpaceRGB();
  assertFalse(worker.isColorSpaceYCbCr());
  assertTrue(worker.isColorSpaceRGB());
  worker=new ImageWorker(getSyntheticRGB(true));
  image=worker.getRenderedImage();
  assertNoData(image,null);
  assertTrue(image.getColorModel() instanceof DirectColorModel);
  assertTrue(!image.getColorModel().hasAlpha());
  sample=image.getTile(0,0).getSample(0,0,2);
  assertEquals(0,sample);
  assertFalse(worker.isColorSpaceYCbCr());
  worker.forceColorSpaceYCbCr();
  assertTrue(worker.isColorSpaceYCbCr());
  worker.forceColorSpaceRGB();
  assertFalse(worker.isColorSpaceYCbCr());
  assertTrue(worker.isColorSpaceRGB());
}
