{
  String collectionText=collectionText(true,true,false,false,true);
  SimpleFeatureType ftype=fjson.readFeatureCollectionSchema((strip(collectionText)),true);
  System.out.println("type: " + ftype);
  assertEquals(4,ftype.getAttributeCount());
  assertNotNull(ftype.getDescriptor("int"));
  assertEquals(Long.class,ftype.getDescriptor(1).getType().getBinding());
  assertNotNull(ftype.getDescriptor("double"));
  assertEquals(Double.class,ftype.getDescriptor(2).getType().getBinding());
  assertNotNull(ftype.getDescriptor("string"));
  assertEquals(String.class,ftype.getDescriptor(3).getType().getBinding());
  assertNotNull(ftype.getCoordinateReferenceSystem());
  fjson.setFeatureType(ftype);
  SimpleFeatureCollection fcol=(SimpleFeatureCollection)fjson.readFeatureCollection((strip(collectionText)));
  assertEquals(ftype,fcol.getSchema());
  FeatureIterator it=fcol.features();
  while (it.hasNext()) {
    assertEquals(ftype,it.next().getType());
  }
}
