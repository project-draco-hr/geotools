{
  ReferencedEnvelope extent=new ReferencedEnvelope();
  for (  SimpleFeature feature : features) {
    if (feature == null)     continue;
    ReferencedEnvelope bbox=ReferencedEnvelope.reference(feature.getBounds());
    if (bbox == null || bbox.isEmpty() || bbox.isNull())     continue;
    extent.expandToInclude(bbox);
  }
  return extent;
}
