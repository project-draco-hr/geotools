{
  if (next != null && next != FeatureQueue.END_MARKER) {
    return true;
  }
  checkException();
  try {
    while (next == null || next == FeatureQueue.END_MARKER) {
      if (queue.isDone()) {
        return false;
      }
      next=queue.take();
      checkException();
    }
  }
 catch (  InterruptedException ie) {
    throw new IOException("Error while waiting for next feature",ie);
  }
  return true;
}
