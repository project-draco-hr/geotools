{
  WebMapServer wms=new WebMapServer(featureURL);
  WMSCapabilities caps=wms.getCapabilities();
  Layer layer=(Layer)caps.getLayerList().get(0);
  CoordinateReferenceSystem crs=CRS.decode("EPSG:4326");
  GeneralEnvelope envelope=wms.getEnvelope(layer,crs);
  assertEquals(envelope.getMinimum(0),-172.367,0.0);
  assertEquals(envelope.getMinimum(1),35.6673,0.0);
  assertEquals(envelope.getMaximum(0),-11.5624,0.0);
  assertEquals(envelope.getMaximum(1),83.8293,0.0);
  crs=CRS.decode("EPSG:42304");
  envelope=wms.getEnvelope(layer,crs);
  assertEquals(envelope.getMinimum(0),-2.2e+06,0.0);
  assertEquals(envelope.getMinimum(1),-712631,0.0);
  assertEquals(envelope.getMaximum(0),3.0728e+06,0.0);
  assertEquals(envelope.getMaximum(1),3.84e+06,0.0);
  layer=(Layer)caps.getLayerList().get(2);
  crs=CRS.decode("EPSG:4326");
  envelope=wms.getEnvelope(layer,crs);
  assertEquals(envelope.getMinimum(0),-178.838,0.0);
  assertEquals(envelope.getMinimum(1),31.8844,0.0);
  assertEquals(envelope.getMaximum(0),179.94,0.0);
  assertEquals(envelope.getMaximum(1),89.8254,0.0);
}
