{
  int count=features.size();
  float done=0;
  FeatureIterator fi=null;
  GeometryCollector collector=new GeometryCollector();
  try {
    fi=features.features();
    while (fi.hasNext()) {
      Geometry g=(Geometry)fi.next().getDefaultGeometryProperty().getValue();
      collector.add(g);
      done++;
      if (progressListener != null && done % 100 == 0) {
        progressListener.progress(done / count);
      }
    }
  }
  finally {
    if (fi != null) {
      fi.close();
    }
  }
  return collector.collect();
}
