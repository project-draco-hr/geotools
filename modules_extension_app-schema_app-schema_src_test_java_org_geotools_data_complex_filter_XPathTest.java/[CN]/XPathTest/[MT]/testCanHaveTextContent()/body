{
  SchemaIndex schemaIndex=reader.parse(getClass().getResource(COMPLEX_WITH_TEXT_CONTENT_SCHEMA_LOCATION));
  XSDElementDeclaration unrestrictedElDecl=schemaIndex.getElementDeclaration(new QName(URI,"unrestrictedEl"));
  assertNotNull(unrestrictedElDecl);
  XSDElementDeclaration restrictedElDecl=schemaIndex.getElementDeclaration(new QName(URI,"restrictedEl"));
  assertNotNull(restrictedElDecl);
  AppSchemaFeatureTypeRegistry typeRegistry=new AppSchemaFeatureTypeRegistry();
  typeRegistry.addSchemas(schemaIndex);
  Name unrestrictedTypeName=Types.typeName(URI,"UnrestrictedType");
  ComplexType unrestrictedType=(ComplexType)typeRegistry.getAttributeType(unrestrictedTypeName);
  assertNotNull(unrestrictedType);
  assertTrue(Types.canHaveTextContent(unrestrictedType));
  Name restrictedTypeName=Types.typeName(URI,"RestrictedType");
  ComplexType restrictedType=(ComplexType)typeRegistry.getAttributeType(restrictedTypeName);
  assertNotNull(restrictedType);
  assertFalse(Types.canHaveTextContent(restrictedType));
}
