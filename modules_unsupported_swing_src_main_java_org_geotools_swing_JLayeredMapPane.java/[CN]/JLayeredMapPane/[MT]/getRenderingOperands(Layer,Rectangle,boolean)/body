{
  LayerOperands op=operandLookup.get(layer);
  if (op == null) {
    op=new LayerOperands();
    operandLookup.put(layer,op);
  }
  if (op.image == null || recreate) {
    op.image=GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration().createCompatibleImage(r.width,r.height,Transparency.TRANSLUCENT);
    if (op.graphics != null) {
      op.graphics.dispose();
    }
    op.graphics=op.image.createGraphics();
    op.graphics.setBackground(getBackground());
  }
 else {
    op.graphics.setBackground(getBackground());
    op.graphics.clearRect(0,0,r.width,r.height);
  }
  if (op.renderer == null) {
    op.renderer=new StreamingRenderer();
  }
  return new RenderingOperands(layer,op.graphics,op.renderer);
}
