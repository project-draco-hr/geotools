{
  final InputStream dataStream=TestData.openStream(this,CUBEWERX_GOVUNITCE.DATA);
  TestHttpResponse httpResponse=new TestHttpResponse("text/xml; subtype=gml/3.1.1","UTF-8",dataStream);
  TestHttpProtocol mockHttp=new TestHttpProtocol(httpResponse);
  createTestProtocol(CUBEWERX_GOVUNITCE.CAPABILITIES,mockHttp);
  URL describeUrl=TestData.getResource(this,CUBEWERX_GOVUNITCE.SCHEMA);
  wfs.setDescribeFeatureTypeURLOverride(describeUrl);
  WFS_1_1_0_DataStore ds=new WFS_1_1_0_DataStore(wfs);
  Query query=new Query(CUBEWERX_GOVUNITCE.FEATURETYPENAME);
  CoordinateReferenceSystem otherCrs=CRS.decode(CUBEWERX_GOVUNITCE.URNCRS);
  query.setCoordinateSystem(otherCrs);
  FeatureReader<SimpleFeatureType,SimpleFeature> featureReader;
  featureReader=ds.getFeatureReader(query,Transaction.AUTO_COMMIT);
  assertNotNull(featureReader);
  assertTrue(featureReader instanceof ForceCoordinateSystemFeatureReader);
  assertEquals(GML2EncodingUtils.epsgCode(otherCrs),GML2EncodingUtils.epsgCode(featureReader.getFeatureType().getCoordinateReferenceSystem()));
  GetFeature request=wfs.getRequest();
  assertEquals("urn:ogc:def:crs:EPSG::3857",request.getSrsName());
}
