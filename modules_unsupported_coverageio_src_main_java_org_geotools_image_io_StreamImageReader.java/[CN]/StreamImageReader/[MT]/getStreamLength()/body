{
  final Object input=getInput();
  if (input instanceof ImageInputStream) {
    long length=((ImageInputStream)input).length();
    if (length >= 0) {
      length-=streamOrigin;
    }
    return length;
  }
  if (input instanceof File) {
    return ((File)input).length();
  }
  if (input instanceof URL) {
    return ((URL)input).openConnection().getContentLength();
  }
  if (input instanceof URLConnection) {
    return ((URLConnection)input).getContentLength();
  }
  return -1;
}
