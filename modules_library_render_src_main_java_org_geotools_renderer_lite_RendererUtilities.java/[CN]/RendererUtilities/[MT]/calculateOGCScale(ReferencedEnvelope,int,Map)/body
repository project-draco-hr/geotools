{
  if (envelope.getCoordinateReferenceSystem() instanceof GeographicCRS) {
    return (envelope.getWidth() * OGC_DEGREE_TO_METERS) / (imageWidth / getDpi(hints) * 0.0254);
  }
 else {
    return envelope.getWidth() / (imageWidth / getDpi(hints) * 0.0254);
  }
}
