{
  if (dbfindexes != null) {
    for (int i=0; i < dbfindexes.length; i++) {
      if (dbfindexes[i] == -1) {
        builder.add(geometry);
      }
 else {
        builder.add(row.read(dbfindexes[i]));
      }
    }
  }
 else   if (geometry != null) {
    builder.add(geometry);
  }
  String featureId=buildFeatureId(number);
  SimpleFeature feature=builder.buildFeature(featureId);
  if (filter != null) {
    if (!filter.evaluate(feature)) {
      return null;
    }
  }
  if (screenMap != null) {
    try {
      screenMap.checkAndSet(envelope);
    }
 catch (    TransformException e) {
      if (LOGGER.isLoggable(Level.FINE)) {
        LOGGER.log(Level.FINE,"Failed to set screenmap",e);
      }
    }
  }
  return feature;
}
