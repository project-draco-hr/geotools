{
  String format;
  Double number;
  try {
    format=getExpression(0).evaluate(feature,String.class);
  }
 catch (  Exception e) {
    throw new IllegalArgumentException("Filter Function problem for function dateFormat argument #0 - expected type String");
  }
  try {
    number=getExpression(1).evaluate(feature,Double.class);
  }
 catch (  Exception e) {
    throw new IllegalArgumentException("Filter Function problem for function dateFormat argument #1 - expected type java.util.Date");
  }
  DecimalFormatSymbols symbols=new DecimalFormatSymbols();
  if (params.size() > 2) {
    Character neg=getExpression(2).evaluate(feature,Character.class);
    symbols.setMinusSign(neg);
  }
  if (params.size() > 3) {
    Character dec=getExpression(3).evaluate(feature,Character.class);
    symbols.setDecimalSeparator(dec);
  }
  if (params.size() > 4) {
    Character grp=getExpression(4).evaluate(feature,Character.class);
    symbols.setGroupingSeparator(grp);
  }
  DecimalFormat numberFormat=new DecimalFormat(format,symbols);
  return numberFormat.format(number);
}
