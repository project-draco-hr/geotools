{
  int total=0;
  for (int i=0; i < sources.size(); i++) {
    RenderedImage image=(RenderedImage)sources.get(i);
    if (image.getColorModel() instanceof IndexColorModel) {
      total+=image.getColorModel().getNumComponents();
    }
 else {
      total+=image.getSampleModel().getNumBands();
    }
  }
  return total;
}
