{
  StringBuilder format=new StringBuilder("yyyy-MM-dd");
  if (strTime != null && !"".equals(strTime)) {
    format.append(" HH:mm:ss");
    if (strTime.contains(".")) {
      format.append(".SSS");
    }
  }
  TimeZone tz=null;
  if (timeZoneOffset != null && !"".equals(timeZoneOffset)) {
    if ("Z".equals(timeZoneOffset)) {
      timeZoneOffset="GMT+00:00";
    }
 else {
      timeZoneOffset="GMT" + timeZoneOffset;
    }
    tz=TimeZone.getTimeZone(timeZoneOffset);
  }
 else {
    tz=TimeZone.getDefault();
  }
  DateFormat formatter=new SimpleDateFormat(format.toString());
  formatter.setTimeZone(tz);
  Date date;
  if (!"".equals(strTime)) {
    date=formatter.parse(strDate + " " + strTime);
  }
 else {
    date=formatter.parse(strDate);
  }
  Literal literalDate=filterFactory.literal(date);
  return literalDate;
}
