{
  List<WFSResponseFactory> operationResponseFactories;
  operationResponseFactories=WFSExtensions.findResponseFactories(operation);
  List<String> outputFormats=new LinkedList<String>();
  for (  WFSResponseFactory factory : operationResponseFactories) {
    List<String> factoryFormats=factory.getSupportedOutputFormats();
    outputFormats.addAll(factoryFormats);
  }
  final boolean wfs1_0=Versions.v1_0_0.equals(serviceVersion);
  if (GET_FEATURE.equals(operation)) {
    for (    String preferred : wfs1_0 ? PREFFERRED_GETFEATURE_FORMATS_10 : PREFFERRED_GETFEATURE_FORMATS) {
      boolean hasFormat=outputFormats.remove(preferred);
      if (hasFormat) {
        outputFormats.add(0,preferred);
        break;
      }
    }
  }
  return outputFormats;
}
