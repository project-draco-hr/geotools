{
  for (int b=0; b < 3; b++) {
    final byte[] map=colormap[b];
    final byte[] luTable=lut[b >= lut.length ? 0 : b];
    final int mapSize=map.length;
    for (int i=0; i < mapSize; i++) {
      map[i]=luTable[(map[i] & 0xFF)];
    }
  }
}
