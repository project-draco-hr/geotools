{
  final SimpleFeatureCollection featureCollection=featureSource.getFeatures();
  FeatureVisitor visitor=new FeatureVisitor(){
    public void visit(    Feature feature){
      Geometry geom=(Geometry)feature.getDefaultGeometryProperty().getValue();
      if (geom != null && !geom.isValid()) {
        numInvalidGeometries++;
        System.out.println("Invalid Geoemtry: " + feature.getIdentifier());
      }
    }
  }
;
  final ProgressWindow progress=new ProgressWindow(null);
  progress.setTitle("Validating feature geometry");
  numInvalidGeometries=0;
  featureCollection.accepts(visitor,progress);
}
