{
  while (true) {
    final Reference ref;
    try {
      ref=(Reference)queue.remove();
    }
 catch (    InterruptedException e) {
      continue;
    }
    final Set<Palette> protectedPalettes=ref.palette.factory.protectedPalettes;
synchronized (protectedPalettes) {
      protectedPalettes.remove(ref.palette);
    }
  }
}
