{
  if (binding.getType() == null) {
    logger.fine("Binding: " + binding.getTarget() + " does not declare a target type");
    return;
  }
  if (!binding.getType().isAssignableFrom(object.getClass())) {
    Object converted=Converters.convert(object,binding.getType());
    if (converted != null) {
      object=converted;
    }
 else {
      logger.fine(object + "[ " + object.getClass()+ " ] is not of type "+ binding.getType());
      return;
    }
  }
  if (binding instanceof SimpleBinding) {
    SimpleBinding simple=(SimpleBinding)binding;
    try {
      encoding.setValue(simple.encode(object,encoding.getValue()));
    }
 catch (    Throwable t) {
      String msg="Encode failed for " + attribute.getName() + ". Cause: "+ t.getLocalizedMessage();
      throw new RuntimeException(msg,t);
    }
  }
}
