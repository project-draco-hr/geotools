{
  lookup=new HashMap<Object,Color>();
  try {
    UniqueVisitor visitor=new UniqueVisitor((Expression)params.get(0));
    collection.accepts(visitor,null);
    numColours=visitor.getUnique().size();
    hue=INITIAL_HUE;
    hueIncr=(1.0f - hue) / numColours;
  }
 catch (  Exception ex) {
    throw new IllegalStateException("Problem creating colour lookup",ex);
  }
}
