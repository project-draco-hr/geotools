{
  Coordinate[] coords=new Coordinate[5];
  coords[0]=new Coordinate(envelope.getMinX(),envelope.getMinY());
  coords[1]=new Coordinate(envelope.getMinX(),envelope.getMaxY());
  coords[2]=new Coordinate(envelope.getMaxX(),envelope.getMaxY());
  coords[3]=new Coordinate(envelope.getMaxX(),envelope.getMinY());
  coords[4]=new Coordinate(envelope.getMinX(),envelope.getMinY());
  LinearRing ring=null;
  GeometryFactory gfac=new GeometryFactory();
  try {
    ring=gfac.createLinearRing(coords);
  }
 catch (  TopologyException tex) {
    throw new IllegalFilterException(tex.toString());
  }
  Polygon polygon=gfac.createPolygon(ring,null);
  if (envelope instanceof ReferencedEnvelope) {
    ReferencedEnvelope refEnv=(ReferencedEnvelope)envelope;
    polygon.setUserData(refEnv.getCoordinateReferenceSystem());
  }
  return factory.literal(polygon);
}
