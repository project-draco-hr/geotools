{
  int dims=getShape().getDimension();
  Region mbr=(Region)getShape();
  tiles_number=new int[dims];
  double area=1;
  for (int i=0; i < dims; i++) {
    area*=(mbr.getHigh(i) - mbr.getLow(i));
  }
  tiles_size=Math.pow(area / gridsize,1d / dims);
  int newcapacity=1;
  for (int i=0; i < dims; i++) {
    int tmp;
    double dtmp=(mbr.getHigh(i) - mbr.getLow(i)) / tiles_size;
    tmp=(int)dtmp;
    if (tmp < dtmp) {
      tmp+=1;
    }
    tiles_number[i]=tmp;
    newcapacity*=tmp;
  }
  assert(newcapacity >= gridsize);
  childrenCapacity=newcapacity;
  children=new ArrayList<NodeIdentifier>(childrenCapacity);
}
