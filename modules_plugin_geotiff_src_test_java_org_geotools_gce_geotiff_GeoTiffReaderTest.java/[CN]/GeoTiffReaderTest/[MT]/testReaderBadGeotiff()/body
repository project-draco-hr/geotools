{
  final File noCrs=TestData.file(GeoTiffReaderTest.class,"no_crs.tif");
  final AbstractGridFormat format=new GeoTiffFormat();
  assertTrue(format.accepts(noCrs));
  GeoTiffReader reader=(GeoTiffReader)format.getReader(noCrs);
  CoordinateReferenceSystem crs=reader.getCrs();
  assertTrue(crs.toWKT().equalsIgnoreCase(DefaultEngineeringCRS.GENERIC_2D.toWKT()));
  GridCoverage2D coverage=reader.read(null);
  assertTrue(coverage.getCoordinateReferenceSystem().toWKT().equalsIgnoreCase(DefaultEngineeringCRS.GENERIC_2D.toWKT()));
  crs=CRS.decode("EPSG:32632",true);
  final Hints hint=new Hints();
  hint.put(Hints.DEFAULT_COORDINATE_REFERENCE_SYSTEM,crs);
  reader=new GeoTiffReader(noCrs,hint);
  GridCoverage2D coverage1=(GridCoverage2D)reader.read(null);
  assertNotNull(coverage1);
  assertNotNull(coverage1.getCoordinateReferenceSystem());
  assertEquals(CRS.lookupIdentifier(coverage1.getCoordinateReferenceSystem(),true),"EPSG:32632");
  reader.dispose();
  final File wldprjFile=TestData.file(GeoTiffReaderTest.class,"no_crs_no_envelope.tif");
  assertTrue(format.accepts(wldprjFile));
  reader=new GeoTiffReader(wldprjFile);
  GridCoverage2D coverage2=(GridCoverage2D)reader.read(null);
  assertNotNull(coverage2);
  assertNotNull(coverage2.getCoordinateReferenceSystem());
  assertEquals(CRS.lookupIdentifier(coverage2.getCoordinateReferenceSystem(),true),"EPSG:32632");
  reader.dispose();
  final File wldFile=TestData.file(GeoTiffReaderTest.class,"no_crs_no_envelope2.tif");
  assertTrue(format.accepts(wldFile));
  reader=new GeoTiffReader(wldFile,hint);
  GridCoverage2D coverage3=(GridCoverage2D)reader.read(null);
  assertNotNull(coverage3);
  assertNotNull(coverage3.getCoordinateReferenceSystem());
  assertEquals(CRS.lookupIdentifier(coverage3.getCoordinateReferenceSystem(),true),"EPSG:32632");
  reader.dispose();
  coverage1.dispose(true);
  coverage2.dispose(true);
  coverage3.dispose(true);
}
