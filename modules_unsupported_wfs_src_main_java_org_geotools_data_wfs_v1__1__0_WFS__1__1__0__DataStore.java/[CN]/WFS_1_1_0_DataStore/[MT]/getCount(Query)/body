{
  Filter[] filters=wfs.splitFilters(query.getFilter());
  Filter postFilter=filters[1];
  if (!Filter.INCLUDE.equals(postFilter)) {
    return -1;
  }
  query=createNewQuery(query,filters[0],filters[1]);
  WFSResponse response=executeGetFeatures(query,Transaction.AUTO_COMMIT,ResultType.HITS);
  Object process=WFSExtensions.process(this,response,mappedURIs);
  if (!(process instanceof GetFeatureParser)) {
    LOGGER.info("GetFeature with resultType=hits resulted in " + process);
  }
  int hits=((GetFeatureParser)process).getNumberOfFeatures();
  if (hits != -1 && getMaxFeatures().intValue() > 0) {
    hits=Math.min(hits,getMaxFeatures().intValue());
  }
  return hits;
}
