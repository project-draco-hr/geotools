{
synchronized (mutex) {
    SimpleFeature old=null;
    if (addedFeatures.containsKey(fid)) {
      old=(SimpleFeature)addedFeatures.get(fid);
      addedFeatures.remove(fid);
      addedFidList.remove(fid);
    }
 else {
      old=(SimpleFeature)modifiedFeatures.get(fid);
      modifiedFeatures.put(fid,TransactionStateDiff.NULL);
    }
    if (old != null) {
      spatialIndex.remove(ReferencedEnvelope.reference(old.getBounds()),old);
    }
  }
}
