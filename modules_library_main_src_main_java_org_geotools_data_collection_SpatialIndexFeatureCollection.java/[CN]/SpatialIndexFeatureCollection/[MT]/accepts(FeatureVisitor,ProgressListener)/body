{
  Envelope everything=new Envelope(Double.NEGATIVE_INFINITY,Double.POSITIVE_INFINITY,Double.NEGATIVE_INFINITY,Double.POSITIVE_INFINITY);
  final ProgressListener progress=listener != null ? listener : new NullProgressListener();
  progress.started();
  final float size=(float)size();
  index.query(everything,new ItemVisitor(){
    float count=0f;
    public void visitItem(    Object item){
      try {
        SimpleFeature feature=(SimpleFeature)item;
        visitor.visit(feature);
      }
 catch (      Throwable t) {
        progress.exceptionOccurred(t);
      }
 finally {
        progress.progress(count / size);
      }
    }
  }
);
  progress.complete();
}
