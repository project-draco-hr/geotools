{
  try {
    final IOFileFilter finalFilter=createGranuleFilterRules();
    numFiles=0;
    String harvestDirectory=runConfiguration.getParameter(Prop.HARVEST_DIRECTORY);
    String indexDirs=runConfiguration.getParameter(Prop.INDEXING_DIRECTORIES);
    if (harvestDirectory != null) {
      indexDirs=harvestDirectory;
    }
    String[] indexDirectories=indexDirs.split("\\s*,\\s*");
    for (    String indexingDirectory : indexDirectories) {
      indexingDirectory=Utils.checkDirectory(indexingDirectory,false);
      final File directoryToScan=new File(indexingDirectory);
      final Collection files=FileUtils.listFiles(directoryToScan,finalFilter,Boolean.parseBoolean(runConfiguration.getParameter(Prop.RECURSIVE)) ? TrueFileFilter.INSTANCE : FalseFileFilter.INSTANCE);
      numFiles+=files.size();
    }
    if (numFiles > 0) {
      final List<String> indexingDirectories=new ArrayList<String>(Arrays.asList(indexDirectories));
      @SuppressWarnings("unused") final MosaicDirectoryWalker walker=new MosaicDirectoryWalker(indexingDirectories,finalFilter);
    }
  }
 catch (  IOException e) {
    LOGGER.log(Level.SEVERE,e.getLocalizedMessage(),e);
  }
}
