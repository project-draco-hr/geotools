{
  if (success) {
    Indexer indexer=runConfiguration.getIndexer();
    boolean supportsEmpty=false;
    if (indexer != null) {
      supportsEmpty=IndexerUtils.getParameterAsBoolean(Prop.CAN_BE_EMPTY,indexer);
    }
    boolean haveConfigs=configurations != null && !configurations.isEmpty();
    if (haveConfigs || supportsEmpty) {
      Set<String> keys=null;
      int keySize=0;
      if (haveConfigs || !supportsEmpty) {
        keys=configurations.keySet();
        keySize=keys.size();
        final boolean useName=keySize > 1;
        for (        String key : keys) {
          MosaicConfigurationBean mosaicConfiguration=configurations.get(key);
          RasterManager manager=parentReader.getRasterManager(key);
          manager.initialize(supportsEmpty);
          createSampleImage(mosaicConfiguration,useName);
          fireEvent(Level.INFO,"Creating final properties file ",99.9);
          createPropertiesFiles(mosaicConfiguration);
        }
      }
      final String base=FilenameUtils.getName(parent.getAbsolutePath());
      if (supportsEmpty || keySize > 1 || (keySize > 0 && !base.equals(keys.iterator().next()))) {
        File mosaicFile=null;
        if (indexerFile.getAbsolutePath().endsWith("xml")) {
          mosaicFile=new File(indexerFile.getAbsolutePath().replace(Utils.INDEXER_XML,(base + ".xml")));
          FileUtils.copyFile(indexerFile,mosaicFile);
        }
 else         if (indexerFile.getAbsolutePath().endsWith("properties")) {
          mosaicFile=new File(indexerFile.getAbsolutePath().replace(Utils.INDEXER_PROPERTIES,(base + ".properties")));
          FileUtils.copyFile(indexerFile,mosaicFile);
        }
 else {
          final String source=runConfiguration.getParameter(Prop.ROOT_MOSAIC_DIR) + File.separatorChar + configurations.get(keys.iterator().next()).getName()+ ".properties";
          mosaicFile=new File(indexerFile.getAbsolutePath().replace(Utils.INDEXER_PROPERTIES,(base + ".properties")));
          FileUtils.copyFile(new File(source),mosaicFile);
        }
      }
      fireEvent(Level.FINE,"Done!!!",100);
    }
 else {
      fireEvent(Level.FINE,"Nothing to process!!!",100);
    }
  }
 else {
    fireEvent(Level.FINE,"Canceled!!!",100);
  }
  closeIndexObjects();
}
