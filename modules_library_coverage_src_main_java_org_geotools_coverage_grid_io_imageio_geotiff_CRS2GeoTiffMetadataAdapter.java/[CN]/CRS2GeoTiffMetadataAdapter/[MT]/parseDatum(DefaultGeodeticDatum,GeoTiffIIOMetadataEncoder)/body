{
  final int code=getEPSGCode(datum);
  if (GeoTiffIIOMetadataEncoder.isTiffUShort(code)) {
    metadata.addGeoShortParam(GeoTiffGCSCodes.GeogGeodeticDatumGeoKey,code);
    return;
  }
  metadata.addGeoShortParam(GeoTiffGCSCodes.GeogGeodeticDatumGeoKey,GeoTiffConstants.GTUserDefinedGeoKey);
  metadata.addGeoAscii(GeoTiffGCSCodes.GeogCitationGeoKey,datum.getName().getCode());
  parseSpheroid((DefaultEllipsoid)datum.getEllipsoid(),metadata);
}
