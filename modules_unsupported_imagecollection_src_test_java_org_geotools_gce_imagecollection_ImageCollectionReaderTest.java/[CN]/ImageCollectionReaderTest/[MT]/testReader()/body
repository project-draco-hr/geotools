{
  final File file=TestData.file(this,"sample");
  final String string="PATH='folder1/world.tif'";
  Filter filter=CQL.toFilter(string);
  final ImageCollectionReader reader=new ImageCollectionReader(file);
  final ParameterValue<GridGeometry2D> gg=AbstractGridFormat.READ_GRIDGEOMETRY2D.createValue();
  final GeneralEnvelope envelope=new GeneralEnvelope(new Rectangle(1000,-800,1000,400));
  envelope.setCoordinateReferenceSystem(CartesianAuthorityFactory.GENERIC_2D);
  final Rectangle rasterArea=new Rectangle(0,0,500,200);
  final GridEnvelope2D range=new GridEnvelope2D(rasterArea);
  gg.setValue(new GridGeometry2D(range,envelope));
  final ParameterValue<Filter> ff=ImageCollectionFormat.FILTER.createValue();
  ff.setValue(filter);
  final ParameterValue<double[]> background=ImageCollectionFormat.BACKGROUND_VALUES.createValue();
  background.setValue(new double[]{0});
  GeneralParameterValue[] params=new GeneralParameterValue[]{ff,gg,background};
  if (reader != null) {
    GridCoverage2D coverage=(GridCoverage2D)reader.read(params);
    RenderedImage image=coverage.getRenderedImage();
    assertTrue(image.getWidth() == 500);
    assertTrue(image.getHeight() == 200);
  }
}
