{
  Coordinate[] coords=geometry.getCoordinates();
  if (coords.length > coordGridX.length) {
    int n=coords.length / COORD_GRID_CHUNK_SIZE + 1;
    coordGridX=new int[n * COORD_GRID_CHUNK_SIZE];
    coordGridY=new int[n * COORD_GRID_CHUNK_SIZE];
  }
  for (int n=0; n < coords.length; n++) {
    coordGridX[n]=(int)(((coords[n].x - extent.getMinX()) / cellsize));
    coordGridY[n]=(int)(((coords[n].y - extent.getMinY()) / cellsize));
    coordGridY[n]=image.getHeight() - coordGridY[n];
  }
  if (geometry.getClass().equals(Polygon.class)) {
    graphics.fillPolygon(coordGridX,coordGridY,coords.length);
  }
 else   if (geometry.getClass().equals(LinearRing.class)) {
    graphics.drawPolyline(coordGridX,coordGridY,coords.length);
  }
 else   if (geometry.getClass().equals(LineString.class)) {
    graphics.drawPolyline(coordGridX,coordGridY,coords.length);
  }
 else   if (geometry.getClass().equals(Point.class)) {
    graphics.drawPolyline(coordGridX,coordGridY,coords.length);
  }
}
