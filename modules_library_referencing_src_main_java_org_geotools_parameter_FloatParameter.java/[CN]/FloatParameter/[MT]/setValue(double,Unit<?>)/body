{
  ensureNonNull("unit",unit);
  @SuppressWarnings("unchecked") final ParameterDescriptor<Double> descriptor=(ParameterDescriptor)this.descriptor;
  final Unit<?> thisUnit=descriptor.getUnit();
  if (thisUnit == null) {
    throw unitlessParameter(descriptor);
  }
  final int expectedID=Parameter.getUnitMessageID(thisUnit);
  if (Parameter.getUnitMessageID(unit) != expectedID) {
    throw new IllegalArgumentException(Errors.format(expectedID,unit));
  }
  value=unit.getConverterTo(thisUnit).convert(value);
  this.value=Parameter.ensureValidValue(descriptor,Double.valueOf(value));
}
