{
  if (isNull(expr))   return null;
  List<Expression> subExpressions=Util.splitConcatenates(expr);
  StringBuilder builder=new StringBuilder();
  for (  Expression subExpr : subExpressions) {
    if (isNull(subExpr)) {
    }
 else     if (subExpr instanceof Literal) {
      builder.append(escapeForEmbededCQL(((Literal)subExpr).getValue().toString()));
    }
 else {
      builder.append("${").append(escapeForEmbededCQL(ECQL.toCQL(subExpr))).append("}");
    }
  }
  Object result=Util.makeNumberIfPossible(builder.toString());
  return result;
}
