{
  BufferedImage image=new BufferedImage(256,256,BufferedImage.TYPE_4BYTE_ABGR);
  Graphics g=image.getGraphics();
  g.setColor(Color.WHITE);
  g.fillRect(0,0,10,10);
  g.setColor(Color.RED);
  g.fillRect(10,0,10,10);
  g.setColor(Color.BLUE);
  g.fillRect(20,0,10,10);
  g.setColor(Color.GREEN);
  g.fillRect(30,0,10,10);
  g.dispose();
  RenderedImage indexed=quantize(image);
  assertTrue(indexed.getColorModel() instanceof IndexColorModel);
  IndexColorModel icm=(IndexColorModel)indexed.getColorModel();
  assertEquals(5,icm.getMapSize());
}
