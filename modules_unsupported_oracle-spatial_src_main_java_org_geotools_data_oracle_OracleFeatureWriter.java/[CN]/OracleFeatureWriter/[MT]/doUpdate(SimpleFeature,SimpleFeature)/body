{
  if (LOGGER.isLoggable(Level.FINE)) {
    LOGGER.fine("updating postgis feature " + current);
  }
  PreparedStatement statement=null;
  Connection conn=null;
  try {
    conn=queryData.getConnection();
    String sql=makeUpdateSql(live,current);
    statement=conn.prepareStatement(sql);
    SimpleFeatureType schema=current.getFeatureType();
    int position=1;
    for (int i=0; i < current.getAttributeCount(); i++) {
      AttributeDescriptor type=schema.getDescriptor(i);
      if (type instanceof GeometryDescriptor && !DataUtilities.attributesEqual(current.getAttribute(i),live.getAttribute(i))) {
        Geometry geometry=(Geometry)current.getAttribute(i);
        LOGGER.fine("ORACLE SPATIAL: geometry to be written:" + geometry);
        int srid=queryData.getFeatureTypeInfo().getSRID(type.getLocalName());
        geometry.setSRID(srid);
        STRUCT struct=converter.toSDO(geometry);
        statement.setObject(position,struct);
        LOGGER.fine("ORACLE SPATIAL: set geometry parameter at position:" + position);
        position++;
        break;
      }
    }
    LOGGER.fine(sql);
    statement.execute();
  }
 catch (  SQLException sqle) {
    String msg="SQL Exception writing geometry column" + sqle.getLocalizedMessage();
    LOGGER.log(Level.SEVERE,msg,sqle);
    queryData.close(sqle);
    throw new DataSourceException(msg,sqle);
  }
 finally {
    if (statement != null) {
      try {
        statement.close();
      }
 catch (      SQLException e) {
        String msg="Error closing JDBC Statement";
        LOGGER.log(Level.WARNING,msg,e);
      }
    }
  }
}
