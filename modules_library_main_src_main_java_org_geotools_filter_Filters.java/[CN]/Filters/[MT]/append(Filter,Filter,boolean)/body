{
  if (baseFilter == null) {
    return newFilter;
  }
  if (newFilter == null) {
    return baseFilter;
  }
  if (baseFilter instanceof And) {
    And and=(And)baseFilter;
    List<Filter> children=new ArrayList<Filter>(and.getChildren());
    children.add(newFilter);
    return ff.and(children);
  }
  if (baseFilter instanceof Or) {
    Or or=(Or)baseFilter;
    List<Filter> children=new ArrayList<Filter>(or.getChildren());
    children.add(newFilter);
    return ff.or(children);
  }
  if (createOr) {
    return ff.or(baseFilter,newFilter);
  }
 else {
    return ff.and(baseFilter,newFilter);
  }
}
