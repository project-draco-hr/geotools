{
  if (filter == Filter.EXCLUDE) {
    if (visitor instanceof FilterVisitor2) {
      ((FilterVisitor2)visitor).visit((ExcludeFilter)Filter.EXCLUDE);
    }
    return;
  }
 else   if (filter == Filter.INCLUDE) {
    if (visitor instanceof FilterVisitor2) {
      ((FilterVisitor2)visitor).visit((IncludeFilter)Filter.INCLUDE);
    }
    return;
  }
  if (filter instanceof org.geotools.filter.Filter) {
    ((org.geotools.filter.Filter)filter).accept(visitor);
  }
 else {
    if (STRICT) {
      throw new ClassCastException("Please update your code to a org.opengis.filter.FilterVisitor");
    }
    FilterFactory2 ff=CommonFactoryFinder.getFilterFactory2(null);
    DuplicatingFilterVisitor xerox=new DuplicatingFilterVisitor(ff);
    org.geotools.filter.Filter copy=(org.geotools.filter.Filter)filter.accept(xerox,ff);
    copy.accept(visitor);
  }
}
