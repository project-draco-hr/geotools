{
  if (serverURL == null) {
    throw new NullPointerException("serverURL");
  }
  if (httpClient == null) {
    throw new NullPointerException("httpClient");
  }
  this.serverURL=serverURL;
  this.httpClient=httpClient;
  setupSpecifications();
  if (capabilities != null) {
    setupSpecification(capabilities);
    this.capabilities=capabilities;
  }
 else {
    this.capabilities=negotiateVersion();
    if (this.capabilities == null) {
      throw new ServiceException("Unable to retrieve or parse Capabilities document.");
    }
    setupSpecification(this.capabilities);
  }
}
