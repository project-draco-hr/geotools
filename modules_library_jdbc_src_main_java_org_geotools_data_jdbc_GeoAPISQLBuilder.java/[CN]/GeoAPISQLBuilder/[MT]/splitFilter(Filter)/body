{
  lastFilter=filter;
  FilterCapabilities cap=encoder.getCapabilities();
  PostPreProcessFilterSplittingVisitor pfv=new PostPreProcessFilterSplittingVisitor(cap,ft,accessor);
  filter.accept(pfv,null);
  lastPreFilter=(Filter)pfv.getFilterPre();
  lastPostFilter=(Filter)pfv.getFilterPost();
  SimplifyingFilterVisitor.FIDValidator validator=getFidValidator();
  SimplifyingFilterVisitor visitor=new SimplifyingFilterVisitor();
  visitor.setFIDValidator(validator);
  lastPreFilter=(Filter)lastPreFilter.accept(visitor,null);
  lastPostFilter=(Filter)lastPostFilter.accept(visitor,null);
}
