{
  FeatureLock lock=FeatureLockFactory.generate("Timed",200);
  FeatureLocking<SimpleFeatureType,SimpleFeature> road=(FeatureLocking<SimpleFeatureType,SimpleFeature>)data.getFeatureSource("road");
  road.setFeatureLock(lock);
  assertFalse(isLocked("road","road.rd1"));
  road.lockFeatures(rd1Filter);
  assertTrue(isLocked("road","road.rd1"));
  long then=System.currentTimeMillis();
  do {
    Thread.sleep(200);
  }
 while ((System.currentTimeMillis() - then) < 200);
  assertFalse(isLocked("road","road.rd1"));
}
