{
  FeatureLock lock=new FeatureLock("Timed",500);
  FeatureLocking<SimpleFeatureType,SimpleFeature> road=(FeatureLocking<SimpleFeatureType,SimpleFeature>)data.getFeatureSource("road");
  road.setFeatureLock(lock);
  assertFalse(isLocked("road","road.rd1"));
  road.lockFeatures(rd1Filter);
  assertTrue(isLocked("road","road.rd1"));
  long then=System.currentTimeMillis();
  do {
    Thread.sleep(15);
  }
 while (then > System.currentTimeMillis() - 515);
  assertFalse(isLocked("road","road.rd1"));
}
