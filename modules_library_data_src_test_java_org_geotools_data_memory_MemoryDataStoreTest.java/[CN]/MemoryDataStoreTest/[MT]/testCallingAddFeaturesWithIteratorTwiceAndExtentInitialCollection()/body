{
  FeatureReader<SimpleFeatureType,SimpleFeature> reader=DataUtilities.reader(roadFeatures);
  MemoryDataStore mds=new MemoryDataStore(reader);
  assertEquals(roadFeatures.length,mds.features(roadType.getTypeName()).size());
  SimpleFeatureIterator featureIterator=DataUtilities.collection(new SimpleFeature[]{SimpleFeatureBuilder.template(roadType,null)}).features();
  mds.addFeatures(featureIterator);
  Map<String,SimpleFeature> features=mds.features("road");
  assertEquals(roadFeatures.length + 1,features.size());
}
