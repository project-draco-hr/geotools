{
  final String lineSeparator=System.getProperty("line.separator","\n");
  String line=null;
  try {
    while ((line=in.readLine()) != null) {
      if ((line=line.trim()).length() != 0) {
        out.write(lineSeparator);
        out.write(format(parseObject(line)));
        out.write(lineSeparator);
        out.write(lineSeparator);
        out.flush();
      }
    }
  }
 catch (  ParseException exception) {
    err.println(exception.getLocalizedMessage());
    if (line != null) {
      reportError(err,line,exception.getErrorOffset());
    }
  }
catch (  InvalidParameterValueException exception) {
    err.print(Errors.format(ErrorKeys.IN_$1,exception.getParameterName()));
    err.print(' ');
    err.println(exception.getLocalizedMessage());
  }
}
