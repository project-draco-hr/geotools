{
  if (collection instanceof FeatureCollection) {
    return addAll((FeatureCollection)collection);
  }
  boolean changed=false;
  Iterator iterator=collection.iterator();
  List<SimpleFeature> featuresAdded=new ArrayList<SimpleFeature>(collection.size());
  while (iterator.hasNext()) {
    SimpleFeature f=(SimpleFeature)iterator.next();
    boolean added=add(f,false);
    changed|=added;
    if (added) {
      featuresAdded.add(f);
    }
  }
  if (changed) {
    fireChange(featuresAdded,CollectionEvent.FEATURES_ADDED);
  }
  return changed;
}
