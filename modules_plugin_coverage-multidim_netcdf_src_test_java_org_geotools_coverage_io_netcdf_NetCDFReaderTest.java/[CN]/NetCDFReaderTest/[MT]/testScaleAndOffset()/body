{
  Set<NetcdfDataset.Enhance> currentEnhanceMode=NetcdfDataset.getDefaultEnhanceMode();
  Set<NetcdfDataset.Enhance> newEnhanceMode=EnumSet.of(NetcdfDataset.Enhance.CoordSystems,NetcdfDataset.Enhance.ScaleMissing);
  Boolean currentEnhanceSysProp=Boolean.getBoolean(NetCDFUtilities.ENHANCE_SCALE_MISSING);
  if (!currentEnhanceSysProp) {
    System.setProperty(NetCDFUtilities.ENHANCE_SCALE_MISSING,"true");
  }
  NetcdfDataset.setDefaultEnhanceMode(newEnhanceMode);
  File file=TestData.file(this,"o3_no2_so.nc");
  final NetCDFReader reader=new NetCDFReader(file,null);
  String coverageName="NO2";
  GeneralParameterValue[] values=new GeneralParameterValue[]{};
  GridCoverage2D coverage=reader.read(coverageName,values);
  float[] result=coverage.evaluate((DirectPosition)new DirectPosition2D(DefaultGeographicCRS.WGS84,5.0,45.0),new float[1]);
  assertEquals(1.615991,result[0],1e-6f);
  NetcdfDataset.setDefaultEnhanceMode(currentEnhanceMode);
  System.setProperty(NetCDFUtilities.ENHANCE_SCALE_MISSING,currentEnhanceMode.toString());
}
