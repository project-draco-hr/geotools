{
  long longFid;
  if (shapeIndex != -1) {
    try {
      SeShape shape=row.getShape(shapeIndex);
      if (shape == null) {
        throw new NullPointerException("Can't get FID from " + layerName + " as it has SHAPE fid reading strategy and got a null shape");
      }
      longFid=shape.getFeatureId().longValue();
    }
 catch (    SeException e) {
      throw new ArcSdeException("Getting fid from shape",e);
    }
  }
 else {
    int shapeIdIndex=getColumnIndex();
    Integer id=(Integer)row.getObject(shapeIdIndex);
    longFid=id.longValue();
  }
  return longFid;
}
