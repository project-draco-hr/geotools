{
  Hints hints=new Hints(Hints.ASSOCIATION_TRAVERSAL_DEPTH,new Integer(1));
  DefaultQuery query=new DefaultQuery();
  query.setTypeName("ga");
  query.setHints(hints);
  FeatureReader<SimpleFeatureType,SimpleFeature> reader=dataStore.getFeatureReader(query,Transaction.AUTO_COMMIT);
  assertTrue(reader.hasNext());
  reader.next();
  assertTrue(reader.hasNext());
  reader.next();
  assertTrue(reader.hasNext());
  SimpleFeature feature=reader.next();
  Geometry g=(Geometry)feature.getDefaultGeometry();
  assertNotNull(g);
  assertTrue(g instanceof MultiPoint);
  MultiPoint mp=(MultiPoint)g;
  assertEquals("2",((Map)mp.getUserData()).get("gml:id"));
  assertEquals(2,mp.getNumGeometries());
  Point p=(Point)mp.getGeometryN(0);
  assertEquals(new Coordinate(0,0),p.getCoordinate());
  assertEquals("0",((Map)p.getUserData()).get("gml:id"));
  p=(Point)mp.getGeometryN(1);
  assertEquals(new Coordinate(1,1),p.getCoordinate());
  assertEquals("1",((Map)p.getUserData()).get("gml:id"));
  reader.close();
}
