{
  SimpleFeature sample=null;
  SimpleFeatureIterator iterator=null;
  try {
    iterator=source.getFeatures().features();
    if (iterator.hasNext()) {
      sample=iterator.next();
    }
  }
  finally {
    if (iterator != null) {
      iterator.close();
    }
  }
  SimpleFeatureTypeBuilder tb=new SimpleFeatureTypeBuilder();
  tb.setName(typeName);
  for (  Definition definition : definitions) {
    AttributeDescriptor ad=definition.getAttributeDescriptor(sample);
    tb.add(ad);
  }
  return tb.buildFeatureType();
}
