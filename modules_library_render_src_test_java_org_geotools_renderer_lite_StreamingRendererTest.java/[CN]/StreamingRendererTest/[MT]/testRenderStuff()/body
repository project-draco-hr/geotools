{
  MapContext mapContext=new DefaultMapContext(DefaultGeographicCRS.WGS84);
  mapContext.addLayer(createLineCollection(),createLineStyle());
  ReferencedEnvelope reWgs=new ReferencedEnvelope(new Envelope(-180,-170,20,40),DefaultGeographicCRS.WGS84);
  CoordinateReferenceSystem utm1N=CRS.decode("EPSG:32601");
  System.out.println(CRS.getGeographicBoundingBox(utm1N));
  ReferencedEnvelope reUtm=reWgs.transform(utm1N,true);
  BufferedImage image=new BufferedImage(200,200,BufferedImage.TYPE_4BYTE_ABGR);
  StreamingRenderer sr=new StreamingRenderer();
  sr.setContext(mapContext);
  sr.addRenderListener(new RenderListener(){
    public void featureRenderer(    SimpleFeature feature){
      features++;
    }
    public void errorOccurred(    Exception e){
      errors++;
    }
  }
);
  errors=0;
  features=0;
  sr.paint((Graphics2D)image.getGraphics(),new Rectangle(200,200),reUtm);
  assertTrue(features > 0);
}
