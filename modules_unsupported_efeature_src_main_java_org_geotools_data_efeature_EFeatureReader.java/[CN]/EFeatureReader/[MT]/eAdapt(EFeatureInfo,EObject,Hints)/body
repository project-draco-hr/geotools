{
  EFeatureHints eHints=eStructure.eHints();
  Object eDetatchedValues=eHints.replace(hints,EFEATURE_VALUES_DETACHED);
  Object eSingletonFeatures=eHints.replace(hints,EFEATURE_SINGLETON_FEATURES);
  try {
    if (eObject instanceof EFeature) {
      ((EFeature)eObject).setStructure(eStructure);
      return (EFeature)eObject;
    }
    return EFeatureDelegate.create(eStructure,(InternalEObject)eObject,true);
  }
  finally {
    eHints.restore(EFEATURE_VALUES_DETACHED,eDetatchedValues);
    eHints.restore(EFEATURE_SINGLETON_FEATURES,eSingletonFeatures);
  }
}
