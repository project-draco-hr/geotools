{
  cache.put(dataset);
  FeatureCollectingVisitor v=new FeatureCollectingVisitor((SimpleFeatureType)dataset.getSchema());
  cache.tracker.intersectionQuery(CacheUtil.convert(unitsquare),v);
  List<Envelope> matches=cache.match(unitsquare);
  for (Iterator<Envelope> it=matches.iterator(); it.hasNext(); ) {
    cache.register(it.next());
  }
  cache.put(dataset);
  v=new FeatureCollectingVisitor((SimpleFeatureType)dataset.getSchema());
  cache.tracker.intersectionQuery(CacheUtil.convert(unitsquare),v);
  assertEquals(dataset.size(),v.getCollection().size());
}
