{
  try {
    Envelope result=new Envelope();
    SimpleFeatureType ft=feature.getFeatureType();
    for (int i=0; i < ft.getAttributeCount(); i++) {
      AttributeDescriptor at=ft.getDescriptor(i);
      if (at instanceof GeometryDescriptor) {
        GeometryDescriptor gat=(GeometryDescriptor)at;
        CoordinateReferenceSystem crs=gat.getCoordinateReferenceSystem();
        Geometry geom=(Geometry)feature.getAttribute(i);
        if (geom != null) {
          Envelope env=geom.getEnvelopeInternal();
          if (crs != null)           env=JTS.toGeographic(env,crs);
          result.expandToInclude(env);
        }
      }
    }
    return result;
  }
 catch (  TransformException e) {
    throw new DataSourceException("Error computing lat/long envelope of the current feature. " + "This is needed to update the changeset bbox",e);
  }
}
