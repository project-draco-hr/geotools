{
  if (matrix instanceof GeneralMatrix) {
    return ((GeneralMatrix)matrix).getElements();
  }
  final int numCol=matrix.getNumCol();
  final double[][] rows=new double[matrix.getNumRow()][];
  for (int j=0; j < rows.length; j++) {
    final double[] row;
    rows[j]=row=new double[numCol];
    for (int i=0; i < row.length; i++) {
      row[i]=matrix.getElement(j,i);
    }
  }
  return rows;
}
