{
  Map<String,Serializable> connectionParams=new HashMap<String,Serializable>();
  connectionParams.put(DefaultFileDriver.URL.key,new URL(TEST_URL));
  CoverageAccess access=driver.access(DriverCapabilities.CONNECT,connectionParams,null,null);
  final CoverageSource source=access.access(TEST_NAME,null,AccessType.READ_ONLY,null,null);
  final List<Name> names=access.getNames(null);
  final Name coverageName=names.get(0);
  CoverageReadRequest request=new CoverageReadRequest();
  CoordinateReferenceSystem crs=source.getCoordinateReferenceSystem();
  Rectangle rasterArea=new Rectangle(0,0,10,10);
  Hints hints=new Hints();
  String handle="test_handle";
  DateRange range=new DateRange(new Date(10000),new Date(20000));
  DateRangeTreeSet set=new DateRangeTreeSet();
  set.add(range);
  Filter filter=Filter.INCLUDE;
  MathTransform2D gridToWorldTransform=new AffineTransform2D(AffineTransform.getTranslateInstance(0,0));
  Set<NumberRange<Double>> verticalSubset=new HashSet<NumberRange<Double>>();
  verticalSubset.add(new NumberRange<Double>(Double.class,0.0d,10000.0d));
  request.setName(coverageName);
  request.setHints(hints);
  request.setHandle(handle);
  request.setDomainSubset(rasterArea,gridToWorldTransform,crs);
  assertTrue(request.getRasterArea() != null);
  assertTrue(request.getGeographicArea() != null);
  assertTrue(request.getFilter() == null);
  request.setFilter(filter);
  assertTrue(request.getFilter() != null);
  assertTrue(request.getTemporalSubset().isEmpty());
  request.setTemporalSubset(set);
  assertTrue(!request.getTemporalSubset().isEmpty());
  assertTrue(request.getVerticalSubset().isEmpty());
  request.setVerticalSubset(verticalSubset);
  assertTrue(!request.getVerticalSubset().isEmpty());
  CoverageResponse response=source.read(request,null);
  assertTrue(response.getStatus() == Status.SUCCESS);
  assertTrue(response.getRequest().equals(request));
  assertTrue(response.getHandle().equalsIgnoreCase(handle));
  Collection<? extends Coverage> results=response.getResults(null);
  assertTrue(results != null);
  assertTrue(results.size() > 0);
  assertTrue(results.iterator().next() instanceof GridCoverage2D);
}
