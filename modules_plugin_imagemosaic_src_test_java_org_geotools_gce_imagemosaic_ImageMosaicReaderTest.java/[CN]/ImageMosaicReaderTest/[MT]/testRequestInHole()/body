{
  final AbstractGridFormat format=getFormat(rgbAURL);
  final ImageMosaicReader reader=getReader(rgbAURL,format);
  assertNotNull(reader);
  final ParameterValue<GridGeometry2D> ggp=AbstractGridFormat.READ_GRIDGEOMETRY2D.createValue();
  Envelope2D env=new Envelope2D(reader.getCrs(),500000,3200000,1000,1000);
  GridGeometry2D gg=new GridGeometry2D(new GridEnvelope2D(0,0,100,100),(Envelope)env);
  ggp.setValue(gg);
  final ParameterValue<double[]> bgp=ImageMosaicFormat.BACKGROUND_VALUES.createValue();
  bgp.setValue(new double[]{255,0,0,255});
  GridCoverage2D coverage=reader.read(new GeneralParameterValue[]{ggp,bgp});
  assertNotNull(coverage);
  assertTrue(coverage.getEnvelope2D().intersects((Rectangle2D)env));
  RenderedImage ri=coverage.getRenderedImage();
  int[] pixel=new int[4];
  Raster tile=ri.getTile(ri.getMinTileX() + 1,ri.getMinTileY() + 1);
  tile.getPixel(tile.getMinX(),tile.getMinY(),pixel);
  assertEquals(255,pixel[0]);
  assertEquals(0,pixel[1]);
  assertEquals(0,pixel[2]);
  assertEquals(255,pixel[3]);
}
