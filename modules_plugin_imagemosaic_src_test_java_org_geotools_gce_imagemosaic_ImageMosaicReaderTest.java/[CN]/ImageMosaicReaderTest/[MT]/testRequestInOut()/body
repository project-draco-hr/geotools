{
  final AbstractGridFormat format=TestUtils.getFormat(rgbAURL,null);
  final ImageMosaicReader reader=TestUtils.getReader(rgbAURL,format);
  assertNotNull(reader);
  final ParameterValue<GridGeometry2D> ggp=AbstractGridFormat.READ_GRIDGEOMETRY2D.createValue();
  Envelope2D env=new Envelope2D(reader.getCoordinateReferenceSystem(),44887,2299342,646897 - 44887,3155705 - 2299342);
  GridGeometry2D gg=new GridGeometry2D(new GridEnvelope2D(0,0,100,100),(Envelope)env);
  ggp.setValue(gg);
  final ParameterValue<double[]> bgp=ImageMosaicFormat.BACKGROUND_VALUES.createValue();
  bgp.setValue(new double[]{255,0,0,255});
  GridCoverage2D coverage=reader.read(new GeneralParameterValue[]{ggp,bgp});
  assertNotNull(coverage);
  assertTrue(coverage.getEnvelope2D().contains((Rectangle2D)env));
  RenderedImage ri=coverage.getRenderedImage();
  int[] pixel=new int[4];
  Raster tile=ri.getTile(ri.getMinTileX() + ri.getNumXTiles() - 1,ri.getMinTileY() + ri.getNumYTiles() - 1);
  tile.getPixel(410,120,pixel);
  assertEquals(255,pixel[0]);
  assertEquals(0,pixel[1]);
  assertEquals(0,pixel[2]);
  assertEquals(255,pixel[3]);
}
