{
  final AbstractGridFormat format=getFormat(rgbAURL);
  final ImageMosaicReader reader=getReader(rgbAURL,format);
  assertNotNull(reader);
  final ParameterValue<GridGeometry2D> ggp=AbstractGridFormat.READ_GRIDGEOMETRY2D.createValue();
  Envelope2D env=new Envelope2D(reader.getCrs(),64887,2499342,646897 - 64887,3155705 - 2499342);
  GridGeometry2D gg=new GridGeometry2D(new GridEnvelope2D(0,0,100,100),(Envelope)env);
  ggp.setValue(gg);
  final ParameterValue<double[]> bgp=ImageMosaicFormat.BACKGROUND_VALUES.createValue();
  bgp.setValue(new double[]{255,0,0,255});
  GridCoverage2D coverage=reader.read(new GeneralParameterValue[]{ggp,bgp});
  assertNotNull(coverage);
  System.out.println(coverage.getEnvelope2D());
  System.out.println(env);
  assertTrue(coverage.getEnvelope2D().contains((Rectangle2D)env));
  RenderedImage ri=coverage.getRenderedImage();
  ImageIO.write(ri,"PNG",new File("/tmp/mix.png"));
  System.out.println(ri.getNumXTiles());
  System.out.println(ri.getNumYTiles());
  int[] pixel=new int[4];
  Raster tile=ri.getTile(ri.getMinTileX() + ri.getNumXTiles() - 1,ri.getMinTileY() + ri.getNumYTiles() - 1);
  tile.getPixel(tile.getWidth() / 2,tile.getHeight() / 2,pixel);
  assertEquals(255,pixel[0]);
  assertEquals(0,pixel[1]);
  assertEquals(0,pixel[2]);
  assertEquals(255,pixel[3]);
}
