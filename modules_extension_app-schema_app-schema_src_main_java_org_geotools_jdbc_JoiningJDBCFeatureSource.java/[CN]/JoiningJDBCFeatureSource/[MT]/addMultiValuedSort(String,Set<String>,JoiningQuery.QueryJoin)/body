{
  StringBuffer orderString=new StringBuffer(" CASE WHEN ");
  FilterToSQL toSQL1=createFilterToSQL(getDataStore().getSchema(tableName));
  toSQL1.setFieldEncoder(new JoiningFieldEncoder(tableName));
  FilterToSQL toSQL2=createFilterToSQL(getDataStore().getSchema(join.getJoiningTypeName()));
  toSQL2.setFieldEncoder(new JoiningFieldEncoder(join.getJoiningTypeName()));
  orderString.append(toSQL2.encodeToString(join.getForeignKeyName()));
  orderString.append(" = ");
  orderString.append(toSQL1.encodeToString(join.getJoiningKeyName()));
  orderString.append(" THEN 0 ELSE 1 END ASC");
  orderByFields.add(orderString.toString());
}
