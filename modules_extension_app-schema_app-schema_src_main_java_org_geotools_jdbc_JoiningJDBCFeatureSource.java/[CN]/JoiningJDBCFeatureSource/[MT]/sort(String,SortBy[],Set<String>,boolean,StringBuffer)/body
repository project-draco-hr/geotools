{
  for (int i=0; i < sort.length; i++) {
    if (SortBy.NATURAL_ORDER.equals(sort[i]) || SortBy.REVERSE_ORDER.equals(sort[i])) {
      throw new IOException("Cannot do natural order in joining queries");
    }
 else {
      StringBuffer mySql=new StringBuffer();
      if (alias) {
        encodeColumnName2(sort[i].getPropertyName().getPropertyName(),tableName,mySql,null);
      }
 else {
        encodeColumnName(sort[i].getPropertyName().getPropertyName(),tableName,mySql,null);
      }
      if (!mySql.toString().isEmpty() && orderByFields.add(mySql.toString())) {
        if (orderByFields.size() > 1) {
          sql.append(", ");
        }
        sql.append(mySql);
        if (sort[i].getSortOrder() == SortOrder.DESCENDING) {
          sql.append(" DESC");
        }
 else {
          sql.append(" ASC");
        }
      }
    }
  }
}
