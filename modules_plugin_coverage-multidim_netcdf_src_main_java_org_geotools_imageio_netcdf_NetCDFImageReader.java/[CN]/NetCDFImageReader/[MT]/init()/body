{
  int numImages=0;
  try {
    if (dataset != null) {
      checkType=NetCDFUtilities.getCheckType(dataset);
      georeferencing=new NetCDFGeoreferenceManager(dataset);
      final File slicesIndexFile=ancillaryFileManager.getSlicesIndexFile();
      uniqueTimeAttribute=ancillaryFileManager.getParameterAsBoolean(NetCDFUtilities.UNIQUE_TIME_ATTRIBUTE);
      if (slicesIndexFile != null) {
        if (slicesIndexFile.exists()) {
          ancillaryFileManager.initSliceManager();
          numImages=ancillaryFileManager.slicesIndexManager.getNumberOfRecords();
          if (!ignoreMetadata) {
            coverages.addAll(ancillaryFileManager.getCoveragesNames());
            DataStoreConfiguration datastoreConfiguration=ancillaryFileManager.getDatastoreConfiguration();
            settingTypeNames(datastoreConfiguration);
            initCatalog(datastoreConfiguration);
          }
        }
        if (numImages <= 0 || !slicesIndexFile.exists()) {
          ancillaryFileManager.resetSliceManager();
          numImages=initIndex();
          ancillaryFileManager.initSliceManager();
          numImages=ancillaryFileManager.slicesIndexManager.getNumberOfRecords();
        }
      }
 else {
        numImages=initIndex();
      }
    }
 else {
      throw new IllegalArgumentException("No valid NetCDF dataset has been found");
    }
  }
 catch (  InvalidRangeException e) {
    throw new IllegalArgumentException("Exception occurred during NetCDF file parsing",e);
  }
  setNumImages(numImages);
}
