{
  this.dryRun=dryRun;
  mergeBehavior=request.getMergeBehavior();
  if (mergeBehavior.equals(MergeBehavior.STACK)) {
    final Map<String,List> requestedAdditionalDomains=request.getRequestedAdditionalDomains();
    if (!requestedAdditionalDomains.isEmpty()) {
      Set<Entry<String,List>> entries=requestedAdditionalDomains.entrySet();
      if (entries.size() > 1) {
        throw new IllegalStateException("Unable to handle dimensions stacking for more than 1 dimension");
      }
      final Entry<String,List> element=entries.iterator().next();
      final String domainName=element.getKey() + DomainDescriptor.DOMAIN_SUFFIX;
      final List values=(List)element.getValue();
      for (      Object o : values) {
        dimensionValueFilters.add(rasterManager.domainsManager.createFilter(domainName,Arrays.asList(o)));
      }
    }
  }
  if (dimensionValueFilters.isEmpty()) {
    dimensionValueFilters.add(Filter.INCLUDE);
  }
  for (int i=0; i < dimensionValueFilters.size(); i++) {
    granulesFutures.add(new ArrayList<Future<GranuleLoadingResult>>());
  }
}
