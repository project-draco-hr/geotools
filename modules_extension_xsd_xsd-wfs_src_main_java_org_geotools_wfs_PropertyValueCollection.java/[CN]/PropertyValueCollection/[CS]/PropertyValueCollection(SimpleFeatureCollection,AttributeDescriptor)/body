{
  super(null);
  this.delegate=delegate;
  this.descriptor=descriptor;
  this.typeMappingProfiles.add(XS.getInstance().getTypeMappingProfile());
  this.typeMappingProfiles.add(GML.getInstance().getTypeMappingProfile());
  Class<?> binding=descriptor.getType().getBinding();
  AttributeType xmlType=findType(binding);
  if (xmlType == null) {
    throw new RuntimeException("Unable to map attribute " + descriptor.getName() + " to xml type");
  }
  SimpleFeatureType origionalSchema=delegate.getSchema();
  Name name=new NameImpl(origionalSchema.getName().getNamespaceURI(),descriptor.getLocalName());
  AttributeDescriptor newDescriptor=typeFactory.createAttributeDescriptor(xmlType,name,descriptor.getMinOccurs(),descriptor.getMaxOccurs(),descriptor.isNillable(),descriptor.getDefaultValue());
  SimpleFeatureTypeBuilder builder=new SimpleFeatureTypeBuilder(typeFactory);
  builder.setName(origionalSchema.getName());
  builder.add(newDescriptor);
  this.schema=builder.buildFeatureType();
}
