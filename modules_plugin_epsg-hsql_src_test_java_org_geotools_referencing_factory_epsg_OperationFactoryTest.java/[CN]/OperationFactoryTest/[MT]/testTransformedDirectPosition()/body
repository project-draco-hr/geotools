{
  CoordinateReferenceSystem requestedCRS=CRS.parseWKT("PROJCS[\"WGS84 / Google Mercator\"," + "  GEOGCS[\"WGS 84\", " + "   DATUM[\"World Geodetic System 1984\", "+ "     SPHEROID[\"WGS 84\", 6378137.0, 298.257223563, AUTHORITY[\"EPSG\",\"7030\"]],"+ "     AUTHORITY[\"EPSG\",\"6326\"]], "+ "   PRIMEM[\"Greenwich\", 0.0, AUTHORITY[\"EPSG\",\"8901\"]],"+ "   UNIT[\"degree\", 0.017453292519943295],"+ "   AXIS[\"Longitude\", EAST], "+ "   AXIS[\"Latitude\", NORTH], "+ "   AUTHORITY[\"EPSG\",\"4326\"]],"+ " PROJECTION[\"Mercator_1SP\"], "+ " PARAMETER[\"semi_minor\", 6378137.0], "+ " PARAMETER[\"latitude_of_origin\", 0.0],"+ " PARAMETER[\"central_meridian\", 0.0],"+ " PARAMETER[\"scale_factor\", 1.0], "+ " PARAMETER[\"false_easting\", 0.0], "+ " PARAMETER[\"false_northing\", 0.0],"+ " UNIT[\"m\", 1.0], "+ " AXIS[\"x\", EAST], "+ " AXIS[\"y\", NORTH], "+ " AUTHORITY[\"EPSG\",\"900913\"]]");
  CoordinateReferenceSystem targetCRS=CRS.parseWKT("PROJCS[\"Lisboa_Hayford_Gauss_IGeoE\", " + "  GEOGCS[\"GCS_Datum_Lisboa_Hayford\", " + "    DATUM[\"D_Datum_Lisboa_Hayford\", "+ "      SPHEROID[\"International_1924\", 6378388.0, 297.0], "+ "      TOWGS84[-288.885, -91.744, 126.244, -1.691, 0.41, -0.211, -4.598]],"+ "    PRIMEM[\"Greenwich\", 0.0], "+ "    UNIT[\"degree\", 0.017453292519943295],"+ "    AXIS[\"Longitude\", EAST], "+ "    AXIS[\"Latitude\", NORTH]], "+ "  PROJECTION[\"Transverse_Mercator\"], "+ "  PARAMETER[\"central_meridian\", -8.131906111111114], "+ "  PARAMETER[\"latitude_of_origin\", 39.666666666666664],"+ "  PARAMETER[\"scale_factor\", 1.0], "+ "  PARAMETER[\"false_easting\", 200000.0], "+ "  PARAMETER[\"false_northing\", 300000.0],"+ "  UNIT[\"m\", 1.0], "+ "  AXIS[\"x\", EAST], "+ "  AXIS[\"y\", NORTH]]");
  DirectPosition position=new DirectPosition2D(requestedCRS,-886885.0962724264,4468200.416916506);
  final TransformedDirectPosition arbitraryToInternal=new TransformedDirectPosition(requestedCRS,targetCRS,new Hints(Hints.LENIENT_DATUM_SHIFT,Boolean.TRUE));
  arbitraryToInternal.transform(position);
  DirectPosition expected=new DirectPosition2D(targetCRS,214741.10238960697,26957.60506898933);
  assertEquals(expected.getOrdinate(0),arbitraryToInternal.getOrdinate(0),1e-9);
  assertEquals(expected.getOrdinate(1),arbitraryToInternal.getOrdinate(1),1e-9);
}
