{
  this.wms=server;
  setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  setLayout(new BorderLayout());
  String title=getWMSTitle(wms);
  setTitle(title);
  Set good=new HashSet(Arrays.asList(WMSUtils.getNamedLayers(wms.getCapabilities())));
  this.layers=new JList(good.toArray());
  layers.setCellRenderer(new LayerCellRenderer());
  layers.getSelectionModel().addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    ListSelectionEvent e){
      setSelectedLayer((Layer)layers.getSelectedValue());
    }
  }
);
  JScrollPane scrollPane=new JScrollPane(layers);
  scrollPane.setPreferredSize(new Dimension(200,400));
  add(scrollPane,BorderLayout.WEST);
  this.panel=new CoveragePanel();
  add(panel,BorderLayout.CENTER);
  JPanel buttons=new JPanel();
  getMapButton=new JButton("GetMap");
  getMapButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      getMap();
    }
  }
);
  buttons.add(getMapButton);
  availableStyles=new DefaultComboBoxModel();
  styleCombo=new JComboBox(availableStyles);
  styleCombo.addItemListener(new ItemListener(){
    public void itemStateChanged(    ItemEvent e){
      if (selectedLayer != null) {
        styles.put(selectedLayer,styleCombo.getSelectedItem());
      }
    }
  }
);
  styleCombo.setRenderer(new StyleCellRenderer());
  buttons.add(styleCombo);
  add(buttons,BorderLayout.NORTH);
  pack();
}
