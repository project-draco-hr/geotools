{
  final int dimension=matrix.getNumRow() - 1;
  if (dimension == matrix.getNumCol() - 1) {
    if (matrix.isIdentity()) {
      return IdentityTransform.create(dimension);
    }
    final GeneralMatrix m=toGMatrix(matrix);
    if (m.isAffine()) {
switch (dimension) {
case 1:
        return LinearTransform1D.create(m.getElement(0,0),m.getElement(0,1));
case 2:
      return create(m.toAffineTransform2D());
  }
}
}
switch (dimension) {
case 2:
return new ProjectiveTransform2D(matrix);
default :
return new ProjectiveTransform(matrix);
}
}
