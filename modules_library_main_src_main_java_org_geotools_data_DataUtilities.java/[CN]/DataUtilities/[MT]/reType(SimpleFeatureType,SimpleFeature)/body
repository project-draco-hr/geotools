{
  SimpleFeatureType origional=feature.getFeatureType();
  if (featureType.equals(origional)) {
    return SimpleFeatureBuilder.copy(feature);
  }
  String id=feature.getID();
  int numAtts=featureType.getAttributeCount();
  Object[] attributes=new Object[numAtts];
  String xpath;
  for (int i=0; i < numAtts; i++) {
    AttributeDescriptor curAttType=featureType.getDescriptor(i);
    xpath=curAttType.getLocalName();
    attributes[i]=duplicate(feature.getAttribute(xpath));
  }
  return SimpleFeatureBuilder.build(featureType,attributes,id);
}
