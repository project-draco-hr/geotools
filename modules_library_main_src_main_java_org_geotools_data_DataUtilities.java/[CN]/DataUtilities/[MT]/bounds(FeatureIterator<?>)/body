{
  if (iterator == null) {
    return null;
  }
  try {
    ReferencedEnvelope bounds=null;
    while (iterator.hasNext()) {
      Feature feature=iterator.next();
      ReferencedEnvelope featureEnvelope=null;
      if (feature != null && feature.getBounds() != null) {
        featureEnvelope=ReferencedEnvelope.reference(feature.getBounds());
      }
      if (featureEnvelope != null) {
        if (bounds == null) {
          bounds=new ReferencedEnvelope(featureEnvelope);
        }
 else {
          bounds.expandToInclude(featureEnvelope);
        }
      }
    }
    return bounds;
  }
  finally {
    iterator.close();
  }
}
