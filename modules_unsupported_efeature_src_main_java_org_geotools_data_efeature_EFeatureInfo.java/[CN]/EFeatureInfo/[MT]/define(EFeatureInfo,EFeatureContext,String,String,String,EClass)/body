{
  eInfo.eNsURI=eNsURI;
  eInfo.eDomainID=eDomainID;
  eInfo.eFolderName=eFolderName;
  eInfo.eClassName=eClass.getName();
  eInfo.eClass=new WeakReference<EClass>(eClass);
  EAttribute eIDAttribute=eGetIDAttribute(eClass,eInfo.eHints);
  eInfo.eIDAttributeName=eIDAttribute.getName();
  eInfo.eAttributeMap.put(EFeaturePackage.eINSTANCE.getEFeature_ID(),eIDAttribute);
  EAttribute eSRIDAttribute=eGetSRIDAttribute(eClass,eInfo.eHints);
  eInfo.eSRIDAttributeName=eSRIDAttribute.getName();
  eInfo.eAttributeMap.put(EFeaturePackage.eINSTANCE.getEFeature_SRID(),eSRIDAttribute);
  EAttribute eDefaultAttribute=eGetDefaultAttribute(eClass,eInfo.eHints);
  eInfo.eDefaultAttributeName=eDefaultAttribute.getName();
  eInfo.eAttributeMap.put(EFeaturePackage.eINSTANCE.getEFeature_Default(),eDefaultAttribute);
  EList<EAttribute> eAttributes=eClass.getEAllAttributes();
  eInfo.eAttributeInfoMap=attributes(eInfo,eAttributes);
  eInfo.eGeometryInfoMap=geometries(eInfo,eAttributes);
  if (!(eContext.eIDFactory() instanceof EFeatureVoidIDFactory)) {
    eContext.eIDFactory().add(eClass,eIDAttribute);
  }
  EFeatureStatus eStatus;
  if ((eStatus=eContext.eStructure().doAttach(eInfo)).isFailure()) {
    throw new IllegalArgumentException("Failed to cache " + eInfo.eName() + ": "+ eStatus.getMessage());
  }
  return eInfo;
}
