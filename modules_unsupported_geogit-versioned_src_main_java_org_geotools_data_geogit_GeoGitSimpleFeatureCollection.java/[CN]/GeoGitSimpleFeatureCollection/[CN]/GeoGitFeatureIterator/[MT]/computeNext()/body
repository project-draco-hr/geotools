{
  Hints hints=new Hints();
  if (null != geometryFactory) {
    hints.put(Hints.GEOMETRY_FACTORY,geometryFactory);
  }
  try {
    while (featureRefs.hasNext()) {
      Ref featureRef=featureRefs.next();
      String featureId=featureRef.getName();
      ObjectId contentId=featureRef.getObjectId();
      SimpleFeature feature;
      ObjectReader<Feature> featureReader=serialisingFactory.createFeatureReader(type,featureId,hints);
      feature=(SimpleFeature)odb.get(contentId,featureReader);
      feature=reprojector.reproject(feature);
      if (filter.evaluate(feature)) {
        return feature;
      }
    }
  }
 catch (  Exception e) {
    Throwables.propagate(e);
  }
  return endOfData();
}
