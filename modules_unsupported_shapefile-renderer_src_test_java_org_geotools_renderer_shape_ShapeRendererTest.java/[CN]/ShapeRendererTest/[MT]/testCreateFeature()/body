{
  ShapefileRenderer renderer=new ShapefileRenderer(null);
  Style style=LabelingTest.loadStyle("LineStyle.sld");
  ShapefileDataStore ds=TestUtilites.getDataStore(shp2.getName());
  IndexedDbaseFileReader reader=ShapefileRendererUtil.getDBFReader(ds);
  SimpleFeatureType type=renderer.createFeatureType(null,style,ds);
  assertEquals(2,type.getAttributeCount());
  assertEquals("NAME",type.getDescriptor(0).getLocalName());
  Envelope bounds=ds.getFeatureSource().getBounds();
  ShapefileReader shpReader=ShapefileRendererUtil.getShpReader(ds,bounds,new Rectangle(0,0,(int)bounds.getWidth(),(int)bounds.getHeight()),IDENTITY,false,false);
  SimpleFeatureBuilder builder=new SimpleFeatureBuilder(type);
  SimpleFeature feature=renderer.createFeature(builder,shpReader.nextRecord(),reader,"id");
  shpReader.close();
  reader.close();
  assertEquals("id",feature.getID());
  assertEquals("dave street",feature.getAttribute(0));
}
