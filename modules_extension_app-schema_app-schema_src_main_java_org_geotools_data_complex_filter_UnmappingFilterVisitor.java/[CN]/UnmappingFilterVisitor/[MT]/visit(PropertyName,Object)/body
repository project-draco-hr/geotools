{
  String targetXPath=expr.getPropertyName();
  NamespaceSupport namespaces=mappings.getNamespaces();
  AttributeDescriptor root=mappings.getTargetFeature();
  List<NestedAttributeMapping> nestedMappings=mappings.getNestedMappings();
  StepList simplifiedSteps=XPath.steps(root,targetXPath,namespaces);
  List<Expression> matchingMappings=mappings.findMappingsFor(simplifiedSteps,false);
  Iterator<Expression> it=matchingMappings.iterator();
  while (it.hasNext()) {
    if (it.next() == null) {
      it.remove();
    }
  }
  if (!nestedMappings.isEmpty()) {
    for (    NestedAttributeMapping nestedMapping : nestedMappings) {
      if (simplifiedSteps.startsWith(nestedMapping.getTargetXPath())) {
        matchingMappings.add(new NestedAttributeExpression(simplifiedSteps,nestedMapping));
      }
    }
  }
  if (matchingMappings.size() == 0) {
    throw new IllegalArgumentException("Can't find source expression for: " + targetXPath);
  }
  return matchingMappings;
}
