{
  AffineTransform original=new AffineTransform(tempTransform);
  setupPointTransform(tempTransform,centroid,textStyle,painter);
  Rectangle2D transformed=tempTransform.createTransformedShape(painter.getFullLabelBounds()).getBounds2D();
  if (!(displayArea.contains(transformed) || labelItem.isPartialsEnabled()) || (labelItem.isConflictResolutionEnabled() && glyphs.labelsWithinDistance(transformed,labelItem.getSpaceAround())) || goodnessOfFit(painter,tempTransform,pg) < painter.getLabel().getGoodnessOfFit()) {
    if (textStyle.flipRotation(pg.getGeometry())) {
      tempTransform.setTransform(original);
      setupPointTransform(tempTransform,centroid,textStyle,painter);
      transformed=tempTransform.createTransformedShape(painter.getFullLabelBounds()).getBounds2D();
      if (!(displayArea.contains(transformed) || labelItem.isPartialsEnabled()) || (labelItem.isConflictResolutionEnabled() && glyphs.labelsWithinDistance(transformed,labelItem.getSpaceAround())) || goodnessOfFit(painter,tempTransform,pg) < painter.getLabel().getGoodnessOfFit()) {
        textStyle.flipRotation(pg.getGeometry());
        return false;
      }
    }
 else {
      return false;
    }
  }
  if (DEBUG_CACHE_BOUNDS) {
    painter.graphics.setStroke(new BasicStroke());
    painter.graphics.setColor(Color.RED);
    painter.graphics.draw(transformed);
  }
  painter.paintStraightLabel(tempTransform);
  if (labelItem.isConflictResolutionEnabled()) {
    glyphs.addLabel(labelItem,transformed);
  }
  return true;
}
