{
  listen(false);
  try {
    boolean enabled=true;
    Fill fill=fill2;
    if (fill == null) {
      StyleBuilder builder=new StyleBuilder();
      fill=builder.createFill(defaultColor,0.5);
      enabled=false;
    }
    this.enabled=enabled && ((mode != Mode.NONE && mode != Mode.LINE) && fill != null);
    this.color=SLD.color(fill);
    this.opacity=SLD.opacity(fill);
    this.on.setEnabled(mode != Mode.NONE && mode != Mode.LINE);
    this.chooser.setColor(this.color);
    String text=MessageFormat.format("{0,number,#0%}",this.opacity);
    this.percent.setText(text);
    this.percent.select(this.percent.indexOf(text));
    this.on.setSelection(this.enabled);
    this.chooser.setEnabled(this.enabled);
    this.percent.setEnabled(this.enabled);
  }
  finally {
    listen(true);
  }
}
