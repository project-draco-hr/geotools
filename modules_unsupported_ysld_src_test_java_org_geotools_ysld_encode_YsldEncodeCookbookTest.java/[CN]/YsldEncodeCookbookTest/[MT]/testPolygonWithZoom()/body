{
  YamlMap obj=encode("poly","zoom.sld");
  YamlMap rule=obj.seq("feature-styles").map(0).seq("rules").map(0);
  assertThat(rule,yHasEntry("name",equalTo("Large")));
  assertThat(rule,yHasEntry("scale",yTuple(equalTo("min"),numEqualTo(1.0E8,0.1))));
  YamlMap poly=rule.seq("symbolizers").map(0).map("polygon");
  assertThat(poly.get("fill-color"),isColor("0000CC"));
  assertThat(poly.get("stroke-color"),isColor("000000"));
  assertEquals(7,poly.integer("stroke-width").intValue());
  YamlMap text=rule.seq("symbolizers").map(1).map("text");
  assertEquals("${name}",text.str("label"));
  assertEquals("Arial",text.str("font-family"));
  assertEquals(14,text.integer("font-size").intValue());
  assertEquals("normal",text.str("font-style"));
  assertEquals("bold",text.str("font-weight"));
  assertEquals("point",text.str("placement"));
  assertThat(text,yHasEntry("anchor",yTuple(numEqualTo(0.5,0.0001),numEqualTo(0.5,0.0001))));
  assertThat(text.get("fill-color"),isColor("FFFFFF"));
  rule=obj.seq("feature-styles").map(0).seq("rules").map(1);
  assertThat(rule,yHasEntry("name",equalTo("Medium")));
  assertThat(rule,yHasEntry("scale",yTuple(numEqualTo(1.0E8,0.1),numEqualTo(2.0E8,0.1))));
  poly=rule.seq("symbolizers").map(0).map("polygon");
  assertThat(poly.get("fill-color"),isColor("0000CC"));
  assertThat(poly.get("stroke-color"),isColor("000000"));
  assertEquals(4,poly.integer("stroke-width").intValue());
  rule=obj.seq("feature-styles").map(0).seq("rules").map(2);
  assertThat(rule,yHasEntry("name",equalTo("Small")));
  assertThat(rule,yHasEntry("scale",yTuple(numEqualTo(2.0E8,0.1),equalTo("max"))));
  poly=rule.seq("symbolizers").map(0).map("polygon");
  poly=rule.seq("symbolizers").map(0).map("polygon");
  assertThat(poly.get("fill-color"),isColor("0000CC"));
  assertThat(poly.get("stroke-color"),isColor("000000"));
  assertEquals(1,poly.integer("stroke-width").intValue());
}
