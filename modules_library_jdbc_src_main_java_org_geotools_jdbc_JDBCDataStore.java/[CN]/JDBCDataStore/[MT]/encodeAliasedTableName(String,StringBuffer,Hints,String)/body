{
  VirtualTable vtDefinition=virtualTables.get(tableName);
  if (vtDefinition != null) {
    sql.append("(").append(vtDefinition.expandParameters(hints)).append(")");
    if (alias == null) {
      alias="vtable";
    }
    dialect.encodeTableAlias(alias,sql);
  }
 else {
    if (databaseSchema != null) {
      dialect.encodeSchemaName(databaseSchema,sql);
      sql.append(".");
    }
    dialect.encodeTableName(tableName,sql);
    if (alias != null) {
      dialect.encodeTableAlias(alias,sql);
    }
  }
}
