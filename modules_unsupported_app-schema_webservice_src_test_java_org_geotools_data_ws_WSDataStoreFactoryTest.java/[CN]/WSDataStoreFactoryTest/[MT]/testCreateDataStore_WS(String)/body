{
  final WSDataStoreFactory dsf=new WSDataStoreFactory();
  Map<String,Serializable> params=new HashMap<String,Serializable>();
  File file=new File(BASE_DIRECTORY + capabilitiesFile);
  if (!file.exists()) {
    throw new IllegalArgumentException(capabilitiesFile + " not found");
  }
  URL url=file.toURL();
  params.put(WSDataStoreFactory.GET_CONNECTION_URL.key,url);
  params.put(WSDataStoreFactory.TEMPLATE_DIRECTORY.key,new URL("file:" + BASE_DIRECTORY));
  params.put(WSDataStoreFactory.TEMPLATE_NAME.key,"request.ftl");
  params.put(WSDataStoreFactory.CAPABILITIES_FILE_LOCATION.key,url);
  XmlDataStore dataStore=dsf.createDataStore(params);
  assertTrue(dataStore instanceof WS_DataStore);
}
