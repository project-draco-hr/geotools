{
  final Set<String> names;
  if (colorMap != null) {
    if (colorRanges != null) {
      names=new HashSet<String>(colorMap.keySet());
      names.addAll(colorRanges.keySet());
    }
 else {
      names=colorMap.keySet();
    }
  }
 else {
    if (colorRanges != null) {
      names=colorRanges.keySet();
    }
 else {
      names=Collections.emptySet();
    }
  }
  int count=names.size();
  final CharSequence[] asArray=names.toArray(new CharSequence[count]);
  for (int i=count; --i >= 0; ) {
    if (asArray[i] == null) {
      System.arraycopy(asArray,i + 1,asArray,i,--count - i);
      asArray[count]=ANY_QUANTITATIVE_CATEGORY;
    }
  }
  Arrays.sort(asArray,0,count);
  return asArray;
}
