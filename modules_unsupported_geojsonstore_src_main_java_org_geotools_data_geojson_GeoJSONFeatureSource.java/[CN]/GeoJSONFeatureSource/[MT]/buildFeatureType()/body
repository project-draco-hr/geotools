{
  if (schema == null) {
    FeatureCollection<?,?> collection=fetchFeatures();
    SimpleFeatureType sch=(SimpleFeatureType)collection.getSchema();
    SimpleFeatureTypeBuilder sb=new SimpleFeatureTypeBuilder();
    sb.setName(getState().getEntry().getTypeName());
    for (    AttributeDescriptor att : sch.getAttributeDescriptors()) {
      sb.add(att);
    }
    if (sch.getCoordinateReferenceSystem() != null) {
      sb.setCRS(sch.getCoordinateReferenceSystem());
    }
 else {
      sb.setCRS(DefaultGeographicCRS.WGS84);
    }
    sb.setDescription(sch.getDescription());
    schema=sb.buildFeatureType();
  }
  return schema;
}
