{
  SimpleFeatureTypeBuilder typeBuilder=new SimpleFeatureTypeBuilder();
  typeBuilder.setName(TEST.TestFeature.getLocalPart());
  typeBuilder.setNamespaceURI(TEST.TestFeature.getNamespaceURI());
  typeBuilder.add("name",String.class);
  typeBuilder.add("description",String.class);
  typeBuilder.add("geom",Point.class);
  typeBuilder.nillable(true);
  typeBuilder.add("count",Integer.class);
  typeBuilder.nillable(true);
  typeBuilder.add("date",Date.class);
  typeBuilder.add("data",String.class);
  SimpleFeatureType type=typeBuilder.buildFeatureType();
  SimpleFeatureBuilder builder=new SimpleFeatureBuilder(type);
  builder.add("theName");
  builder.add("theDescription");
  builder.add(GML3MockData.point());
  builder.add(null);
  builder.add(null);
  SimpleFeature feature=builder.buildFeature("fid.1");
  TestConfiguration configuration=new TestConfiguration();
  Encoder encoder=new Encoder(configuration);
  Document dom=encoder.encodeAsDOM(feature,TEST.TestFeature);
  NodeList countList=dom.getElementsByTagName("test:count");
  Node count=countList.item(0);
  assertEquals("true",count.getAttributes().getNamedItem("xs:nil").getTextContent());
  NodeList dateList=dom.getElementsByTagName("test:date");
  Node date=dateList.item(0);
  assertEquals("true",date.getAttributes().getNamedItem("xs:nil").getTextContent());
  encoder=new Encoder(configuration);
  encoder.getNamespaces().declarePrefix("xsd","http://www.w3.org/2001/XMLSchema");
  dom=encoder.encodeAsDOM(feature,TEST.TestFeature);
  countList=dom.getElementsByTagName("test:count");
  count=countList.item(0);
  assertEquals("true",count.getAttributes().getNamedItem("xsd:nil").getTextContent());
  dateList=dom.getElementsByTagName("test:date");
  date=dateList.item(0);
  assertEquals("true",date.getAttributes().getNamedItem("xsd:nil").getTextContent());
}
