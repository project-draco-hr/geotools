{
  if (!(requestedBounds.isEmpty() || screenArea.isEmpty())) {
    double xscale=screenArea.getWidth() / requestedBounds.getWidth();
    double yscale=screenArea.getHeight() / requestedBounds.getHeight();
    double scale=Math.min(xscale,yscale);
    worldToScreen=new AffineTransform(scale,0,0,-scale,-requestedBounds.getMinX(),requestedBounds.getMaxY());
    try {
      screenToWorld=worldToScreen.createInverse();
    }
 catch (    NoninvertibleTransformException ex) {
      throw new RuntimeException("Unable to create coordinate transforms.",ex);
    }
  }
}
