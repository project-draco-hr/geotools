{
  if (bgColor == null)   throw new NullPointerException((Errors.format(ErrorKeys.NULL_ARGUMENT_$1,"bgColor")));
  if (icm == null)   throw new NullPointerException((Errors.format(ErrorKeys.NULL_ARGUMENT_$1,"icm")));
  final int r=bgColor.getRed();
  final int g=bgColor.getGreen();
  final int b=bgColor.getBlue();
  final int a=bgColor.getAlpha();
  final int size=icm.getMapSize();
  for (int i=0; i < size; i++) {
    if (r == icm.getRed(i) && g == icm.getGreen(i) && b == icm.getBlue(i) && (a == icm.getAlpha(i) || !icm.hasAlpha()))     return i;
  }
  return -1;
}
