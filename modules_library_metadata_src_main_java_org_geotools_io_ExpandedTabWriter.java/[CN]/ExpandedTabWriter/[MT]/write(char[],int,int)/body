{
synchronized (lock) {
    int start=offset;
    length+=offset;
    for (int end=offset; end < length; end++) {
      final char c=buffer[end];
switch (c) {
case '\r':
case '\n':
        column=0;
      break;
case '\t':
    out.write(buffer,start,end - start);
  start=end + 1;
expand();
break;
default :
column++;
break;
}
}
out.write(buffer,start,length - start);
}
}
