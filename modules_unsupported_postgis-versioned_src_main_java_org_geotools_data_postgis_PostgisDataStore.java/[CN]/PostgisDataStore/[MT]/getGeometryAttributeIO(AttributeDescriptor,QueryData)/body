{
  GeometryDescriptor geometryType=(GeometryDescriptor)type;
  CoordinateReferenceSystem crs=null;
  if (geometryType != null)   crs=geometryType.getCoordinateReferenceSystem();
  Hints hints=queryData != null ? queryData.getHints() : GeoTools.getDefaultHints();
  if (geometryType != null && geometryType.getUserData().get(Hints.COORDINATE_DIMENSION) instanceof Integer) {
    hints.put(Hints.COORDINATE_DIMENSION,geometryType.getUserData().get(Hints.COORDINATE_DIMENSION));
  }
  int D=(crs == null || Boolean.TRUE.equals(queryData.getHints().get(Hints.FEATURE_2D))) ? 2 : crs.getCoordinateSystem().getDimension();
  if (WKBEnabled) {
    return new PgWKBAttributeIO(isByteaEnabled(),hints);
  }
 else {
    if (D == 3) {
      return new EWKTAttributeIO();
    }
 else {
      return new WKTAttributeIO();
    }
  }
}
