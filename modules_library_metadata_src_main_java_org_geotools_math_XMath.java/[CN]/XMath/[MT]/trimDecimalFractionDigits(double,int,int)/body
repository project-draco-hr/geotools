{
  double lower=value;
  double upper=value;
  n=countDecimalFractionDigits(value) - n;
  if (n > 0) {
    for (int i=0; i < maxULP; i++) {
      if (countDecimalFractionDigits(lower=previous(lower)) <= n)       return lower;
      if (countDecimalFractionDigits(upper=next(upper)) <= n)       return upper;
    }
  }
  return value;
}
