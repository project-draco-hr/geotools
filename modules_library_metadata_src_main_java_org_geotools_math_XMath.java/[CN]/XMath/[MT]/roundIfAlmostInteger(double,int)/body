{
  final double target=Math.rint(value);
  if (value != target) {
    final boolean pos=(value < target);
    double candidate=value;
    while (--maxULP >= 0) {
      candidate=pos ? next(candidate) : previous(candidate);
      if (candidate == target) {
        return target;
      }
    }
  }
  return value;
}
