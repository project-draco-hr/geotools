{
  YamlMap obj=encode("poly","zoom.sld");
  YamlMap rule=obj.seq("feature-styles").map(0).seq("rules").map(0);
  assertEquals("Large",rule.str("name"));
  Matcher m=Pattern.compile("\\(,(.*)\\)").matcher(rule.str("scale"));
  assertTrue(m.matches());
  assertEquals(1.0E8,Double.parseDouble(m.group(1)),0.1);
  YamlMap poly=rule.seq("symbolizers").map(0).map("polygon");
  assertEquals("#0000CC",poly.str("fill-color"));
  assertEquals("#000000",poly.str("stroke-color"));
  assertEquals(7,poly.integer("stroke-width").intValue());
  YamlMap text=rule.seq("symbolizers").map(1).map("text");
  assertEquals("name",text.str("label"));
  assertEquals("Arial",text.str("font-family"));
  assertEquals(14,text.integer("font-size").intValue());
  assertEquals("normal",text.str("font-style"));
  assertEquals("bold",text.str("font-weight"));
  assertEquals("point",text.map("placement").str("type"));
  assertEquals("(0.5,0.5)",text.map("placement").str("anchor"));
  assertEquals("#FFFFFF",text.str("fill-color"));
  rule=obj.seq("feature-styles").map(0).seq("rules").map(1);
  assertEquals("Medium",rule.str("name"));
  m=Pattern.compile("\\((.*),(.*)\\)").matcher(rule.str("scale"));
  assertTrue(m.matches());
  assertEquals(1.0E8,Double.parseDouble(m.group(1)),0.1);
  assertEquals(2.0E8,Double.parseDouble(m.group(2)),0.1);
  poly=rule.seq("symbolizers").map(0).map("polygon");
  assertEquals("#0000CC",poly.str("fill-color"));
  assertEquals("#000000",poly.str("stroke-color"));
  assertEquals(4,poly.integer("stroke-width").intValue());
  rule=obj.seq("feature-styles").map(0).seq("rules").map(2);
  assertEquals("Small",rule.str("name"));
  m=Pattern.compile("\\((.*),\\)").matcher(rule.str("scale"));
  assertTrue(m.matches());
  assertEquals(2.0E8,Double.parseDouble(m.group(1)),0.1);
  poly=rule.seq("symbolizers").map(0).map("polygon");
  poly=rule.seq("symbolizers").map(0).map("polygon");
  assertEquals("#0000CC",poly.str("fill-color"));
  assertEquals("#000000",poly.str("stroke-color"));
  assertEquals(1,poly.integer("stroke-width").intValue());
}
