{
  final Date date=getTimeValueByIndex(variable,tIndex,cs);
  final Number verticalValue=getVerticalValueByIndex(variable,zIndex,cs);
  final SimpleFeature feature=DataUtilities.template(indexSchema);
  feature.setAttribute(CoverageSlice.Attributes.GEOMETRY,UnidataCRSUtilities.GEOM_FACTORY.toGeometry(reader.boundingBox));
  feature.setAttribute(CoverageSlice.Attributes.INDEX,imageIndex);
  if (date != null) {
    feature.setAttribute(reader.dimensionsMapping.get(UnidataUtilities.TIME_DIM),date);
  }
  final String elevationCVName=reader.dimensionsMapping.get(UnidataUtilities.ELEVATION_DIM);
  if (!Double.isNaN(verticalValue.doubleValue())) {
    List<AttributeDescriptor> descriptors=indexSchema.getAttributeDescriptors();
    String attribute=null;
    for (    AttributeDescriptor descriptor : descriptors) {
      if (descriptor.getLocalName().equalsIgnoreCase(elevationCVName)) {
        attribute=elevationCVName;
        break;
      }
    }
    if (attribute == null) {
      attribute=variable.getDimension(0).getShortName();
    }
    feature.setAttribute(attribute,verticalValue);
  }
  return feature;
}
