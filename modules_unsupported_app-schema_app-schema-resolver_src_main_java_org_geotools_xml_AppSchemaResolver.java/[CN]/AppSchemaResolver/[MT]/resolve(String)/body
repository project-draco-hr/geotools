{
  String resolvedLocation=null;
  if (location.startsWith("file:") || location.startsWith("jar:file:")) {
    resolvedLocation=location;
  }
  if (resolvedLocation == null && catalog != null) {
    resolvedLocation=catalog.resolveLocation(location);
  }
  if (resolvedLocation == null) {
    resolvedLocation=resolveClasspathLocation(location);
  }
  if (resolvedLocation == null && cache != null) {
    resolvedLocation=cache.resolveLocation(location);
  }
  if (resolvedLocation == null) {
    throw new RuntimeException(String.format("Failed to resolve %s",location));
  }
  resolvedLocationToOriginalLocationMap.put(resolvedLocation,location);
  try {
    resolvedLocationToOriginalLocationMap.put(URLDecoder.decode(resolvedLocation,"UTF-8"),location);
  }
 catch (  UnsupportedEncodingException e) {
    throw new RuntimeException(e);
  }
  LOGGER.fine(String.format("Resolved %s -> %s",location,resolvedLocation));
  return resolvedLocation;
}
