{
  cx=new TracingMockConnection();
  configureMetadata();
  dataStore=new JDBCDataStore();
  dataStore.setFilterFactory(CommonFactoryFinder.getFilterFactory2());
  dataStore.setSQLDialect(createBasicSQLDialect());
  MockDataSource dataSource=new MockDataSource();
  dataSource.setupConnection(cx);
  dataStore.setDataSource(dataSource);
  featureType=Mockito.mock(SimpleFeatureType.class);
  Mockito.when(featureType.getTypeName()).thenReturn(SAMPLE_FEATURE_NAME);
  Mockito.when(featureType.getName()).thenReturn(new NameImpl(SAMPLE_FEATURE_NAME));
  tx=new DefaultTransaction();
}
