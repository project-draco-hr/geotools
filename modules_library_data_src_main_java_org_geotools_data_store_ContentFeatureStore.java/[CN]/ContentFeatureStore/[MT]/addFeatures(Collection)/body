{
  List<FeatureId> ids=new LinkedList<FeatureId>();
  FeatureWriter<SimpleFeatureType,SimpleFeature> writer=getWriter(Filter.INCLUDE,WRITER_ADD);
  try {
    for (Iterator f=collection.iterator(); f.hasNext(); ) {
      FeatureId id=addFeature((SimpleFeature)f.next(),writer);
      ids.add(id);
    }
  }
  finally {
    writer.close();
  }
  return ids;
}
