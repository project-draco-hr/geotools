{
  final AffineTransform screenToWord=AffineTransform.getScaleInstance(0.5,0.5);
  final AffineTransform worldToScreen=screenToWord.createInverse();
  final CoordinateReferenceSystem crs=DefaultGeographicCRS.WGS84;
  double scale;
  scale=RendererUtilities.calculateOGCScaleAffine(crs,worldToScreen,new HashMap());
  assertEquals(0.5 * RendererUtilities.OGC_DEGREE_TO_METERS / 0.00028,scale,0.0001);
  worldToScreen.rotate(1.0);
  scale=RendererUtilities.calculateOGCScaleAffine(crs,worldToScreen,new HashMap());
  assertEquals(0.5 * RendererUtilities.OGC_DEGREE_TO_METERS / 0.00028,scale,0.0001);
  worldToScreen.translate(100.0,100.0);
  scale=RendererUtilities.calculateOGCScaleAffine(crs,worldToScreen,new HashMap());
  assertEquals(0.5 * RendererUtilities.OGC_DEGREE_TO_METERS / 0.00028,scale,0.0001);
}
