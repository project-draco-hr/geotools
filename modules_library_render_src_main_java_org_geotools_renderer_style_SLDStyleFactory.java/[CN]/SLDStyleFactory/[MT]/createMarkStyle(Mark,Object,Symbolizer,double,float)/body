{
  Shape shape=getShape(mark,feature);
  if (shape == null) {
    throw new IllegalArgumentException("The specified mark " + mark.getWellKnownName() + " was not found!");
  }
  MarkStyle2D ms2d=new MarkStyle2D();
  ms2d.setShape(shape);
  ms2d.setFill(getPaint(mark.getFill(),feature,symbolizer));
  ms2d.setFillComposite(getComposite(mark.getFill(),feature));
  ms2d.setStroke(getStroke(mark.getStroke(),feature));
  ms2d.setContour(getStrokePaint(mark.getStroke(),feature));
  ms2d.setContourComposite(getStrokeComposite(mark.getStroke(),feature));
  if (size <= 0) {
    size=DEFAULT_MARK_SIZE;
  }
  ms2d.setSize(size);
  ms2d.setRotation(rotation);
  return ms2d;
}
