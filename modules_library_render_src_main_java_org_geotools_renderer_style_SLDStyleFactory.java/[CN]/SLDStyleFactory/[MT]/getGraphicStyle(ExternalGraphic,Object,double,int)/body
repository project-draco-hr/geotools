{
  Icon icon=getIcon(eg,feature,toImageSize(size));
  if (icon != null) {
    if (icon instanceof ImageIcon) {
      ImageIcon img=(ImageIcon)icon;
      if (img.getImage() instanceof BufferedImage) {
        BufferedImage image=(BufferedImage)img.getImage();
        return new GraphicStyle2D(image,0,0);
      }
    }
    BufferedImage result=new BufferedImage(icon.getIconWidth() + border * 2,icon.getIconHeight() + border * 2,BufferedImage.TYPE_4BYTE_ABGR);
    Graphics2D g=(Graphics2D)result.getGraphics();
    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    g.setRenderingHint(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY);
    g.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL,RenderingHints.VALUE_STROKE_PURE);
    icon.paintIcon(null,g,1,1);
    g.dispose();
    return new GraphicStyle2D(result,0,0,border);
  }
  return null;
}
