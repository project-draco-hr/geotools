{
  if (icon == null) {
    return null;
  }
  if (icon instanceof ImageIcon) {
    ImageIcon img=(ImageIcon)icon;
    if (img.getImage() instanceof BufferedImage) {
      BufferedImage image=(BufferedImage)img.getImage();
      return new GraphicStyle2D(image,0,0);
    }
  }
  BufferedImage result=new BufferedImage(icon.getIconWidth() + border * 2,icon.getIconHeight() + border * 2,BufferedImage.TYPE_4BYTE_ABGR);
  Graphics2D g=(Graphics2D)result.getGraphics();
  g.setRenderingHints(renderingHints);
  icon.paintIcon(null,g,1,1);
  g.dispose();
  return new GraphicStyle2D(result,0,0,border);
}
