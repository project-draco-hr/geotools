{
synchronized (this) {
    if (map.get(type.getName()) != null) {
      FeatureType other=map.get(type.getName());
      if (!other.equals(type)) {
        String msg="Type with same name already exists in cache.";
        throw new IllegalArgumentException(msg);
      }
      return;
    }
    map.put(type.getName(),type);
  }
}
