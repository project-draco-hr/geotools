{
  URL url=new URL("http://localhost:8080/geoserver/wms?REQUEST=GetCapabilities");
  WebMapServer wms=new WebMapServer(url);
  WMSCapabilities caps=wms.getCapabilities();
  Layer layer=null;
  for (Iterator i=caps.getLayerList().iterator(); i.hasNext(); ) {
    Layer test=(Layer)i.next();
    if (test.getName() != null && test.getName().length() != 0) {
      layer=test;
      break;
    }
  }
  GetMapRequest mapRequest=wms.createGetMapRequest();
  mapRequest.addLayer(layer);
  mapRequest.setDimensions("400","400");
  mapRequest.setFormat("image/png");
  CRSEnvelope bbox=new CRSEnvelope("EPSG:4326",-100.0,-70,25,40);
  mapRequest.setBBox(bbox);
  System.out.println(mapRequest.getFinalURL());
  GetMapResponse response=wms.issueRequest(mapRequest);
  System.out.println(response.getContentType());
}
