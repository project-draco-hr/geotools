{
  SpatioTemporalMetadata metadata;
synchronized (spatioTemporalMetadataMap) {
    if (!spatioTemporalMetadataMap.containsKey(imageIndex)) {
      metadata=new NetCDFSpatioTemporalMetadata(this,imageIndex);
      spatioTemporalMetadataMap.put(imageIndex,metadata);
    }
 else {
      metadata=spatioTemporalMetadataMap.get(imageIndex);
      if (metadata == null) {
        metadata=new NetCDFSpatioTemporalMetadata(this,imageIndex);
        spatioTemporalMetadataMap.put(imageIndex,metadata);
      }
    }
  }
  return metadata;
}
