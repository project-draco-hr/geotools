{
  if (backend != bufferedBackend)   throw new IllegalStateException("Can't commit without a mark");
  for (  Action a : pending) {
    a.commit();
  }
  pending.clear();
  backend=directBackend;
}
