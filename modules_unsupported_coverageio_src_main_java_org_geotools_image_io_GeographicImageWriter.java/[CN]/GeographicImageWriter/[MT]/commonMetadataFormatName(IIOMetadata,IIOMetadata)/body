{
  String format=outData.getNativeMetadataFormatName();
  if (isSupportedFormat(inData,format)) {
    return format;
  }
  final String[] formats=outData.getExtraMetadataFormatNames();
  if (formats != null) {
    for (int i=0; i < formats.length; i++) {
      format=formats[i];
      if (isSupportedFormat(inData,format)) {
        return format;
      }
    }
  }
  if (outData.isStandardMetadataFormatSupported() && inData.isStandardMetadataFormatSupported()) {
    return IIOMetadataFormatImpl.standardMetadataFormatName;
  }
  return null;
}
