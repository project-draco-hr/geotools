{
  if (distance == null && (attribute == null || attribute == "")) {
    throw new IllegalArgumentException("Buffer distance was not specified");
  }
  if (attribute != null && !"".equals(attribute)) {
    if (features.getSchema().getDescriptor(attribute) == null) {
      boolean found=false;
      for (      AttributeDescriptor ad : features.getSchema().getAttributeDescriptors()) {
        if (ad.getLocalName().equals(attribute)) {
          attribute=ad.getLocalName();
          found=true;
          break;
        }
      }
      if (!found) {
        throw new IllegalArgumentException("Attribute not found among the source collection ones: " + attribute);
      }
    }
  }
 else {
    attribute=null;
  }
  return new BufferedFeatureCollection(features,attribute,distance);
}
