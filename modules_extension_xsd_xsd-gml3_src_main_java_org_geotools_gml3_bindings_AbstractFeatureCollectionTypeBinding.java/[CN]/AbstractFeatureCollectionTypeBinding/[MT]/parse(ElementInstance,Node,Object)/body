{
  SimpleFeatureCollection featureCollection=(SimpleFeatureCollection)node.getChildValue(FeatureCollection.class);
  if (featureCollection == null) {
    featureCollection=DefaultFeatureCollections.newCollection();
  }
  featureCollection.addAll(node.getChildValues(SimpleFeature.class));
  SimpleFeature[] featureMembers=(SimpleFeature[])node.getChildValue(SimpleFeature[].class);
  if (featureMembers != null) {
    for (int i=0; i < featureMembers.length; i++) {
      featureCollection.add(featureMembers[i]);
    }
  }
  return featureCollection;
}
