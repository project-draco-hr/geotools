{
  SimpleFeatureCollection featureCollection=(SimpleFeatureCollection)node.getChildValue(FeatureCollection.class);
  if (featureCollection == null) {
    featureCollection=new DefaultFeatureCollection();
  }
  List<SimpleFeature> childValues=node.getChildValues(SimpleFeature.class);
  Collection<SimpleFeature> collection=DataUtilities.collectionCast(featureCollection);
  collection.addAll(childValues);
  SimpleFeature[] featureMembers=(SimpleFeature[])node.getChildValue(SimpleFeature[].class);
  if (featureMembers != null) {
    for (int i=0; i < featureMembers.length; i++) {
      collection.add(featureMembers[i]);
    }
  }
  return featureCollection;
}
