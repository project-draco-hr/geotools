{
  formatter.ensurePrefixSet(input);
  final Writer writer=new Writer(inputIndex,policy);
  writer.setLogLevel(getLogLevel());
  final MosaicImageWriteParam param=writer.getDefaultWriteParam();
  param.setTileWritingPolicy(policy);
  try {
    if (!writer.writeFromInput(input,inputIndex,param)) {
      return null;
    }
  }
  finally {
    writer.dispose();
  }
  TileManager tiles=writer.outputTiles;
  if (tiles.geometry == null) {
    if (writer.inputTiles != null) {
      for (      final TileManager candidate : writer.inputTiles) {
        final ImageGeometry geometry=candidate.getGridGeometry();
        if (geometry != null) {
          tiles.setGridToCRS(geometry.getGridToCRS());
          break;
        }
      }
    }
  }
  return tiles;
}
