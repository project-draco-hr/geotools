{
  TestHttpResponse httpResponse=new TestHttpResponse("text/xml; subtype=gml/3.1.1","UTF-8",CUBEWERX_GOVUNITCE.DATA.openStream());
  TestWFSClient wfs=createTestProtocol(CUBEWERX_GOVUNITCE.CAPABILITIES,new MockHTTPClient(httpResponse));
  wfs.setDescribeFeatureTypeURLOverride(CUBEWERX_GOVUNITCE.SCHEMA);
  WFSDataStore ds=new WFSDataStore(wfs);
  Query query=new Query(CUBEWERX_GOVUNITCE.FEATURETYPENAME);
  CoordinateReferenceSystem otherCrs=CRS.decode(CUBEWERX_GOVUNITCE.CRS);
  query.setCoordinateSystem(otherCrs);
  FeatureReader<SimpleFeatureType,SimpleFeature> featureReader;
  featureReader=ds.getFeatureReader(query,Transaction.AUTO_COMMIT);
  assertNotNull(featureReader);
  assertEquals(otherCrs,featureReader.getFeatureType().getCoordinateReferenceSystem());
  GetFeatureRequest request=wfs.getRequest();
  assertEquals(CUBEWERX_GOVUNITCE.CRS,request.getSrsName());
  CoordinateReferenceSystem unknownCrs=CRS.decode("EPSG:3003");
  query.setCoordinateSystem(unknownCrs);
  featureReader=ds.getFeatureReader(query,Transaction.AUTO_COMMIT);
  assertNotNull(featureReader);
  assertTrue(featureReader instanceof ReprojectFeatureReader);
  assertEquals(unknownCrs,featureReader.getFeatureType().getCoordinateReferenceSystem());
  request=wfs.getRequest();
  assertNull(request.getSrsName());
}
