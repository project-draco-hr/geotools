{
  TestHttpResponse httpResponse=new TestHttpResponse("text/xml; subtype=gml/2.1.2","UTF-8",stream("CubeWerx_nsdi/1.1.0/gml212.xml"));
  TestWFSClient wfs=createTestProtocol(CUBEWERX_GOVUNITCE.CAPABILITIES,new MockHTTPClient(httpResponse));
  wfs.setDescribeFeatureTypeURLOverride(CUBEWERX_GOVUNITCE.SCHEMA);
  WFSDataStore ds=new WFSDataStore(wfs);
  wfs.setOutputformatOverride("text/xml; subtype=gml/2.1.2");
  Query query=new Query(CUBEWERX_GOVUNITCE.FEATURETYPENAME);
  FeatureReader<SimpleFeatureType,SimpleFeature> featureReader;
  featureReader=ds.getFeatureReader(query,Transaction.AUTO_COMMIT);
  while (featureReader.hasNext()) {
    SimpleFeature feature=featureReader.next();
    Object geometry=feature.getDefaultGeometry();
    assertNotNull(geometry);
    assertTrue(geometry instanceof Polygon);
  }
  GetFeatureRequest request=wfs.getRequest();
  assertEquals("text/xml; subtype=gml/2.1.2",request.getOutputFormat());
}
