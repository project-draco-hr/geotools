{
  double ratio=dx / width;
  if (ratio < 0.3) {
    return x + dx;
  }
 else   if (ratio > 0.7) {
    return x + dx - span;
  }
 else {
    return x + dx - span / 2.0;
  }
}
