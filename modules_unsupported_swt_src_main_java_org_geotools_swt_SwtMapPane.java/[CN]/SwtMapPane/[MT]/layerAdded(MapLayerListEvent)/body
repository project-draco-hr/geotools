{
  Layer layer=event.getElement();
  if (layerTable != null) {
    layerTable.onAddLayer(layer);
  }
  layer.setSelected(true);
  redrawBaseImage=true;
  boolean atFullExtent=equalsFullExtent(getDisplayArea());
  boolean firstLayer=content.layers().size() == 1;
  if (firstLayer || atFullExtent) {
    reset();
    if (firstLayer) {
      setCrs(layer.getBounds().getCoordinateReferenceSystem());
      return;
    }
  }
  if (!isDisposed())   redraw();
}
