{
  if (layerTable != null) {
    layerTable.onAddLayer(event.getLayer());
  }
  MapLayer layer=event.getLayer();
  layer.setSelected(true);
  boolean atFullExtent=equalsFullExtent(getDisplayArea());
  boolean firstLayer=context.getLayerCount() == 1;
  if (firstLayer || atFullExtent) {
    reset();
    if (firstLayer) {
      setCrs(layer.getBounds().getCoordinateReferenceSystem());
      return;
    }
  }
  redraw();
}
