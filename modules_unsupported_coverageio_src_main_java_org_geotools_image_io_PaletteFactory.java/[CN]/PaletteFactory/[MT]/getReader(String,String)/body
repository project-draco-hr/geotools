{
  final File file=new File(directory,name);
  final String path=file.getPath().replace(File.separatorChar,'/');
  InputStream stream;
  try {
    stream=getResourceAsStream(path);
    if (stream == null) {
      if (file.canRead())       try {
        stream=new FileInputStream(file);
      }
 catch (      FileNotFoundException e) {
        Logging.unexpectedException(PaletteFactory.class,caller,e);
        return null;
      }
 else {
        return null;
      }
    }
  }
 catch (  SecurityException e) {
    Logging.recoverableException(PaletteFactory.class,caller,e);
    return null;
  }
  return getReader(stream);
}
