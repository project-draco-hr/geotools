{
  try {
    ArrayList values=new ArrayList<Property>();
    for (Iterator i=target.getValue().iterator(); i.hasNext(); ) {
      Property p=(Property)i.next();
      if (hasChild(p) || p.getDescriptor().getMinOccurs() > 0 || getEncodeIfEmpty(p)) {
        values.add(p);
      }
    }
    target.setValue(values);
  }
 catch (  DataSourceException e) {
    throw new DataSourceException("Unable to clean empty element",e);
  }
}
