{
  Collection<PropertyDescriptor> schema=new ArrayList<PropertyDescriptor>();
  for (  PropertyDescriptor descr : type.getDescriptors()) {
    if (descr instanceof GeometryDescriptor) {
      schema.add(reprojectGeometry((GeometryDescriptor)descr));
    }
 else {
      schema.add(descr);
    }
  }
  FeatureType ft;
  if (type instanceof NonFeatureTypeProxy) {
    ft=new NonFeatureTypeProxy(((NonFeatureTypeProxy)type).getSubject(),mapping,schema);
  }
 else {
    ft=ftf.createFeatureType(type.getName(),schema,reprojectGeometry(type.getGeometryDescriptor()),type.isAbstract(),type.getRestrictions(),type.getSuper(),type.getDescription());
  }
  ft.getUserData().putAll(type.getUserData());
  return ft;
}
