{
  if (!AVAILABLE) {
    LOGGER.severe("perceptualdiff is not available, can't compare " + image1 + " with image2");
    return new Difference(false,"Perceptual diff not available...");
  }
  try {
    List<String> args=new ArrayList<String>();
    args.add("perceptualdiff");
    args.add(image1.getAbsolutePath());
    args.add(image2.getAbsolutePath());
    args.add("-verbose");
    args.add("-fov");
    args.add("89.9");
    if (threshold > 0) {
      args.add("-threshold");
      args.add(String.valueOf(threshold));
    }
    String result=run(args);
    if (result.contains("PASS")) {
      return new Difference(false,result);
    }
 else {
      return new Difference(true,result);
    }
  }
 catch (  Exception e) {
    throw new RuntimeException("PerceptualDiff call failed!!",e);
  }
}
