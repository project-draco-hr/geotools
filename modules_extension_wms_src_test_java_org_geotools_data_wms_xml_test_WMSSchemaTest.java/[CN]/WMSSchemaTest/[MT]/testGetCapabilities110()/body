{
  File getCaps=TestData.file(this,"1.1.0Capabilities.xml");
  URL getCapsURL=getCaps.toURI().toURL();
  Map hints=new HashMap();
  hints.put(DocumentHandler.DEFAULT_NAMESPACE_HINT_KEY,WMSSchema.getInstance());
  Object object=DocumentFactory.getInstance(getCapsURL.openStream(),hints,Level.WARNING);
  assertTrue("Capabilities failed to parse",object instanceof WMSCapabilities);
  WMSCapabilities capabilities=(WMSCapabilities)object;
  assertEquals(capabilities.getVersion(),"1.1.0");
  assertEquals(capabilities.getService().getName(),"OGC:WMS");
  assertEquals(capabilities.getService().getTitle(),"GMap WMS Demo Server");
  assertTrue(capabilities.getService().get_abstract().contains("This demonstration server was setup by DM Solutions Group"));
  assertEquals(capabilities.getService().getOnlineResource(),new URL("http://dev1.dmsolutions.ca/cgi-bin/mswms_gmap?"));
  assertEquals(capabilities.getRequest().getGetCapabilities().getFormats().get(0),"application/vnd.ogc.wms_xml");
  Layer topLayer=(Layer)capabilities.getLayerList().get(0);
  assertNotNull(topLayer);
  assertNull(topLayer.getParent());
  assertFalse(topLayer.isQueryable());
  assertEquals(topLayer.getTitle(),"GMap WMS Demo Server");
  assertEquals(topLayer.getSrs().size(),4);
  Attribution attribution=topLayer.getAttribution();
  assertNotNull(attribution);
  assertEquals(attribution.getTitle(),"test");
  assertEquals(attribution.getOnlineResource().toString(),"http://www.example.com");
  LogoURL logoURL=attribution.getLogoURL();
  assertNotNull(logoURL);
  assertEquals(logoURL.getFormat(),"image/png");
  assertEquals(logoURL.getOnlineResource().toString(),"http://www.osgeo.org/sites/all/themes/osgeo/logo.png");
  assertEquals(logoURL.getHeight(),100);
  assertEquals(logoURL.getWidth(),100);
  Layer layer=(Layer)capabilities.getLayerList().get(1);
  assertEquals(layer.getParent(),topLayer);
  assertFalse(layer.isQueryable());
  assertEquals(layer.getName(),"bathymetry");
  assertEquals(layer.getTitle(),"Elevation/Bathymetry");
  attribution=layer.getAttribution();
  assertNotNull(attribution);
  assertEquals(attribution.getTitle(),"test");
  assertEquals(attribution.getOnlineResource().toString(),"http://www.example.com");
  logoURL=attribution.getLogoURL();
  assertNull(logoURL);
  layer=(Layer)capabilities.getLayerList().get(2);
  assertEquals(layer.getParent(),topLayer);
  assertFalse(layer.isQueryable());
  assertEquals(layer.getName(),"land_fn");
  assertEquals(layer.getTitle(),"Foreign Lands");
  attribution=layer.getAttribution();
  assertNotNull(attribution);
  assertEquals(attribution.getTitle(),"test");
  assertNull(attribution.getOnlineResource());
  logoURL=attribution.getLogoURL();
  assertNull(logoURL);
  layer=(Layer)capabilities.getLayerList().get(3);
  assertEquals(layer.getParent(),topLayer);
  assertTrue(layer.isQueryable());
  assertEquals(layer.getName(),"park");
  assertEquals(layer.getTitle(),"Parks");
  attribution=layer.getAttribution();
  assertNotNull(attribution);
  assertNull(attribution.getTitle());
  assertNotNull(attribution.getOnlineResource());
  assertEquals(attribution.getOnlineResource().toString(),"http://www.example.com");
  logoURL=attribution.getLogoURL();
  assertNotNull(logoURL);
  assertEquals(logoURL.getFormat(),"image/png");
  assertEquals(logoURL.getOnlineResource().toString(),"http://www.osgeo.org/sites/all/themes/osgeo/logo.png");
  assertEquals(logoURL.getHeight(),0);
  assertEquals(logoURL.getWidth(),0);
  layer=(Layer)capabilities.getLayerList().get(4);
  assertEquals(layer.getParent(),topLayer);
  assertFalse(layer.isQueryable());
  assertEquals(layer.getName(),"drain_fn");
  assertEquals(layer.getTitle(),"Water");
  attribution=layer.getAttribution();
  assertNull(attribution);
}
