{
  SimpleFeatureCollection fc=DataUtilities.collection(f);
  MapContext mc=new DefaultMapContext();
  mc.addLayer(fc,style);
  StreamingRenderer sr=new StreamingRenderer();
  sr.setContext(mc);
  BufferedImage bi=new BufferedImage(640,480,BufferedImage.TYPE_4BYTE_ABGR);
  sr.addRenderListener(new RenderListener(){
    public void featureRenderer(    SimpleFeature feature){
    }
    public void errorOccurred(    Exception e){
      e.printStackTrace();
      fail("Got an exception during rendering, this should not happen, " + "not even with emtpy geometries");
    }
  }
);
  sr.paint((Graphics2D)bi.getGraphics(),new Rectangle(640,480),new ReferencedEnvelope(new Envelope(0,10,0,10),DefaultGeographicCRS.WGS84));
}
