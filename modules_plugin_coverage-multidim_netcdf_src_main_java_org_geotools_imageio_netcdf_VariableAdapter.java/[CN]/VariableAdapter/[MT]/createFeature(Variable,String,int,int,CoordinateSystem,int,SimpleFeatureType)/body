{
  final Date date=getTimeValueByIndex(variable,tIndex,cs);
  final Number verticalValue=getVerticalValueByIndex(variable,zIndex,cs);
  final int dimSize=variable.getDimensions().size();
  final SimpleFeature feature=DataUtilities.template(indexSchema);
  feature.setAttribute(CoverageSlice.Attributes.GEOMETRY,NetCDFCRSUtilities.GEOM_FACTORY.toGeometry(reader.boundingBox));
  feature.setAttribute(CoverageSlice.Attributes.INDEX,imageIndex);
  String timeAttribute=null;
  if (date != null) {
    timeAttribute=reader.dimensionsMapping.get(NetCDFUtilities.TIME_DIM);
    feature.setAttribute(timeAttribute,date);
  }
  final String elevationCVName=reader.dimensionsMapping.get(NetCDFUtilities.ELEVATION_DIM);
  if (!Double.isNaN(verticalValue.doubleValue())) {
    List<AttributeDescriptor> descriptors=indexSchema.getAttributeDescriptors();
    String attribute=null;
    for (    AttributeDescriptor descriptor : descriptors) {
      if (descriptor.getLocalName().equalsIgnoreCase(elevationCVName)) {
        attribute=elevationCVName;
        break;
      }
    }
    if (attribute == null) {
      String attrib=null;
      for (int i=0; i < dimSize; i++) {
        attrib=variable.getDimension(i).getShortName();
        if (!attrib.equalsIgnoreCase(timeAttribute)) {
          attribute=attrib;
          break;
        }
      }
    }
    feature.setAttribute(attribute,verticalValue);
  }
  return feature;
}
