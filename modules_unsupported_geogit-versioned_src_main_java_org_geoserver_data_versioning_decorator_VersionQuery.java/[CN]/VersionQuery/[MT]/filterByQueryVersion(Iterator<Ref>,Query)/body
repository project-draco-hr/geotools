{
  VersionDetail vDetail=VersionDetail.extractVersionDetails(query);
  if (vDetail == null) {
    return refs;
  }
  VersionDetail.VersionType vType=vDetail.getType();
switch (vType) {
case Action:
    return filterByAction(refs,vDetail.getAction()).iterator();
case Date:
  return filterByDate(refs,vDetail.getDate()).iterator();
case DateRange:
return filterByRange(refs,vDetail.getRange()).iterator();
case Index:
return filterByIndex(refs,vDetail.getIndex()).iterator();
}
return Iterators.emptyIterator();
}
