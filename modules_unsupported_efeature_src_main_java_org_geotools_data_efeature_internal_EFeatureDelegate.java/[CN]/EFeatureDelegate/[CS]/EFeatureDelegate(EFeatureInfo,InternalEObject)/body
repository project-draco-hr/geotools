{
  if (eDelegate instanceof EFeatureImpl) {
    this.eImplRef=new WeakReference<EFeatureInternal>(((EFeatureImpl)eDelegate).eImpl());
  }
 else   if (eDelegate instanceof EFeatureDelegate) {
    this.eImplRef=new WeakReference<EFeatureInternal>(((EFeatureDelegate)eDelegate).eImpl());
  }
 else {
    this.eDelegate=new WeakReference<InternalEObject>(eDelegate);
    this.eImpl=new EFeatureInternal(eStructure,this);
  }
  String eSetID=eImpl().getID();
  EFeatureIDFactory eIDFactory=eStructure.eContext().eIDFactory();
  if (!(eSetID == null || eSetID.length() == 0)) {
    eIDFactory.useID(this,eSetID);
  }
 else {
    eSetID=eIDFactory.createID(this);
  }
}
