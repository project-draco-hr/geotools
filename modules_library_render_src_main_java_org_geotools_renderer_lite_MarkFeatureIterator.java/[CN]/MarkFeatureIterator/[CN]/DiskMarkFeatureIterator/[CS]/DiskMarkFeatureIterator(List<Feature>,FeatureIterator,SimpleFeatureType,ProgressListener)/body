{
  File file=File.createTempFile("z-ordered-",".features");
  this.io=new SimpleFeatureIO(file,schema);
  for (  Feature feature : features) {
    if (listener.isCanceled()) {
      break;
    }
    io.write((SimpleFeature)feature);
    featureCount++;
  }
  while (fi.hasNext() && !listener.isCanceled()) {
    Feature feature=fi.next();
    io.write((SimpleFeature)feature);
    featureCount++;
  }
  io.seek(0);
}
