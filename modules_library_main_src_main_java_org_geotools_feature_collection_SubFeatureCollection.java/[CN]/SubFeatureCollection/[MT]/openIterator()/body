{
  if (collection instanceof Collection) {
    Iterator<SimpleFeature> it=((Collection<SimpleFeature>)collection).iterator();
    return new FilteredIterator<SimpleFeature>(it,filter());
  }
 else   if (collection instanceof AbstractFeatureCollection) {
    Iterator<SimpleFeature> iterator=((AbstractFeatureCollection)collection).iterator();
    return new FilteredIterator<SimpleFeature>(iterator,filter());
  }
 else   if (collection instanceof AbstractFeatureCollection) {
    Iterator<SimpleFeature> iterator=((AdaptorFeatureCollection)collection).iterator();
    return new FilteredIterator<SimpleFeature>(iterator,filter());
  }
 else {
    throw new UnsupportedOperationException();
  }
}
