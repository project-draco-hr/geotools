{
  Hints hints=new Hints(Hints.ASSOCIATION_TRAVERSAL_DEPTH,new Integer(1));
  DefaultQuery query=new DefaultQuery();
  query.setTypeName("fk");
  query.setHints(hints);
  FeatureReader<SimpleFeatureType,SimpleFeature> reader=dataStore.getFeatureReader(query,Transaction.AUTO_COMMIT);
  assertTrue(reader.hasNext());
  SimpleFeature feature=reader.next();
  Association association=(Association)feature.getAttribute("ft1");
  assertEquals("ft1.0",association.getUserData().get("gml:id"));
  SimpleFeature associated=(SimpleFeature)association.getValue();
  assertNotNull(associated);
  assertEquals("zero",associated.getAttribute("stringProperty"));
  Property attribute=feature.getProperty("ft1");
  assertEquals("ft1.0",attribute.getUserData().get("gml:id"));
  reader.close();
}
