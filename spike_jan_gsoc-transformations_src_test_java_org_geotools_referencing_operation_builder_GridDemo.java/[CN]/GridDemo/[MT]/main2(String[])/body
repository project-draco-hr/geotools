{
  try {
    CoordinateReferenceSystem crs=DefaultEngineeringCRS.CARTESIAN_2D;
    DirectPosition minDp=new DirectPosition2D(crs,10.0,10.0);
    DirectPosition maxDp=new DirectPosition2D(crs,1000.0,1000.0);
    Envelope env=new GeneralEnvelope(new GeneralDirectPosition(minDp),new GeneralDirectPosition(maxDp));
    HashMap pointsAndValues=new HashMap();
    pointsAndValues.put(new DirectPosition2D(crs,130,805),6.5);
    pointsAndValues.put(new DirectPosition2D(crs,14,105),1.5);
    pointsAndValues.put(new DirectPosition2D(crs,45,78),-9.5);
    pointsAndValues.put(new DirectPosition2D(crs,905,28),7.5);
    pointsAndValues.put(new DirectPosition2D(crs,123,185),16.5);
    pointsAndValues.put(new DirectPosition2D(crs,104,215),-21.5);
    pointsAndValues.put(new DirectPosition2D(crs,45,708),-9.5);
    pointsAndValues.put(new DirectPosition2D(crs,905,350),17.5);
    pointsAndValues.put(new DirectPosition2D(crs,905,850),-45.5);
    TPSInterpolation interpolation=new TPSInterpolation(pointsAndValues,2,2,env);
    (new GridCoverageFactory()).create("Intepolated Coverage",interpolation.get2DGrid(),env).show();
    System.out.print(interpolation.getValue(new DirectPosition2D(12.34,15.123)));
    (new GridCoverageFactory()).create("Intepoalted Coverage",interpolation.get2DGrid(),env).show();
    AbstractInterpolation interp=new TPSInterpolation(generatePositionsWithValues(env,15,5));
    Color[] colors=new Color[]{Color.BLUE,Color.CYAN,Color.WHITE,Color.YELLOW,Color.RED};
    GridCoverage2D c=(new GridCoverageFactory()).create("Intepolated Coverage",interpolation.getRaster(),interpolation.getEnv(),null,null,null,new Color[][]{colors},null);
    WorldImageWriter writer=new WorldImageWriter((Object)(new File("/home/jezekjan/WDokumenty/geodata/rasters/p1010099.jpg")));
    writer.write(c,null);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
