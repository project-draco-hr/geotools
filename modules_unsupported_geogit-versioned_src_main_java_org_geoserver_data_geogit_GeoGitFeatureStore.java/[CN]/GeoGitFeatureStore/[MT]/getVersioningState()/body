{
  Transaction transaction=getTransaction();
  if (AUTO_COMMIT.equals(transaction)) {
    return VersioningTransactionState.VOID;
  }
  final Object key=GeoGitDataStore.class;
  VersioningTransactionState state=(VersioningTransactionState)transaction.getState(key);
  if (state == null) {
    Repository repository=dataStore.getRepository();
    state=new VersioningTransactionState(new GeoGIT(repository));
    transaction.putState(key,state);
  }
  return state;
}
