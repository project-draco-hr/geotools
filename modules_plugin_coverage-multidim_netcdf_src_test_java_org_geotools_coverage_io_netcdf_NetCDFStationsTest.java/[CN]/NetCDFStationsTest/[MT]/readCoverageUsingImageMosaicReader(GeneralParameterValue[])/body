{
  File testDirectory=new File(TestData.file(this,"."),"MultipleBandsDimensionTest");
  FileUtils.deleteQuietly(testDirectory);
  assertThat(testDirectory.mkdirs(),is(true));
  ImageMosaicReader reader=null;
  try {
    FileUtils.copyFileToDirectory(TestData.file(this,"stations.nc"),testDirectory);
    FileUtils.copyFileToDirectory(TestData.file(this,"stations_mosaic_indexer.xml"),testDirectory);
    FileUtils.copyFileToDirectory(TestData.file(this,"stations_netcdf_auxiliary.xml"),testDirectory);
    FileUtils.copyFileToDirectory(TestData.file(this,"stations_datastore.properties"),testDirectory);
    FileUtils.moveFile(new File(testDirectory,"stations_mosaic_indexer.xml"),new File(testDirectory,"indexer.xml"));
    FileUtils.moveFile(new File(testDirectory,"stations_netcdf_auxiliary.xml"),new File(testDirectory,"netcdf_auxiliary.xml"));
    FileUtils.moveFile(new File(testDirectory,"stations_datastore.properties"),new File(testDirectory,"datastore.properties"));
    ImageMosaicFormat format=new ImageMosaicFormat();
    reader=format.getReader(testDirectory);
    GridCoverage2D coverage=reader.read("stationA",readParameters);
    assertThat(coverage,notNullValue());
    PlanarImage image=PlanarImage.wrapRenderedImage(coverage.getRenderedImage());
    return image.getData();
  }
  finally {
    FileUtils.deleteQuietly(testDirectory);
    if (reader != null) {
      reader.dispose();
    }
  }
}
