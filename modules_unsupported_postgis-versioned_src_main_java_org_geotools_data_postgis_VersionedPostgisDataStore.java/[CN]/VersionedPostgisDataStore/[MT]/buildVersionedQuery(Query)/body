{
  RevisionInfo ri=new RevisionInfo(query.getVersion());
  Filter newFilter=buildVersionedFilter(query.getTypeName(),query.getFilter(),ri);
  DefaultQuery versionedQuery=new DefaultQuery(query);
  versionedQuery.setPropertyNames(filterPropertyNames(query));
  versionedQuery.setFilter(newFilter);
  return versionedQuery;
}
