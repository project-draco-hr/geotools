{
  CoordinateReferenceSystem srcCRS=null;
  GeometryFactory fac=new GeometryFactory();
  Point p=fac.createPoint(new Coordinate(10,10));
  MemoryDataStore ds=createDatastore(srcCRS,p);
  FeatureReader<SimpleFeatureType,SimpleFeature> original=ds.getFeatureReader(FEATURE_TYPE_NAME);
  CoordinateReferenceSystem destCRS=DefaultEngineeringCRS.CARTESIAN_2D;
  ForceCoordinateSystemFeatureReader modified=new ForceCoordinateSystemFeatureReader(ds.getFeatureReader(FEATURE_TYPE_NAME),destCRS);
  SimpleFeature f1=original.next();
  SimpleFeature f2=modified.next();
  assertEquals(((Geometry)f1.getDefaultGeometry()).getCoordinate(),((Geometry)f2.getDefaultGeometry()).getCoordinate());
  SimpleFeatureType f1Type=f1.getFeatureType();
  SimpleFeatureType f2Type=f2.getFeatureType();
  assertFalse(f2Type.getCoordinateReferenceSystem().equals(f1Type.getCoordinateReferenceSystem()));
  assertEquals(srcCRS,f1Type.getCoordinateReferenceSystem());
  assertEquals(srcCRS,f1Type.getGeometryDescriptor().getCoordinateReferenceSystem());
  assertEquals(destCRS,f2Type.getCoordinateReferenceSystem());
  assertEquals(destCRS,f2Type.getGeometryDescriptor().getCoordinateReferenceSystem());
  assertFalse(original.hasNext());
  assertFalse(modified.hasNext());
  assertNotNull(modified.builder);
}
