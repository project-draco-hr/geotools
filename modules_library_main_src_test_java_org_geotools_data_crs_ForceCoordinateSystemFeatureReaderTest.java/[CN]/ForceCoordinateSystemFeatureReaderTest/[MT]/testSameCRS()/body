{
  CoordinateReferenceSystem crs=DefaultGeographicCRS.WGS84;
  GeometryFactory fac=new GeometryFactory();
  Point p=fac.createPoint(new Coordinate(10,10));
  SimpleFeatureCollection features=createTestFeatureCollection(crs,p);
  FeatureReader<SimpleFeatureType,SimpleFeature> original=DataUtilities.reader(features);
  try (ForceCoordinateSystemFeatureReader modified=new ForceCoordinateSystemFeatureReader(DataUtilities.reader(features),crs)){
    SimpleFeature f1=original.next();
    SimpleFeature f2=modified.next();
    assertEquals(f1,f2);
    assertFalse(original.hasNext());
    assertFalse(modified.hasNext());
    assertSame(modified.builder.getFeatureType(),original.getFeatureType());
  }
 }
