{
  final Object input=getInput();
  if (input instanceof Reader) {
    final Reader reader=(Reader)input;
    if (!reader.markSupported()) {
      return null;
    }
    reader.mark(readAheadLimit);
    return reader;
  }
  final InputStream stream=getInputStream();
  if (closeOnReset == null) {
    if (!stream.markSupported()) {
      return null;
    }
    stream.mark(readAheadLimit);
  }
  final Reader reader=getInputStreamReader(stream);
  if (closeOnReset == stream) {
    closeOnReset=reader;
  }
  return reader;
}
